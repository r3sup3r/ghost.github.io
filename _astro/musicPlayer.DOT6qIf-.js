import{o as Ra,a as Fa,b as z,s as H,d as Ot}from"./attributes.DLxOR_zz.js";import{ae as Ma,a6 as Ua,aT as Oa,aU as Da,a4 as $a,q as Ca,aV as Na,aW as Gt,aX as Ga,a1 as ja,aY as ke,k as Va,s as f,p as Oe,i as ge,l as Dt,j as se,a as X,b as Ba,c as qa,d as t,g as e,aZ as $t,f as _e,h as m,e as u,r as o,u as Wa,t as De}from"./utils.Dr1TczrG.js";import{a as za,s as oe}from"./render.C1oLM3jD.js";import{i as q}from"./if.Dp9oOE7t.js";import{e as Ha,i as Xa}from"./each.CrFLtRbP.js";import{b as Ct}from"./this.D2D0wqrb.js";import{I as h}from"./Icon.Bnp6IXE7.js";import{m as Z}from"./config.BFBf_zv3.js";import{i as F}from"./translation.BtQLKSD3.js";import{I as M}from"./zh.CkPLEEwR.js";/* empty css                        */import"./branches.BQRjPrVD.js";import"./props.C1U51sjP.js";import"./language.BQWhdQbz.js";import"./preload-helper.BlTxHScW.js";import"./language.QW22jyx0.js";const Ka=()=>performance.now(),ae={tick:d=>requestAnimationFrame(d),now:()=>Ka(),tasks:new Set};function jt(){const d=ae.now();ae.tasks.forEach(n=>{n.c(d)||(ae.tasks.delete(n),n.f())}),ae.tasks.size!==0&&ae.tick(jt)}function Ya(d){let n;return ae.tasks.size===0&&ae.tick(jt),{promise:new Promise(p=>{ae.tasks.add(n={c:d,f:p})}),abort(){ae.tasks.delete(n)}}}function $e(d,n){Gt(()=>{d.dispatchEvent(new CustomEvent(n))})}function Za(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const n=d.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("")}function Nt(d){const n={},p=d.split(";");for(const x of p){const[U,T]=x.split(":");if(!U||T===void 0)break;const O=Za(U.trim());n[O]=T.trim()}return n}const Ja=d=>d;function Qa(d,n,p,x){var U=(d&Na)!==0,T="both",O,G=n.inert,$=n.style.overflow,l,s;function r(){return Gt(()=>O??=p()(n,x?.()??{},{direction:T}))}var j={is_global:U,in(){n.inert=G,$e(n,"introstart"),l=at(n,r(),s,1,()=>{$e(n,"introend"),l?.abort(),l=O=void 0,n.style.overflow=$})},out(b){n.inert=!0,$e(n,"outrostart"),s=at(n,r(),l,0,()=>{$e(n,"outroend"),b?.()})},stop:()=>{l?.abort(),s?.abort()}},C=Ma;if((C.nodes.t??=[]).push(j),za){var g=U;if(!g){for(var v=C.parent;v&&(v.f&Ua)!==0;)for(;(v=v.parent)&&(v.f&Oa)===0;);g=!v||(v.f&Da)!==0}g&&$a(()=>{Ca(()=>j.in())})}}function at(d,n,p,x,U){var T=x===1;if(Ga(n)){var O,G=!1;return ja(()=>{if(!G){var b=n({direction:T?"in":"out"});O=at(d,b,p,x,U)}}),{abort:()=>{G=!0,O?.abort()},deactivate:()=>O.deactivate(),reset:()=>O.reset(),t:()=>O.t()}}if(p?.deactivate(),!n?.duration)return U(),{abort:ke,deactivate:ke,reset:ke,t:()=>x};const{delay:$=0,css:l,tick:s,easing:r=Ja}=n;var j=[];if(T&&p===void 0&&(s&&s(0,1),l)){var C=Nt(l(0,1));j.push(C,C)}var g=()=>1-x,v=d.animate(j,{duration:$,fill:"forwards"});return v.onfinish=()=>{v.cancel();var b=p?.t()??1-x;p?.abort();var y=x-b,R=n.duration*Math.abs(y),P=[];if(R>0){var V=!1;if(l)for(var re=Math.ceil(R/16.666666666666668),w=0;w<=re;w+=1){var N=b+y*r(w/re),I=Nt(l(N,1-N));P.push(I),V||=I.overflow==="hidden"}V&&(d.style.overflow="hidden"),g=()=>{var B=v.currentTime;return b+y*r(B/R)},s&&Ya(()=>{if(v.playState!=="running")return!1;var B=g();return s(B,1-B),!0})}v=d.animate(P,{duration:R,fill:"forwards"}),v.onfinish=()=>{g=()=>x,s?.(x,1-x),U()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=ke)},deactivate:()=>{U=ke},reset:()=>{x===0&&s?.(1,0)},t:()=>g()}}function er(d){const n=d-1;return n*n*n+1}function tr(d,{delay:n=0,duration:p=400,easing:x=er,axis:U="y"}={}){const T=getComputedStyle(d),O=+T.opacity,G=U==="y"?"height":"width",$=parseFloat(T[G]),l=U==="y"?["top","bottom"]:["left","right"],s=l.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),r=parseFloat(T[`padding${s[0]}`]),j=parseFloat(T[`padding${s[1]}`]),C=parseFloat(T[`margin${s[0]}`]),g=parseFloat(T[`margin${s[1]}`]),v=parseFloat(T[`border${s[0]}Width`]),b=parseFloat(T[`border${s[1]}Width`]);return{delay:n,duration:p,easing:x,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*O};${G}: ${y*$}px;padding-${l[0]}: ${y*r}px;padding-${l[1]}: ${y*j}px;margin-${l[0]}: ${y*C}px;margin-${l[1]}: ${y*g}px;border-${l[0]}-width: ${y*v}px;border-${l[1]}-width: ${y*b}px;min-${G}: 0`}}var ar=_e('<div class="music-player-error fixed bottom-20 right-4 z-[60] max-w-sm onload-animation-up"><div class="bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-slide-up"><!> <span class="text-sm flex-1"> </span> <button class="text-white/80 hover:text-white transition-colors"><!></button></div></div>'),rr=_e('<div class="flex space-x-0.5"><div class="w-0.5 h-3 bg-white rounded-full animate-pulse"></div> <div class="w-0.5 h-4 bg-white rounded-full animate-pulse" style="animation-delay: 150ms;"></div> <div class="w-0.5 h-2 bg-white rounded-full animate-pulse" style="animation-delay: 300ms;"></div></div>'),ir=_e('<span class="text-sm text-[var(--content-meta)]"></span>'),lr=_e('<div role="button" tabindex="0"><div class="w-6 h-6 flex items-center justify-center"><!></div> <div class="w-10 h-10 rounded-lg overflow-hidden bg-[var(--btn-regular-bg)] flex-shrink-0"><img class="w-full h-full object-cover"/></div> <div class="flex-1 min-w-0"><div> </div> <div> </div></div></div>'),nr=_e('<div class="playlist-panel float-panel fixed bottom-20 right-4 w-80 max-h-96 overflow-hidden z-50"><div class="playlist-header flex items-center justify-between p-4 border-b border-[var(--line-divider)]"><h3 class="text-lg font-semibold text-90"> </h3> <button class="btn-plain w-8 h-8 rounded-lg"><!></button></div> <div class="playlist-content overflow-y-auto max-h-80"></div></div>'),sr=_e('<!> <div><div role="button" tabindex="0"><!></div> <div><div class="flex items-center gap-4 mb-4"><div class="cover-container relative w-16 h-16 rounded-full overflow-hidden flex-shrink-0"><img alt="封面"/></div> <div class="flex-1 min-w-0"><div class="song-title text-lg font-bold text-90 truncate mb-1"> </div> <div class="song-artist text-sm text-50 truncate"> </div> <div class="text-xs text-30 mt-1"> </div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!></button> <button><!></button></div></div> <div class="progress-section mb-4"><div class="progress-bar flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-valuemin="0" aria-valuemax="100"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100"></div></div></div> <div class="controls flex items-center justify-center gap-2 mb-4"><button><!></button> <button class="btn-plain w-10 h-10 rounded-lg"><!></button> <button><!></button> <button class="btn-plain w-10 h-10 rounded-lg"><!></button> <button><!></button></div> <div class="bottom-controls flex items-center gap-2"><button class="btn-plain w-8 h-8 rounded-lg"><!></button> <div class="flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-valuemin="0" aria-valuemax="100"><div></div></div> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!></button></div></div> <!></div>',1);function Er(d,n){qa(n,!0);let p=f(Oe(Z.mode??"meting")),x=Z.meting?.meting_api??"https://api.i-meto.com/meting/api",U=Z.meting?.server??"netease",T=Z.meting?.type??"playlist",O=Z.meting?.id??"2161912966",G=f(Oe(Z.autoplay??!1)),$=f(Oe({id:0,title:"Music",artist:"Artist",cover:"/favicon/icon-light.ico",url:"",duration:0})),l=f(Oe([])),s=f(0),r=f(void 0),j=f(void 0),C=f(void 0),g=f(!1),v=f(!1),b=f(!0),y=f(!1),R=f(0),P=f(0),V=f(.75),re=f(!1),w=f(!1),N=f(!1),I=f(0),B=f(0),rt=0,it=f(""),Te=f(!1);const E={USER_PAUSED:"player_user_paused",VOLUME:"player_volume",SHUFFLE:"player_shuffle",REPEAT:"player_repeat",LAST_SONG_ID:"player_last_song_id",LAST_SONG_PROGRESS:"player_last_song_progress"};function Ce(){if(e(l).length!==0){if(typeof localStorage<"u"){const a=localStorage.getItem(E.LAST_SONG_ID);let S=-1;if(a&&(S=e(l).findIndex(L=>L.id!==void 0&&String(L.id)===String(a))),S!==-1){t(s,S,!0);const L=localStorage.getItem(E.LAST_SONG_PROGRESS);L&&t(B,parseFloat(L),!0),Ve(e(l)[e(s)]);return}}t(s,0),Ve(e(l)[0])}}function ue(a){t(it,a,!0),t(Te,!0),setTimeout(()=>{t(Te,!1)},3e3)}async function lt(){if(!x||!O)return;t(w,!0);const a=new URLSearchParams({server:U,type:T,id:O}),S=x.includes("?")?"&":"?",L=`${x}${S}${a.toString()}`;try{const K=await fetch(L);if(!K.ok)throw new Error("meting api error");const he=await K.json();t(l,he.map((Y,Q)=>{let Ie=Y.name??Y.title??F(M.musicUnknownTrack),We=Y.artist??Y.author??F(M.musicUnknownArtist),ee=Y.duration??0;return ee>1e4&&(ee=Math.floor(ee/1e3)),(!Number.isFinite(ee)||ee<=0)&&(ee=0),{id:Y.id??`meting-${Q}`,title:Ie,artist:We,cover:Y.pic??"",url:Y.url??"",duration:ee}}),!0),e(l).length>0&&setTimeout(()=>{Ce()},0),t(w,!1)}catch{ue(F(M.musicMetingFailed)),t(w,!1)}}async function Vt(){Z.enable&&(t(p,e(p)==="meting"?"local":"meting",!0),t(y,!1),t(w,!1),t(g,!1),t(s,0),t(l,[],!0),e(r)&&(e(r).pause(),e(r).currentTime=0),t(R,0),t(P,0),e(p)==="meting"?await lt():(t(l,[...Z.local?.playlist??[]],!0),e(l).length>0?setTimeout(()=>{Ce()},0):ue(F(M.musicEmptyPlaylist))))}function Bt(){!e(r)||!e($).url||(e(g)?(e(r).pause(),typeof localStorage<"u"&&localStorage.setItem(E.USER_PAUSED,"true")):(e(r).play(),typeof localStorage<"u"&&localStorage.setItem(E.USER_PAUSED,"false")))}function Ne(){t(b,!e(b)),e(b)&&t(y,!1)}function nt(){t(y,!e(y))}function qt(){t(N,!e(N)),e(N)&&t(I,0),typeof localStorage<"u"&&(localStorage.setItem(E.SHUFFLE,String(e(N))),localStorage.setItem(E.REPEAT,String(e(I))))}function Wt(){t(I,(e(I)+1)%3),e(I)!==0&&t(N,!1),typeof localStorage<"u"&&(localStorage.setItem(E.REPEAT,String(e(I))),localStorage.setItem(E.SHUFFLE,String(e(N))))}function zt(){if(e(l).length<=1)return;const a=e(s)>0?e(s)-1:e(l).length-1;Le(a)}function Ge(){if(e(l).length<=1)return;let a;if(e(N))do a=Math.floor(Math.random()*e(l).length);while(a===e(s)&&e(l).length>1);else a=e(s)<e(l).length-1?e(s)+1:0;Le(a)}function Le(a){a<0||a>=e(l).length||(t(s,a,!0),t(v,!0),typeof localStorage<"u"&&localStorage.setItem(E.USER_PAUSED,"false"),t(B,0),Ve(e(l)[e(s)]))}function je(a){return a.startsWith("http://")||a.startsWith("https://")||a.startsWith("/")?a:`/${a}`}function Ve(a){!a||!e(r)||(t($,{...a},!0),typeof localStorage<"u"&&a.id!==void 0&&a.id!==0&&(localStorage.setItem(E.LAST_SONG_ID,String(a.id)),e(B)<=0&&localStorage.setItem(E.LAST_SONG_PROGRESS,"0")),a.url?(t(w,!0),e(B)>0?t(R,e(B),!0):(e(r).currentTime=0,t(R,0)),t(P,a.duration??0,!0),e(r).removeEventListener("canplay",st),e(r).removeEventListener("error",ut),e(r).removeEventListener("loadstart",ct),e(r).addEventListener("canplay",st,{once:!0}),e(r).addEventListener("error",ut,{once:!0}),e(r).addEventListener("loadstart",ct,{once:!0}),e(r).src=je(a.url),e(r).load()):t(w,!1))}let ye=f(!1);function st(){if(t(w,!1),e(r)?.duration&&e(r).duration>1&&(t(P,Math.floor(e(r).duration),!0),e(l)[e(s)]&&(e(l)[e(s)].duration=e(P)),e($).duration=e(P)),e(B)>0&&e(r)){const a=Math.min(e(B),e(P)>0?e(P):1/0);e(r).currentTime=a,t(R,a,!0),t(B,0)}if(e(G)||e(g)||e(v)){const a=e(r)?.play();a!==void 0&&a.then(()=>{t(G,!1),t(ye,!1),t(v,!1)}).catch(S=>{ue(F(M.musicAutoplayBlocked)),t(ye,!0),t(g,!1),t(v,!1)})}}function ot(){if(e(ye)&&e(r)&&!e(g)){const a=e(r).play();a!==void 0&&a.then(()=>{t(ye,!1)}).catch(()=>{})}}function ut(a){t(w,!1),ue(F(M.musicPlayFailed).replace("{0}",e($).title)),e(l).length>1?setTimeout(()=>Ge(),1e3):ue(F(M.musicNoSongsAvailable))}function ct(){}function Ht(){t(Te,!1)}function Xt(a){if(!e(r)||!e(j))return;const S=e(j).getBoundingClientRect(),K=(a.clientX-S.left)/S.width*e(P);e(r).currentTime=K,t(R,K)}let Pe=f(!1),Be=f(!1),qe=f(null),ce=f(null);function Kt(a){e(C)&&(t(Be,!0),t(qe,e(C).getBoundingClientRect(),!0),dt(a.clientX))}function Yt(a){e(Be)&&(t(Pe,!0),!e(ce)&&t(ce,requestAnimationFrame(()=>{dt(a.clientX),t(ce,null)}),!0))}function Zt(){t(Be,!1),t(Pe,!1),t(qe,null),e(ce)&&(cancelAnimationFrame(e(ce)),t(ce,null))}function dt(a){if(!e(r)||!e(C))return;const S=e(qe)||e(C).getBoundingClientRect(),L=Math.max(0,Math.min(1,(a-S.left)/S.width));t(V,L,!0),e(r).volume=e(V),t(re,e(V)===0),typeof localStorage<"u"&&localStorage.setItem(E.VOLUME,String(e(V)))}function ft(){e(r)&&(t(re,!e(re)),e(r).muted=e(re))}function vt(a){if(!Number.isFinite(a)||a<0)return"0:00";const S=Math.floor(a/60),L=Math.floor(a%60);return`${S}:${L.toString().padStart(2,"0")}`}function Jt(){e(r)&&(e(r).addEventListener("play",()=>{t(g,!0),t(ye,!1),t(G,!1),typeof localStorage<"u"&&localStorage.setItem(E.USER_PAUSED,"false")}),e(r).addEventListener("pause",()=>{t(g,!1)}),e(r).addEventListener("timeupdate",()=>{if(!e(r))return;t(R,e(r).currentTime,!0);const a=Date.now();a-rt>2100&&typeof localStorage<"u"&&e($).id!==0&&(localStorage.setItem(E.LAST_SONG_PROGRESS,String(e(R))),rt=a)}),e(r).addEventListener("ended",()=>{e(r)&&(typeof localStorage<"u"&&localStorage.setItem(E.LAST_SONG_PROGRESS,"0"),e(I)===1?(e(r).currentTime=0,e(r).play().catch(()=>{})):e(I)===2||e(N)||e(I)===0&&e(s)<e(l).length-1?Ge():t(g,!1))}),e(r).addEventListener("error",a=>{t(w,!1)}),e(r).addEventListener("stalled",()=>{}),e(r).addEventListener("waiting",()=>{}))}const mt=["click","keydown","touchstart"];Ra(()=>{if(typeof localStorage<"u"){localStorage.getItem(E.USER_PAUSED)==="true"&&t(G,!1);const S=localStorage.getItem(E.VOLUME);S!==null&&t(V,parseFloat(S),!0);const L=localStorage.getItem(E.SHUFFLE);L!==null&&t(N,L==="true");const K=localStorage.getItem(E.REPEAT);K!==null&&t(I,parseInt(K),!0)}t(r,new Audio,!0),e(r).volume=e(V),Jt(),mt.forEach(a=>{document.addEventListener(a,ot,{capture:!0})}),Z.enable&&(e(p)==="meting"?lt():(t(l,[...Z.local?.playlist??[]],!0),e(l).length>0?setTimeout(()=>{Ce()},0):ue(F(M.musicEmptyPlaylist))))}),Fa(()=>{typeof document<"u"&&mt.forEach(a=>{document.removeEventListener(a,ot,{capture:!0})}),e(r)&&(e(r).pause(),e(r).src="")});var pt=ge();Dt("mousemove",$t,Yt),Dt("mouseup",$t,Zt);var Qt=se(pt);{var ea=a=>{var S=sr(),L=se(S);{var K=i=>{var _=ar(),A=u(_),k=u(A);h(k,{icon:"material-symbols:error",class:"text-xl flex-shrink-0"});var D=m(k,2),c=u(D,!0);o(D);var te=m(D,2);te.__click=Ht;var ve=u(te);h(ve,{icon:"material-symbols:close",class:"text-lg"}),o(te),o(A),o(_),De(()=>oe(c,e(it))),X(i,_)};q(L,i=>{e(Te)&&i(K)})}var he=m(L,2);let Y;var Q=u(he);let Ie;Q.__click=Ne,Q.__keydown=i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),Ne())};var We=u(Q);{var ee=i=>{h(i,{icon:"eos-icons:loading",class:"text-white text-lg"})},ta=i=>{var _=ge(),A=se(_);{var k=c=>{var te=rr();X(c,te)},D=c=>{h(c,{icon:"material-symbols:music-note",class:"text-white text-lg"})};q(A,c=>{e(g)?c(k):c(D,!1)},!0)}X(i,_)};q(We,i=>{e(w)?i(ee):i(ta,!1)})}o(Q);var Ae=m(Q,2);let gt;var ze=u(Ae),He=u(ze),_t=u(He);let yt;o(He);var Xe=m(He,2),Ke=u(Xe),aa=u(Ke,!0);o(Ke);var Ye=m(Ke,2),ra=u(Ye,!0);o(Ye);var ht=m(Ye,2),ia=u(ht);o(ht),o(Xe);var bt=m(Xe,2),be=u(bt);be.__click=Vt;var la=u(be);{let i=Wa(()=>e(p)==="meting"?"material-symbols:cloud":"material-symbols:folder");h(la,{get icon(){return e(i)},class:"text-lg"})}o(be);var xe=m(be,2);let xt;xe.__click=nt;var na=u(xe);h(na,{icon:"material-symbols:queue-music",class:"text-lg"}),o(xe),o(bt),o(ze);var Ze=m(ze,2),le=u(Ze);le.__click=Xt,le.__keydown=i=>{if((i.key==="Enter"||i.key===" ")&&(i.preventDefault(),e(j)?.getBoundingClientRect())){const k=.5*e(P);e(r)&&(e(r).currentTime=k,t(R,k))}};var sa=u(le);o(le),Ct(le,i=>t(j,i),()=>e(j)),o(Ze);var Je=m(Ze,2),de=u(Je);let St;de.__click=qt;var oa=u(de);h(oa,{icon:"material-symbols:shuffle",class:"text-lg"}),o(de);var Se=m(de,2);Se.__click=zt;var ua=u(Se);h(ua,{icon:"material-symbols:skip-previous",class:"text-xl"}),o(Se);var fe=m(Se,2);let wt;fe.__click=Bt;var ca=u(fe);{var da=i=>{h(i,{icon:"eos-icons:loading",class:"text-xl"})},fa=i=>{var _=ge(),A=se(_);{var k=c=>{h(c,{icon:"material-symbols:pause",class:"text-xl"})},D=c=>{h(c,{icon:"material-symbols:play-arrow",class:"text-xl"})};q(A,c=>{e(g)?c(k):c(D,!1)},!0)}X(i,_)};q(ca,i=>{e(w)?i(da):i(fa,!1)})}o(fe);var we=m(fe,2);we.__click=Ge;var va=u(we);h(va,{icon:"material-symbols:skip-next",class:"text-xl"}),o(we);var Re=m(we,2);let Et;Re.__click=Wt;var ma=u(Re);{var pa=i=>{h(i,{icon:"material-symbols:repeat-one",class:"text-lg"})},ga=i=>{var _=ge(),A=se(_);{var k=c=>{h(c,{icon:"material-symbols:repeat",class:"text-lg"})},D=c=>{h(c,{icon:"material-symbols:repeat",class:"text-lg opacity-50"})};q(A,c=>{e(I)===2?c(k):c(D,!1)},!0)}X(i,_)};q(ma,i=>{e(I)===1?i(pa):i(ga,!1)})}o(Re),o(Je);var kt=m(Je,2),Fe=u(kt);Fe.__click=ft;var _a=u(Fe);{var ya=i=>{h(i,{icon:"material-symbols:volume-off",class:"text-lg"})},ha=i=>{var _=ge(),A=se(_);{var k=c=>{h(c,{icon:"material-symbols:volume-down",class:"text-lg"})},D=c=>{h(c,{icon:"material-symbols:volume-up",class:"text-lg"})};q(A,c=>{e(V)<.5?c(k):c(D,!1)},!0)}X(i,_)};q(_a,i=>{e(re)||e(V)===0?i(ya):i(ha,!1)})}o(Fe);var ie=m(Fe,2);ie.__mousedown=Kt,ie.__keydown=i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),i.key==="Enter"&&ft())};var Tt=u(ie);let Lt;o(ie),Ct(ie,i=>t(C,i),()=>e(C));var Me=m(ie,2);Me.__click=Ne;var ba=u(Me);h(ba,{icon:"material-symbols:expand-more",class:"text-lg"}),o(Me),o(kt),o(Ae);var xa=m(Ae,2);{var Sa=i=>{var _=nr(),A=u(_),k=u(A),D=u(k,!0);o(k);var c=m(k,2);c.__click=nt;var te=u(c);h(te,{icon:"material-symbols:close",class:"text-lg"}),o(c),o(A);var ve=m(A,2);Ha(ve,21,()=>e(l),Xa,(Ee,me,J)=>{var ne=lr();let Pt;ne.__click=()=>Le(J),ne.__keydown=W=>{(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),Le(J))};var Qe=u(ne),wa=u(Qe);{var Ea=W=>{h(W,{icon:"material-symbols:graphic-eq",class:"text-[var(--primary)] animate-pulse"})},ka=W=>{var Mt=ge(),Pa=se(Mt);{var Ia=pe=>{h(pe,{icon:"material-symbols:pause",class:"text-[var(--primary)]"})},Aa=pe=>{var Ut=ir();Ut.textContent=J+1,X(pe,Ut)};q(Pa,pe=>{J===e(s)?pe(Ia):pe(Aa,!1)},!0)}X(W,Mt)};q(wa,W=>{J===e(s)&&e(g)?W(Ea):W(ka,!1)})}o(Qe);var et=m(Qe,2),It=u(et);o(et);var At=m(et,2),Ue=u(At);let Rt;var Ta=u(Ue,!0);o(Ue);var tt=m(Ue,2);let Ft;var La=u(tt,!0);o(tt),o(At),o(ne),De(W=>{Pt=z(ne,1,"playlist-item flex items-center gap-3 p-3 hover:bg-[var(--btn-plain-bg-hover)] cursor-pointer transition-colors",null,Pt,{"bg-[var(--btn-plain-bg)]":J===e(s),"text-[var(--primary)]":J===e(s)}),H(ne,"aria-label",`播放 ${e(me).title??""} - ${e(me).artist??""}`),H(It,"src",W),H(It,"alt",e(me).title),Rt=z(Ue,1,"font-medium truncate",null,Rt,{"text-[var(--primary)]":J===e(s),"text-90":J!==e(s)}),oe(Ta,e(me).title),Ft=z(tt,1,"text-sm text-[var(--content-meta)] truncate",null,Ft,{"text-[var(--primary)]":J===e(s)}),oe(La,e(me).artist)},[()=>je(e(me).cover)]),X(Ee,ne)}),o(ve),o(_),De(Ee=>oe(D,Ee),[()=>F(M.playlist)]),Qa(3,_,()=>tr,()=>({duration:300,axis:"y"})),X(i,_)};q(xa,i=>{e(y)&&i(Sa)})}o(he),De((i,_,A,k,D,c,te,ve,Ee)=>{Y=z(he,1,"music-player fixed bottom-4 right-4 z-[101] transition-all duration-300 ease-in-out onload-animation-up",null,Y,{expanded:!e(b),collapsed:e(b)}),Ie=z(Q,1,"orb-player w-12 h-12 bg-[var(--primary)] rounded-full shadow-lg cursor-pointer transition-all duration-500 ease-in-out flex items-center justify-center hover:scale-110 active:scale-95",null,Ie,{"opacity-0":!e(b),"scale-0":!e(b),"pointer-events-none":!e(b)}),H(Q,"aria-label",i),gt=z(Ae,1,"expanded-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-4 transition-all duration-500 ease-in-out",null,gt,{"opacity-0":e(b),"scale-95":e(b),"pointer-events-none":e(b)}),H(_t,"src",_),yt=z(_t,1,"w-full h-full object-cover transition-transform duration-300",null,yt,{spinning:e(g)&&!e(w),"animate-pulse":e(w)}),oe(aa,e($).title),oe(ra,e($).artist),oe(ia,`${A??""} / ${k??""}`),H(be,"title",D),xt=z(xe,1,"btn-plain w-8 h-8 rounded-lg flex items-center justify-center",null,xt,{"text-[var(--primary)]":e(y)}),H(xe,"title",c),H(le,"aria-label",te),H(le,"aria-valuenow",e(P)>0?e(R)/e(P)*100:0),Ot(sa,`width: ${e(P)>0?e(R)/e(P)*100:0}%`),St=z(de,1,"w-10 h-10 rounded-lg",null,St,{"btn-regular":e(N),"btn-plain":!e(N)}),de.disabled=e(l).length<=1,Se.disabled=e(l).length<=1,wt=z(fe,1,"btn-regular w-12 h-12 rounded-full",null,wt,{"opacity-50":e(w)}),fe.disabled=e(w),we.disabled=e(l).length<=1,Et=z(Re,1,"w-10 h-10 rounded-lg",null,Et,{"btn-regular":e(I)>0,"btn-plain":e(I)===0}),H(ie,"aria-label",ve),H(ie,"aria-valuenow",e(V)*100),Lt=z(Tt,1,"h-full bg-[var(--primary)] rounded-full transition-all",null,Lt,{"duration-100":!e(Pe),"duration-0":e(Pe)}),Ot(Tt,`width: ${e(V)*100}%`),H(Me,"title",Ee)},[()=>F(M.musicExpand),()=>je(e($).cover),()=>vt(e(R)),()=>vt(e(P)),()=>e(p)==="meting"?F(M.musicSwitchToLocal):F(M.musicSwitchToMeting),()=>F(M.playlist),()=>F(M.musicProgress),()=>F(M.musicVolume),()=>F(M.musicCollapse)]),X(a,S)};q(Qt,a=>{Z.enable&&a(ea)})}X(d,pt),Ba()}Va(["click","keydown","mousedown"]);export{Er as default};
