if(typeof translate=="object"&&typeof translate.version=="string")throw new Error("translate.js 已经加载过一次了，当前是重复加载，避免你的翻译出现异常，已帮你拦截此次加载。本信息只是给你一个提示，你可以检查一下你的项目中是否出现了重复引入 translate.js ，当然，这个异常并不会影响到你的具体使用，它已经自动帮你处理拦截了这个异常，只不过提示出来是让你知道，你的代码里出现了重复引入的情况。");var translate={version:"3.18.107.20260106",config:{data:class{documents=[];language={select:{show:!0,languages:""},local:"",defaultTo:"",autoDiscriminateLocalLanguage:!1,range:[],urlParamControl:{use:!1,name:"language"},translateLocal:!1};images=[];nomenclature=[];listener={use:!1};ignore={text:[],textRegex:[],id:[],class:{data:[],conditionFunction:{}},tag:[]};service="translate.service";whole={enableAll:!1,class:[],tag:[],id:[]};selectionTranslate={use:!1};request={api:{host:[],language:"language.json",translate:"translate.json",ip:"ip.json",connectTest:"connectTest.json",init:"init.json"},listener:{use:!1,delayExecuteTime:200,minIntervalTime:800},appendParams:{},appendHeaders:{},waitingExecute:!0};element={tagAttribute:{}};progress={api:{use:!1},style:""};network={rules:[],use:!1};visual={webPageLoadTranslateBeforeHiddenText:{use:!1}}},get:function(){var t=new translate.config.data;return t.documents=translate.documents,t.language.select.show=translate.selectLanguageTag.show,t.language.select.languages=translate.selectLanguageTag.languages,t.language.local=translate.language.local,t.language.defaultTo=translate.language.defaultTo,t.language.autoDiscriminateLocalLanguage=translate.autoDiscriminateLocalLanguage,t.language.range=translate.language.translateLanguagesRange,t.language.urlParamControl.use=translate.language.setUrlParamControl_use,t.language.urlParamControl.name=translate.language.setUrlParamControl_name,t.language.translateLocal=translate.language.translateLocal,t.images=translate.images.queues,t.nomenclature=translate.images.queues,t.listener.use=translate.listener.use,t.ignore.text=translate.ignore.text,t.ignore.textRegex=translate.ignore.textRegex,t.ignore.id=translate.ignore.id,t.ignore.class.data=translate.ignore.class.data,t.ignore.class.conditionFunction=translate.ignore.class.conditionFunction,t.ignore.tag=translate.ignore.tag,t.service=translate.service.name,t.whole.enableAll=translate.whole.isEnableAll,t.whole.class=translate.whole.class,t.whole.tag=translate.whole.tag,t.whole.id=translate.whole.id,t.selectionTranslate.use=translate.selectionTranslate.use,t.request.api.host=translate.request.api.host,t.request.api.language=translate.request.api.language,t.request.api.translate=translate.request.api.translate,t.request.api.ip=translate.request.api.ip,t.request.api.connectTest=translate.request.api.connectTest,t.request.api.init=translate.request.api.init,t.request.listener.use=translate.request.listener.use,t.request.listener.delayExecuteTime=translate.request.listener.delayExecuteTime,t.request.listener.minIntervalTime=translate.request.listener.minIntervalTime,t.request.appendParams=translate.request.appendParams,t.request.appendHeaders=translate.request.appendHeaders,t.request.waitingExecute=translate.waitingExecute.use,t.element.tagAttribute=translate.element.tagAttribute,t.progress.api.use=translate.progress.api.use,t.progress.style=translate.progress.style,t.network.rules=translate.network.rules,t.network.use=translate.network.isUse,t.visual.webPageLoadTranslateBeforeHiddenText.use=translate.visual.webPageLoadTranslateBeforeHiddenText_use,t},set:function(t){typeof t.documents=="object"&&translate.setDocuments(t.documents),typeof t.language.select.show=="boolean"&&(translate.selectLanguageTag.show=t.language.select.show),typeof t.language.select.languages=="string"&&t.language.select.languages.trim().length>0&&(translate.selectLanguageTag.languages=t.language.select.languages),typeof t.language.local=="string"&&t.language.local.trim().length>0&&translate.language.setLocal(t.language.local),typeof t.language.defaultTo=="string"&&t.language.defaultTo.trim().length>0&&translate.language.setDefaultTo(t.language.defaultTo),typeof t.language.autoDiscriminateLocalLanguage=="boolean"&&t.language.autoDiscriminateLocalLanguage===!0&&translate.setAutoDiscriminateLocalLanguage(),typeof t.language.range=="object"&&t.language.range.length>0&&(translate.language.translateLanguagesRange=t.language.range),typeof t.language.urlParamControl.use=="boolean"&&(translate.language.setUrlParamControl_use=t.language.urlParamControl.use),typeof t.language.urlParamControl.name=="string"&&t.language.urlParamControl.name.trim().toLowerCase()!=="language"&&translate.language.setUrlParamControl(t.language.urlParamControl.name),typeof t.language.translateLocal=="boolean"&&(translate.language.translateLocal=t.language.translateLocal),typeof t.images=="object"&&(translate.images.queues=t.images),typeof t.nomenclature=="object"&&(translate.nomenclature.data=t.nomenclature),typeof t.listener.use=="boolean"&&(translate.listener.use=t.listener.use),typeof t.ignore.text=="object"&&(translate.ignore.text=t.ignore.text),typeof t.ignore.textRegex=="object"&&(translate.ignore.textRegex=t.ignore.textRegex),typeof t.ignore.id=="object"&&(translate.ignore.id=t.ignore.id),typeof t.ignore.class=="object"&&(translate.ignore.class=t.ignore.class),typeof t.ignore.tag=="object"&&(translate.ignore.tag=t.ignore.tag),typeof t.service=="string"&&t.service.trim().length>0&&(translate.service.name=t.service),typeof t.whole.enableAll=="boolean"&&(translate.listener.use=t.whole.enableAll),typeof t.whole.class=="object"&&(translate.whole.class=t.whole.class),typeof t.whole.tag=="object"&&(translate.whole.tag=t.whole.tag),typeof t.whole.id=="object"&&(translate.whole.id=t.whole.id),typeof t.selectionTranslate.use=="boolean"&&t.selectionTranslate.use===!0&&translate.selectionTranslate.use===!1&&translate.selectionTranslate.start(),typeof t.request.api.host=="object"&&(translate.request.api.host=t.request.api.host),typeof t.request.api.language=="string"&&(translate.request.api.language=t.request.api.language),typeof t.request.api.ip=="string"&&(translate.request.api.ip=t.request.api.ip),typeof t.request.api.connectTest=="string"&&(translate.request.api.connectTest=t.request.api.connectTest),typeof t.request.api.init=="string"&&(translate.request.api.init=t.request.api.init),typeof t.request.listener.use=="boolean"&&(translate.request.listener.use=t.request.listener.use),typeof t.request.listener.delayExecuteTime=="number"&&(translate.request.listener.delayExecuteTime=t.request.listener.delayExecuteTime),typeof t.request.listener.minIntervalTime=="number"&&(translate.request.listener.minIntervalTime=t.request.listener.minIntervalTime),typeof t.request.appendParams=="object"&&(translate.request.appendParams=t.request.appendParams),typeof t.request.appendHeaders=="object"&&(translate.request.appendHeaders=t.request.appendHeaders),typeof t.request.waitingExecute=="boolean"&&(translate.waitingExecute.use=t.request.waitingExecute),typeof t.element.tagAttribute=="object"&&(translate.element.tagAttribute=t.element.tagAttribute),typeof t.progress.api.use=="boolean"&&t.progress.api.use===!0&&translate.progress.api.use===!1&&translate.progress.api.startUITip(),typeof t.progress.style=="string"&&(translate.progress.style=t.progress.style),typeof t.network.rules=="object"&&(translate.network.rules=t.network.rules),typeof t.network.use=="boolean"&&t.network.use===!0&&translate.network.isUse===!1&&translate.network.use(),typeof t.visual.webPageLoadTranslateBeforeHiddenText.use=="boolean"&&t.visual.webPageLoadTranslateBeforeHiddenText.use===!0&&translate.visual.webPageLoadTranslateBeforeHiddenText_use===!1&&translate.visual.webPageLoadTranslateBeforeHiddenText()}},useVersion:"v2",setUseVersion2:function(){translate.useVersion="v2",translate.log("提示：自 v2.10 之后的版本默认就是使用V2版本（当前版本为:"+translate.version+"）， translate.setUseVersion2() 可以不用再加这一行了。当然加了也无所谓，只是加了跟不加是完全一样的。")},translate:null,includedLanguages:"zh-CN,zh-TW,en",resourcesUrl:"//res.zvo.cn/translate",log:function(t){console.log(t)},selectLanguageTag:{documentId:"translate",show:!0,languages:"",alreadyRender:!1,changeLanguageBeforeLoadOfflineFile:function(t){},selectOnChange:function(t){var a=t.target.value;translate.changeLanguage(a)},refreshRender:function(){let t=document.getElementById(translate.selectLanguageTag.documentId+"SelectLanguage");t&&t.parentNode.removeChild(t),translate.selectLanguageTag.alreadyRender=!1,translate.selectLanguageTag.render()},customLanguagesHandle:function(t){if(translate.selectLanguageTag.languages.length>0){var a=translate.selectLanguageTag.languages.toLowerCase(),n=a.split(",");if(typeof translate.selectLanguageTag.supportLanguageMap>"u"){translate.selectLanguageTag.supportLanguageMap=new Map;for(var r=0;r<t.length;r++)typeof t[r]<"u"&&typeof t[r].id&&translate.selectLanguageTag.supportLanguageMap.set(t[r].id,t[r])}for(var l=[],s=0;s<n.length;s++)n[s].length>0&&translate.selectLanguageTag.supportLanguageMap.get(n[s])!=null&&l.push(translate.selectLanguageTag.supportLanguageMap.get(n[s]));return l}return t},customUI:function(t){var a=function(i){translate.selectLanguageTag.selectOnChange(i)},n=document.createElement("select");n.id=translate.selectLanguageTag.documentId+"SelectLanguage",n.className=translate.selectLanguageTag.documentId+"SelectLanguage";for(var r=translate.language.getCurrent(),l=0;l<t.length;l++){var s=document.createElement("option");s.setAttribute("value",t[l].id),r!=null&&typeof r<"u"&&r.length>0?r==t[l].id&&s.setAttribute("selected","selected"):t[l].id==translate.language.getLocal()&&s.setAttribute("selected","selected"),s.appendChild(document.createTextNode(t[l].name)),n.appendChild(s)}window.addEventListener?n.addEventListener("change",a,!1):n.attachEvent("onchange",a),document.getElementById(translate.selectLanguageTag.documentId).appendChild(n)},render:function(){if(!translate.selectLanguageTag.alreadyRender&&(translate.selectLanguageTag.alreadyRender=!0,!!translate.selectLanguageTag.show)){if(document.getElementById(translate.selectLanguageTag.documentId)==null){var t=document.getElementsByTagName("body");if(t.length==0){translate.log("body tag not find, translate.selectLanguageTag.render() is not show Select Language");return}var a=t[0],n=document.createElement("div");n.id=translate.selectLanguageTag.documentId,a.appendChild(n)}else if(document.getElementById(translate.selectLanguageTag.documentId+"SelectLanguage")!=null)return;typeof translate.request.api.language=="string"&&translate.request.api.language.length>0?translate.request.post(translate.request.api.language,{},function(r,l){if(r.result==0){translate.log("load language list error : "+r.info);return}translate.request.api.language=r.list,translate.selectLanguageTag.customUI(translate.selectLanguageTag.customLanguagesHandle(r.list))},null):typeof translate.request.api.language=="object"&&translate.selectLanguageTag.customUI(translate.selectLanguageTag.customLanguagesHandle(translate.request.api.language))}}},localLanguage:"zh-CN",googleTranslateElementInit:function(){var t="";document.getElementById("translate")!=null&&(t="translate"),translate.translate=new google.translate.TranslateElement({pageLanguage:"zh-CN",includedLanguages:translate.selectLanguageTag.languages,layout:0},t)},execute_v1:function(){translate.log("=====ERROR======"),translate.log("The v1 version has been discontinued since 2022. Please use the latest V3 version and refer to: http://translate.zvo.cn/41162.html")},setCookie:function(t,a){var n=t+"="+escape(a);document.cookie=n},getCookie:function(t){for(var a=document.cookie,n=a.split("; "),r=0;r<n.length;r++){var l=n[r].split("=");if(l[0]==t)return unescape(l[1])}return""},currentLanguage:function(){var t=translate.getCookie("googtrans");return t.length>0?t.substr(t.lastIndexOf("/")+1,t.length-1):translate.localLanguage},changeLanguage:function(t){translate.time.log("触发");var a=",en,de,hi,lt,hr,lv,ht,hu,zh-CN,hy,uk,mg,id,ur,mk,ml,mn,af,mr,uz,ms,el,mt,is,it,my,es,et,eu,ar,pt-PT,ja,ne,az,fa,ro,nl,en-GB,no,be,fi,ru,bg,fr,bs,sd,se,si,sk,sl,ga,sn,so,gd,ca,sq,sr,kk,st,km,kn,sv,ko,sw,gl,zh-TW,pt-BR,co,ta,gu,ky,cs,pa,te,tg,th,la,cy,pl,da,tr,";if(a.indexOf(","+t+",")>-1){translate.log("您使用的是v1版本的切换语种方式，v1已在2021年就以废弃，请更换为v2，参考文档： http://translate.zvo.cn/41549.html"),translate.check();var n="/"+translate.localLanguage+"/"+t,r=document.location.host.split(".");if(r.length>2){var l=r[r.length-2]+"."+r[r.length-1];document.cookie="googtrans=;expires="+new Date(1)+";domain="+l+";path=/",document.cookie="googtrans="+n+";domain="+l+";path=/"}translate.setCookie("googtrans",""+n),translate.refreshCurrentPage();return}translate.lifecycle.changeLanguage.trigger_Trigger({to:t}),translate.useVersion="v2";var s=!1;translate.node.data==null&&(translate.node.data=new Map),translate.node.data.size>0&&(s=!0),translate.to=t,translate.storage.set("to",t),translate.visual.webPageLoadTranslateBeforeHiddenText_use&&(typeof translate.visual.hideText.first_translate_request_uuid<"u"&&(translate.visual.hideText.first_translate_request_uuid=void 0),translate.visual.webPageLoadTranslateBeforeHiddenText({inHeadTip:!1})),translate.reset({selectLanguageRefreshRender:!1});try{window.self!==window.top&&typeof window.parent.translate=="object"&&typeof window.parent.translate.version=="string"&&window.parent.translate.to!==t&&window.parent.translate.changeLanguage(t)}catch(i){translate.log(i)}if(translate.time.log("父级 iframe 触发changeLanguage完成"),translate.to=t,translate.storage.set("to",t),translate.lifecycle.changeLanguage.resetAfter_Trigger({to:t}),translate.selectLanguageTag.refreshRender(),s=!1,s)location.reload();else{translate.execute();const i=document.querySelectorAll("iframe");for(let o=0;o<i.length;o++){const u=i[o],f=u.contentWindow;try{typeof f.translate=="object"&&typeof f.translate.version=="string"&&f.translate.to!=t&&(f.translate.to=t,f.translate.storage.set("to",t),f.translate.changeLanguage(t))}catch(g){typeof u.src=="string"&&translate.log("change sub page iframe exception , iframe src : "+u.src),translate.log(g)}}}},check:function(){window.location.protocol=="file:"&&translate.log(`\r
---WARNING----\r
translate.js 主动翻译组件自检异常，当前协议是file协议，翻译组件要在正常的线上http、https协议下才能正常使用翻译功能\r
------------`)},to:"",autoDiscriminateLocalLanguage:!1,documents:[],ignore:{tag:["style","script","link","pre","code"],class:{data:["ignore","translateSelectLanguage"],conditionFunction:{ignore:function(t){return!0}},push:function(t,a){if(translate.ignore.class.data.indexOf(t)>-1){translate.log("translate.ignore.class.push 设置异常，所设置的 className: "+t+" 已存在里面了，所以此次设置被放弃");return}if(translate.ignore.class.data.push(t),a!==null){if(typeof a!="function"){translate.log("translate.ignore.class.push 设置异常，所设置的第二个参数类型不是function，被抛弃");return}translate.ignore.class.conditionFunction[t]=a}}},id:[],isIgnore:function(t){if(t==null||typeof t>"u")return!1;t.nodeType===2?t=t.ownerElement:t.nodeType===3&&(t=t.parentNode);for(var a=t,n=100;n-- >0;){if(a==null||typeof a>"u")return!1;var r=translate.element.getNodeName(a).toLowerCase();if(r.length>0){if(r=="body"||r=="html"||r=="#document")return!1;if(translate.ignore.tag.indexOf(r)>-1)return!0}if(a.className!==null&&typeof a.className=="string"){var l=a.className;if(l==null||typeof l!="string")continue;l=l.trim().split(" ");for(var s=0;s<l.length;s++)if(l[s]!=null&&l[s].trim().length>0&&translate.ignore.class.data.indexOf(l[s])>-1)return typeof translate.ignore.class.conditionFunction[l[s]]=="function"?translate.ignore.class.conditionFunction[l[s]](t):!0}if(a.id!=null&&typeof a.id<"u"&&translate.ignore.id.indexOf(a.id)>-1)return!0;a=a.parentNode}return!1},text:[],textRegex:[],setTextRegexs:function(t){if(!Array.isArray(t))throw new Error("参数必须为数组");for(let a=0;a<t.length;a++)if(!(t[a]instanceof RegExp))throw new Error("第"+a+"项不是RegExp对象");this.textRegex=this.textRegex.concat(t)}},refreshCurrentPage:function(){location.reload()},isTranslate:function(t){return typeof t>"u"&&(t=translate.to),t.length===0?!1:t===translate.language.getLocal()?!!translate.language.translateLocal:!0},nomenclature:{data:new Array,old_Data:[],set:function(t){alert("请将 translate.nomenclature.set 更换为 append，具体使用可参考： https://github.com/xnx3/translate ")},append:function(t,a,n){(typeof t>"u"||t==null||t=="auto")&&(document.body==null?translate.log("使用错误！你使用自定义术语 translate.nomenclature.append 时，from 未传值，此时 translate.js 会自动识别当前翻译区域的内容是什么语种，但是你当前吧 translate.nomenclature.append 放在了body之前就加载了，body都还没加载出来，翻译区域当前无内容，所以无法识别当前页面的语种。请将 translate.nomenclature.append 放在翻译内容加载完后再执行 （注意，要将 translate.nomenclature.append 放在 translate.execute() 的前面），建议将 translate.nomenclature.append 放在 </body> 跟 </html> 之间。"):document.readyState==="loading"&&translate.log("使用异常告警：你使用的自定义术语 translate.nomenclature.append 时，from 未传值，此时 translate.js 会自动识别当前翻译区域的内容是什么语种，但页面Dom还未加载完毕时就触发了它，如果翻译区域当前无内容或者内容不是完整的，会造成识别当前页面的语种会有异常不准确，你需要仔细确认这个问题。建议将 translate.nomenclature.append 放在 </body> 跟 </html> 之间。"),t=translate.language.getLocal()),typeof translate.nomenclature.data[t]>"u"&&(translate.nomenclature.data[t]=new Array),typeof translate.nomenclature.data[t][a]>"u"&&(translate.nomenclature.data[t][a]=new Array);for(var r=n.split(`
`),l=0;l<r.length;l++){var s=r[l].trim();if(!(s.length<1)){var i=s.split("=");if(i.length==2){var o=i[0].trim(),u=i[1].trim();o.length==0||u.length==0||(translate.nomenclature.data[t][a][o]=u)}}}translate.nomenclature.data[t][a]=translate.util.objSort(translate.nomenclature.data[t][a])},get:function(){return translate.nomenclature.data},replace:function(t,a,n,r){if(a.length==0)return{texts:[t],find:!1,resultText:t};var l=t.indexOf(a);if(l>-1){for(var s=[],i=l;i!==-1;)s.push(i),i=t.indexOf(a,i+1);for(var o=new Array,u=t,f=t.length,g=s.length-1;g>=0;g--){var h=s[g];o.unshift(t.substring(h+a.length,f)),u=u.substring(0,h)+n+u.substring(h+a.length),f=h}if(f>0&&o.unshift(t.substring(0,f)),o.length>0)for(var d=o.length-1;d>=0;d--)o[d].length==0&&o.splice(d,1);return r!=null&&typeof r.node<"u"&&r.node!==null&&(translate.node.get(r.node)!=null&&(translate.node.get(r.node).lastTranslateRenderTime=Date.now()),translate.element.nodeAnalyse.set(r.node,a,n,r.attribute)),{texts:o,find:!0,resultText:u}}else return{texts:[t],find:!1,resultText:t}},dispose:function(t,a,n,r){Array.isArray(t)||(t=[String(t)]);var l={find:!1};l.texts=new Array,l.resultText=new Array;for(var s=0;s<t.length;s++){var i=t[s],o=translate.nomenclature.replace(i,a,n,r);o.find&&(l.find=!0),l.texts=l.texts.concat(o.texts),l.resultText.push(o.resultText)}if(l.texts.length>0)for(var u=l.texts.length-1;u>=0;u--)l.texts.indexOf(l.texts[u])!=u&&l.texts.splice(u,1);return l}},office:{export:function(){console.log("请使用最新版本的 translate.offline.export , 而不是 translate.office.export")},showPanel:function(){console.log("请使用最新版本的 translate.offline.showPanel , 而不是 translate.office.export")},append:function(t,a){translate.offline.append(t,a)},fullExtract:{isUse:!1}},offline:{export:function(){if(translate.language.getLocal()==translate.language.getCurrent()){alert("本地语种跟要翻译的语种一致，无需导出");return}var t="";for(var a in translate.nodeQueue)if(translate.nodeQueue.hasOwnProperty(a)){translate.nodeQueue[a];for(var n in translate.nodeQueue[a].list)if(translate.nodeQueue[a].list.hasOwnProperty(n)&&!(typeof n!="string"||n.length<1)){for(var r in translate.nodeQueue[a].list[n])if(translate.nodeQueue[a].list[n].hasOwnProperty(r)){var l=translate.storage.get("hash_"+translate.language.getCurrent()+"_"+r);if(!(typeof l>"u"||l===null||l.length===0)){var s=translate.nodeQueue[a].list[n][r].original+"="+l;t=t+`
`+s.replace(/\n/g,"{\\\\n}")}}}}t.length>0?(t="translate.offline.append('"+translate.language.getCurrent()+"',`"+t+"\n`);",translate.util.loadMsgJs(),msg.popups({text:'<textarea id="msgPopupsTextarea" style="width:100%; height:100%; color: black; padding: 8px;">loaing...</textarea>',width:"750px",height:"600px",padding:"1px"}),document.getElementById("msgPopupsTextarea").value=t):msg.alert("无有效内容！")},showPanel:function(){translate.recycle=function(){};let t=document.createElement("div");t.setAttribute("id","translate_export"),t.setAttribute("class","ignore");let a=document.createElement("button");a.onclick=function(){translate.offline.export()},a.innerHTML="导出配置信息",a.setAttribute("style","margin-left: 72px; margin-top: 30px; margin-bottom: 20px; font-size: 25px; background-color: blue; padding: 15px; padding-top: 3px; padding-bottom: 3px; border-radius: 3px;"),t.appendChild(a);let n=document.createElement("div");n.innerHTML='1. 首先将当前语种切换为你要翻译的语种<br/>2. 点击导出按钮，将翻译的配置信息导出<br/>3. 将导出的配置信息粘贴到代码中，即可完成<br/><a href="http://translate.zvo.cn/4076.html" target="_black" style="color: aliceblue; text-decoration: underline;">点此进行查阅详细使用说明</a>',n.setAttribute("style","font-size: 14px; padding: 12px;"),t.appendChild(n),t.setAttribute("style","background-color: black; color: #fff; width: 320px; height: 206px; position: fixed; bottom: 50px; right: 50px;"),document.body.appendChild(t),translate.util.loadMsgJs()},append:function(t,a){for(var n=a.split(`
`),r=new Map,l=0;l<n.length&&l<10;l++){const c=n[l].match(/^[ \t]+/);var s=c?c[0]:"0",i=1;typeof r.get(s)<"u"&&(i=i+r.get(s)),r.set(s,i)}let o=0,u=null;for(const[c,p]of r.entries())p>o&&(o=p,u=c);r=null;for(var l=0;l<n.length;l++){var f=n[l];if(u!=="0")if(n[l].startsWith(u))var f=n[l].slice(u.length);else n[l].trim().length>0&&translate.log(`WAINING : translate.offline.append 异常，发现某行的配置项缩进异常，这行的缩进应该跟其他行的缩进保持一致！异常的这行配置项为：
`+f);if(!(f.length<1)){f=f.replace(/\{\\n\}/g,`
`);var g=f.split("=");if(g.length==2){var h=g[0],d=g[1];h.length==0||d.length==0||translate.storage.set("hash_"+t+"_"+translate.util.hash(h),d)}}}},fullExtract:{set:async function(t,a,n,r){if(typeof translate.storage.IndexedDB>"u"){translate.log("ERROR: translate.storage.IndexedDB not find");return}var l=await translate.storage.IndexedDB.get("hash_"+t);typeof l>"u"&&l==null&&(l={originalText:a}),l[n]=r,await translate.storage.IndexedDB.set("hash_"+t,l)},export:async function(t){if(typeof translate.storage.IndexedDB>"u"){translate.log("ERROR: translate.storage.IndexedDB not find");return}if(typeof t!="string"){translate.log('error : to param not find, example: "english"');return}var a="translate.offline.append('"+t+"',`",n=await translate.storage.IndexedDB.list("hash_*");for(var r in n)if(n.hasOwnProperty(r)&&!(typeof n[r].value>"u"||typeof n[r].value[t]>"u"||n[r].value[t]===null||n[r].value[t].trim().length===0)){var l=n[r].value.originalText+"="+n[r].value[t];a=a+`
`+l.replace(/\n/g,"{\\\\n}")}a=a+"\n`);";const s=new Blob([a],{type:"text/plain"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=t+".txt",o.click(),URL.revokeObjectURL(i)},isUse:!1}},setAutoDiscriminateLocalLanguage:function(){translate.autoDiscriminateLocalLanguage=!0},nodeQueue:{},setDocuments:function(t){if(!(t==null||typeof t>"u")){if(typeof t.length>"u")translate.documents[0]=t;else{for(var a=0;a<t.length;a++)(typeof t[a]>"u"||t[a]===null)&&t.splice(a,1);t.length>0&&(translate.documents=t)}translate.nodeQueue={}}},getDocuments:function(){if(translate.documents!=null&&typeof translate.documents<"u"&&translate.documents.length>0)return translate.documents;var t=new Array;return t[0]=document.documentElement,t},listener:{isStart:!1,use:!1,input:{originalValueDescriptor:null,start:function(){if(translate.listener.input.originalValueDescriptor!==null){console.log("已启动过了，无需在启动");return}translate.listener.input.originalValueDescriptor=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),Object.defineProperty(HTMLInputElement.prototype,"value",{...translate.listener.input.originalValueDescriptor,set(t){const a=this.value;if(translate.listener.input.originalValueDescriptor.set.call(this,t),t!==a){if(translate.node.find(this)){var n=translate.node.get(this);typeof n.lastTranslateRenderTime=="number"&&Date.now()-n.lastTranslateRenderTime<100||translate.node.delete(this)}translate.execute([this])}}})},reset:function(){translate.listener.input.originalValueDescriptor!==null&&(Object.defineProperty(HTMLInputElement.prototype,"value",translate.listener.input.originalValueDescriptor),translate.listener.input.originalValueDescriptor=null)}},start:function(){typeof translate.temp_listenerStartInterval<"u"||(translate.listener.use=!0)},reset:function(){typeof translate.listener.observer<"u"&&translate.listener.observer!=null&&translate.listener.observer.disconnect(),translate.listener.isStart&&(translate.listener.isStart=!1),translate.listener.input.reset()},nodeValueChangeNeedTranslate:function(t){if(typeof t>"u"||t===null)return!1;var a=!0;return translate.node.get(t)!=null&&(typeof translate.node.get(t).translateResults<"u"&&typeof translate.node.get(t).translateResults[t.nodeValue]=="number"&&(a=!1),a===!0&&(typeof translate.node.get(t).whole<"u"&&translate.node.get(t).whole===!0?typeof translate.node.get(t).resultText<"u"&&translate.node.get(t).resultText===t.nodeValue&&(a=!1):typeof translate.node.get(t).lastTranslateRenderTime=="number"&&translate.node.get(t).lastTranslateRenderTime+30>Date.now()&&(a=!1))),a===!0&&t.nodeValue.trim().length===0&&(a=!1),a},addListener:function(){if(translate.listener.isStart!=!0){translate.listener.isStart=!0,translate.listener.config={attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},translate.listener.callback=function(r,l){var s=[];for(let m of r){let v=[];if(m.type==="childList"){if(m.addedNodes.length>0)for(var i=0;i<m.addedNodes.length;i++){var o=translate.element.getNodeName(m.addedNodes[i]).toLowerCase();o==="iframe"&&typeof translate.element.iframe<"u"&&translate.element.iframe.execute(m.addedNodes[i]),o.length>0&&translate.ignore.tag.indexOf(o)==-1&&v.push(m.addedNodes[i])}if(m.removedNodes.length>0)for(var u=0;u<m.removedNodes.length;u++)translate.node.delete(m.removedNodes[u])}else if(m.type==="attributes"){if(m.attributeName==="class"||m.attributeName==="style")continue;if(!(m.attributeName==="placeholder"||m.attributeName==="alt"||m.attributeName==="title")){var f=m.target.nodeName.toLowerCase();f==="iframe"&&typeof m.attributeName=="string"&&m.attributeName.toLowerCase()==="src"&&typeof translate.element.iframe<"u"&&translate.element.iframe.execute(m.target);var g=translate.element.tagAttribute[f];if(!(typeof g<"u"&&g.attribute.indexOf(m.attributeName)>-1&&g.condition(m.target)))continue}var h=m.target.getAttributeNode(m.attributeName),d=translate.listener.nodeValueChangeNeedTranslate(h);d&&(translate.node.delete(h),v=[h])}else if(m.type==="characterData"){var d=translate.listener.nodeValueChangeNeedTranslate(m.target);d&&(translate.node.delete(m.target),v=[m.target])}for(let y of v){for(var c=!1,p=0;p<s.length;p++)if(s[p].isSameNode(y)){c=!0;break}if(c)break;s.push.apply(s,[y])}}s.length>0&&(translate.time.log("监听到元素发生变化,"+s.length+"个元素"),translate.execute(s))},translate.listener.observer=new MutationObserver(translate.listener.callback);for(var t=translate.getDocuments(),a=0;a<t.length;a++){var n=t[a];n!=null&&translate.listener.observer.observe(n,translate.listener.config)}typeof translate.element.tagAttribute.input=="object"&&translate.element.tagAttribute.input.attribute.indexOf("value")>-1&&translate.listener.input.start()}},renderTaskFinish:function(t){},execute:{renderStartByApi:[],renderStartByApiRun:function(t,a,n){for(var r=0;r<translate.listener.execute.renderStartByApi.length;r++)try{translate.listener.execute.renderStartByApi[r](t,a,n)}catch(l){translate.log(l)}},renderFinishByApi:[],renderFinishByApiRun:function(t,a,n){for(var r=0;r<translate.listener.execute.renderFinishByApi.length;r++)try{translate.listener.execute.renderFinishByApi[r](t,a,n)}catch(l){translate.log(l)}}}},renderTask:class{constructor(){this.taskQueue=new Map,this.nodes=[]}add(t,a,n,r,l){var s=translate.element.nodeAnalyse.get(t,r),i=translate.util.hash(s.text);typeof this.nodes[i]>"u"&&(this.nodes[i]=new Array),this.nodes[i].push(t);var o=this.taskQueue.get(t);(o==null||typeof o>"u")&&(o=new Array);var u=new Array;a.substr(0,1)==" "&&n.substr(0,1)!=" "&&(n=" "+n),a.substr(a.length-1,1)===" "&&n.substr(0,1)!=" "&&(n=n+" "),u.originalText=a,u.resultText=n,u.attribute=r,u.participles=l,o.push(u),this.taskQueue.set(t,o)}execute(){for(let d of this.taskQueue.keys()){var t=this.taskQueue.get(d);t!=null&&typeof t!="function"&&(t.sort((c,p)=>p.originalText.length-c.originalText.length),this.taskQueue.set(d,t))}for(var a in this.nodes)if(this.nodes.hasOwnProperty(a))for(var n=0;n<this.nodes[a].length;n++){var r=this.nodes[a][n],t=this.taskQueue.get(r);if(t==null){translate.log("WARNING : renderTask.execute 中，this.taskQueue.get(node) == null ，理论上要进行替换任务，就应该会有内容的，数据在理论上出现异常");continue}for(var l=0;l<t.length;l++){var s=t[l];if(typeof t!="function"){var i=null,o="";if(typeof s.attribute=="string"&&s.attribute.length>0){if(s.attribute==="value"){var u=translate.element.getNodeName(this.nodes[a][n]).toLowerCase();(u==="input"||u==="textarea")&&(i=this.nodes[a][n],o="value")}i===null&&(i=this.nodes[a][n].getAttributeNode(s.attribute),o=s.attribute)}else i=this.nodes[a][n];if(typeof translate.node.data.get(i)>"u"||translate.node.data.get(i)===null){translate.log("执行异常，渲染时，node 未在 translate.node 中找到, 这个很有可能是点击过快，上一个翻译任务还在网络请求中，又点击了别的地方导致内容又被改变。当前异常已被容错。 node："),translate.log(i);var f=translate.element.nodeAnalyse.get(r,s.attribute);translate.node.set(i,{attribute:o,originalText:f.text,whole:!0,translateTexts:{}}),translate.node.setModified(i,"create:translate.renderTask.execute")}translate.node.get(i).lastTranslateRenderTime=Date.now();var g=translate.element.nodeAnalyse.set(r,s.originalText,s.resultText,s.attribute,typeof s.participles>"u"?[]:s.participles);translate.node.data.get(i)!=null&&(translate.node.get(i).translateTexts[s.originalText]=s.resultText,translate.node.get(i).resultText=g.resultText,translate.history.translateText.add(translate.node.get(i).originalText,g.resultText))}}}if(typeof this.taskQueue<"u"&&Object.keys(this.taskQueue).length>0){var h=this;setTimeout(function(){translate.listener.renderTaskFinish(h)},5)}}},state:0,waitingExecute:{use:!0,queue:[],add:function(t){translate.waitingExecute.queue.push(t);let a=setInterval(function(){if(translate.state==0){clearInterval(a);var n=translate.waitingExecute.get();translate.execute(n)}},500)},get:function(){return translate.waitingExecute.queue.length>0?translate.waitingExecute.queue.shift():(translate.log("警告， translate.waitingExecute.get 出现异常，quque已空，但还往外取。"),null)},isAllExecuteFinish:function(t,a,n,r,l){translate.listener.execute.renderFinishByApiRun(t,a,n);var s=translate.request.data[t].list[a][n];translate.lifecycle.execute.translateNetworkAfter_Trigger({uuid:t,from:a,to:n,texts:s.texts,nodes:s.nodes,result:r,info:l});for(var i in translate.translateRequest[t])if(translate.translateRequest[t].hasOwnProperty(i)&&translate.translateRequest[t][i].executeFinish==0)return;translate.lifecycle.execute.renderFinish_Trigger(t,n),translate.state=0,translate.executeNumber++}},executeNumber:0,executeTriggerNumber:0,lifecycle:{changeLanguage:{trigger:[],trigger_Trigger:function(t){for(var a=0;a<translate.lifecycle.changeLanguage.trigger.length;a++)try{translate.lifecycle.changeLanguage.trigger[a](t)}catch(n){translate.log(n)}for(var a=0;a<translate.lifecycle.changeLanguage.old_trigger_array.length;a++)try{translate.lifecycle.changeLanguage.old_trigger_array[a](t.to)}catch(r){translate.log(r)}},old_trigger_array:[],push:function(t){translate.log("提示， translate.lifecycle.changeLanguage.push 方式已过时，但依旧生效，可正常使用。 最新的方式，文档参考 http://translate.zvo.cn/540189.html "),translate.lifecycle.changeLanguage.trigger.push(t),translate.lifecycle.changeLanguage.old_trigger_array.push(t)},resetAfter:[],resetAfter_Trigger:function(t){for(var a=0;a<translate.lifecycle.changeLanguage.resetAfter.length;a++)try{translate.lifecycle.changeLanguage.resetAfter[a](t)}catch(n){translate.log(n)}}},execute:{trigger:[],trigger_Trigger:function(t){for(var a=!0,n=0;n<translate.lifecycle.execute.trigger.length;n++)try{var r=translate.lifecycle.execute.trigger[n](t);typeof r=="boolean"&&r===!1&&(a=!1)}catch(l){translate.log(l)}return a},start:[],start_Trigger:function(t){for(var a=0;a<translate.lifecycle.execute.start.length;a++)if(translate.lifecycle.execute.start[a].length===2)try{translate.lifecycle.execute.start[a](t.uuid,t.to)}catch(n){translate.log(n)}else try{translate.lifecycle.execute.start[a](t)}catch(n){translate.log(n)}},start_old:[],startRun:function(t,a,n){for(var r=0;r<translate.listener.execute.renderStartByApi.length;r++)try{translate.listener.execute.renderStartByApi[r](t,a,n)}catch(l){translate.log(l)}},scanNodesFinsh:[],translateNetworkBefore:[],translateNetworkBefore_Trigger:function(t){for(var a=0;a<translate.lifecycle.execute.translateNetworkBefore.length;a++)if(translate.lifecycle.execute.translateNetworkBefore[a].length===4)try{translate.lifecycle.execute.translateNetworkBefore[a](t.uuid,t.from,t.to,t.texts)}catch(n){translate.log(n)}else try{translate.lifecycle.execute.translateNetworkBefore[a](t)}catch(n){translate.log(n)}},translateNetworkAfter:[],translateNetworkAfter_Trigger:function(t){for(var a=0;a<translate.lifecycle.execute.translateNetworkAfter.length;a++)try{translate.lifecycle.execute.translateNetworkAfter[a](t)}catch(n){translate.log(n)}},renderFinish:[function(t,a){typeof translate.visual<"u"&&translate.visual.adjustTranslationSpacesByNodequeueUuid(t)}],renderFinish_Trigger:function(t,a){for(var n=0;n<translate.lifecycle.execute.renderFinish.length;n++)try{translate.lifecycle.execute.renderFinish[n](t,a)}catch(r){translate.log(r)}},finally:[],finally_Trigger:function(t){for(var a=0;a<translate.lifecycle.execute.finally.length;a++)try{translate.lifecycle.execute.finally[a](t)}catch(n){translate.log(n)}}}},execute:function(t){translate.executeTriggerNumber=translate.executeTriggerNumber+1;var a=translate.executeTriggerNumber,n=translate.util.uuid();if(translate.time.log("创建uuid:"+n),translate.to==null||translate.to==""){var r=translate.storage.get("to");r!=null&&typeof r<"u"&&r.length>0&&(translate.to=r)}var l;typeof t<"u"&&t!=null?typeof t.length>"u"?(l=new Array,l[0]=t):l=t:l=translate.getDocuments();var s=translate.lifecycle.execute.trigger_Trigger({to:translate.to,docs:l,executeTriggerNumber:a,uuid:n});if(!s){translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:2,triggerNumber:a});return}if(translate.waitingExecute.use&&translate.state!=0){var i="";if(typeof t<"u"&&t!=null){for(var o=t.slice(0,2),u=0;u<o.length;u++)i.length>0&&(i=i+", "),o[u].nodeType===1?(i=i+""+o[u].tagName,typeof o[u].id=="string"&&o[u].id.length>0&&(i=i+" id="+o[u].id),o[u].getAttribute("class")!=null&&typeof o[u].getAttribute("class")=="string"&&o[u].getAttribute("class").length>0&&(i=i+" class="+o[u].getAttribute("class"))):(o[u].nodeType===2||o[u].nodeType===3)&&(i=i+o[u].nodeValue.replaceAll(/\r?\n/g,"[换行符]"));i=" ("+t.length+")["+i+(t.length>2?", ...":"")+"]"}translate.log("当前翻译未完结，新翻译任务已加入等待翻译队列，待上个翻译任务结束后便会执行当前翻译任务"+i),translate.waitingExecute.add(t),translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:4,triggerNumber:a});return}translate.state=2,translate.time.log("触发"),translate.request.initRequest(),typeof t<"u"&&(translate.useVersion="v2"),translate.useVersion=="v1"&&(translate.log("提示：https://github.com/xnx3/translate 在 v2.5 版本之后，由于谷歌翻译调整，免费翻译通道不再支持，所以v1版本的翻译接口不再被支持，v1全线下架。考虑到v1已不能使用，当前已自动切换到v2版本。如果您使用中发现什么异常，请针对v2版本进行适配。"),translate.useVersion="v2"),translate.time.log("渲染出选择语言的select窗口-开始");try{translate.selectLanguageTag.render()}catch(B){translate.log(B)}if(translate.time.log("渲染出选择语言的select窗口-已完成"),translate.to==null||typeof translate.to>"u"||translate.to.length==0)if(translate.autoDiscriminateLocalLanguage)translate.executeByLocalLanguage();else{translate.state=0,translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:6,triggerNumber:a});return}if(translate.to==translate.language.getLocal()&&!translate.language.translateLocal){translate.state=0,translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:8,triggerNumber:a});return}try{for(var f in translate.element.tagAttribute)if(translate.element.tagAttribute.hasOwnProperty(f)&&translate.element.tagAttribute[f]instanceof Array){var g=translate.element.tagAttribute[f];translate.element.tagAttribute[f]={attribute:g,condition:function(B){return!0}}}}catch(B){translate.log(B)}translate.time.log("生命周期-触发翻译进行之前，用户自定义的钩子-开始"),translate.lifecycle.execute.start_Trigger({uuid:n,to:translate.to}),translate.time.log("生命周期-触发翻译进行之前，用户自定义的钩子-完成"),translate.time.log("进行图片翻译-开始"),translate.images.execute(),translate.time.log("进行图片翻译-完成"),l.length>1500&&(translate.log("------tip------"),translate.log("警告 translate.execute( docs ) 传入的docs.length 过大，超过1500，这不正常，当前 docs.length : "+l.length+" , 它依旧会正常进行执行，但会有性能损耗。 这个情况很可能是你用的某些框架，没有等dom渲染完就执行了translate.execute() ，同时启用了dom变动监听，导致监听到页面加载大量的DOM渲染； 另外也有可能你本身页面就是列表页或者什么原因就是有大量的动态元素获取后渲染，如果是这种情况，这是正常的。")),translate.time.log("开始扫描要翻译区域的元素");for(var h=0;h<l.length&h<15e3;h++){var d=l[h];translate.element.whileNodes(n,d)}if(translate.time.log("扫描要翻译区域的元素完成"),translate.language.translateLanguagesRange.length>0)for(var c in translate.nodeQueue[n].list)translate.nodeQueue[n].list.hasOwnProperty(c)&&translate.language.translateLanguagesRange.indexOf(c)<0&&delete translate.nodeQueue[n].list[c];typeof translate.nodeQueue[n]>"u"&&(translate.nodeQueue[n]=new Array,translate.nodeQueue[n].list=[],translate.log("--- translate.js warn tip 警告！！ ---"),translate.log("您使用translate.js时可能放的位置不对，不要吧 translate.js 放在网页最顶部，这样当 translate.js 进行执行，也就是 translate.execute() 执行时，因为网页是从上往下加载，它放在网页最顶部，那么它执行时网页后面的内容都还没加载出来，这个是不会获取到网页任何内容的，也就是它是不起任何作用的"));for(var c in translate.nodeQueue[n].list)if(translate.nodeQueue[n].list.hasOwnProperty(c)){for(var p in translate.nodeQueue[n].list[c])translate.nodeQueue[n].list[c].hasOwnProperty(p)&&typeof translate.nodeQueue[n].list[c][p]!="function"&&(typeof translate.nodeQueue[n].list[c][p].nodes>"u"||typeof translate.nodeQueue[n].list[c][p].nodes.length>"u"||translate.nodeQueue[n].list[c][p].nodes.length==0&&delete translate.nodeQueue[n].list[c][p]);Object.keys(translate.nodeQueue[n].list[c]).length==0&&delete translate.nodeQueue[n].list[c]}translate.time.log("对扫描到的元素进行预处理完毕");var m={},v={},y=new Map,x={},T=[];for(var c in translate.nodeQueue[n].list){if(!translate.nodeQueue[n].list.hasOwnProperty(c)||c==null||typeof c>"u"||c.length==0||c=="undefined")continue;m[c]=[],y.set(c,new Map),v[c]=[];let w=new translate.renderTask;x[c]=[];for(var p in translate.nodeQueue[n].list[c])if(translate.nodeQueue[n].list[c].hasOwnProperty(p)&&typeof translate.nodeQueue[n].list[c][p]!="function"){var q=translate.nodeQueue[n].list[c][p].original,k=translate.nodeQueue[n].list[c][p].translateText,E=q==k?p:translate.util.hash(k);translate.nodeQueue[n].list[c][p].cacheHash=E;var O=translate.storage.get("hash_"+translate.to+"_"+E);if(O!=null&&O.length>0){for(var N=0;N<translate.nodeQueue[n].list[c][p].nodes.length;N++){var C=translate.node.get(translate.nodeQueue[n].list[c][p].nodes[N].node),P=[];if(typeof C<"u"&&C!==null&&typeof C.whole=="boolean"&&C.whole===!1)for(var V in C.translateTexts)C.translateTexts.hasOwnProperty(V)&&P.push(V);var D=translate.nodeQueue[n].list[c][p].nodes[N].beforeText+O+translate.nodeQueue[n].list[c][p].nodes[N].afterText;w.add(translate.nodeQueue[n].list[c][p].nodes[N].node,q,D,translate.nodeQueue[n].list[c][p].nodes[N].attribute,P);for(var A=-1,h=0;h<x[c].length;h++)if(translate.nodeQueue[n].list[c][p].nodes[N].node.isSameNode(x[c][h].node)){A=h;break}for(var _=-1,h=0;h<T.length;h++)if(translate.nodeQueue[n].list[c][p].nodes[N].node.isSameNode(T[h].node)){_=h;break}A==-1&&(A=x[c].length,x[c][A]={},x[c][A].node=translate.nodeQueue[n].list[c][p].nodes[N].node,x[c][A].array=[]),_==-1&&(_=T.length,T[_]={},T[_].node=translate.nodeQueue[n].list[c][p].nodes[N].node,T[_].array=[]);var X=x[c][A].array.length;x[c][A].array[X]=D;var z=T[_].array.length;T[_].array[z]=D}continue}m[c].push(k);for(var F=0;F<translate.nodeQueue[n].list[c][p].nodes.length;F++)y.get(c).set(translate.nodeQueue[n].list[c][p].nodes[F].node,1);v[c].push(p)}w.execute()}if(translate.time.log("对扫描到的元素进行浏览器本地缓存命中-完毕"),typeof translate.request.api.translate!="string"||translate.request.api.translate==null||translate.request.api.translate.length<1){translate.state=0,translate.lifecycle.execute.renderFinish_Trigger(n,translate.to),translate.executeNumber++,translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:16,triggerNumber:a});return}var M=[];for(var c in translate.nodeQueue[n].list)translate.nodeQueue[n].list.hasOwnProperty(c)&&(typeof m[c]>"u"||m[c].length<1||c!=translate.to&&M.push(c));if(M.length==0){translate.lifecycle.execute.renderFinish_Trigger(n,translate.to),translate.state=0,translate.executeNumber++,translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:18,triggerNumber:a});return}translate.state=20,translate.time.log("调用翻译接口进行翻译 - 开始"),translate.request.data[n]={time:Date.now(),list:{}};for(var J in M)if(M.hasOwnProperty(J)){var c=M[J];if(typeof c=="string"){if(typeof m[c]>"u"||m[c].length<1){translate.log("异常,理论上不应该存在, lang:"+c+", translateTextArray:"),translate.log(m),translate.log("你无需担心，这个只是个提示，它并不影响你翻译的正常进行，只是个异常提示而已，它会自动容错处理的，不会影响翻译的使用。"),translate.state=0,translate.executeNumber++,translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:21,triggerNumber:a});return}(typeof translate.translateRequest[n]>"u"||translate.translateRequest[n]==null)&&(translate.translateRequest[n]={}),translate.translateRequest[n][c]={},translate.translateRequest[n][c].executeFinish=0,translate.translateRequest[n][c].addtime=Math.floor(Date.now()/1e3),translate.listener.execute.renderStartByApiRun(n,c,translate.to);var U=[];for(let w of y.get(c).keys())U.push(w);translate.lifecycle.execute.translateNetworkBefore_Trigger({uuid:n,lang:c,to:translate.to,texts:m[c],nodes:U}),typeof translate.request.data[n].list[c]>"u"&&(translate.request.data[n].list[c]={}),translate.request.data[n].list[c][translate.to]={texts:m[c],nodes:U};var G=translate.request.api.translate,Y={from:c,to:translate.to,text:encodeURIComponent(JSON.stringify(m[c]))};translate.request.post(G,Y,function(w,b){if(w.result!=1){typeof translate.translateRequest[n]=="object"&&typeof translate.translateRequest[n][b.from]=="object"?(translate.translateRequest[n][b.from].result=2,translate.translateRequest[n][b.from].executeFinish=1,translate.translateRequest[n][b.from].stoptime=Math.floor(Date.now()/1e3)):translate.log("WARINNG!!! translate.translateRequest[uuid][requestData.from] is not object");var $="";typeof b.from<"u"&&b.from!=null&&($=b.from);var H="";typeof b.to<"u"&&b.to!=null?H=b.to:H=translate.to,translate.waitingExecute.isAllExecuteFinish(n,$,H,0,w.info),translate.log("=======ERROR START======="),translate.log(m[b.from]),translate.log("response : "+w.info),translate.log("=======ERROR END  =======");return}if(typeof translate.nodeQueue[n]>"u"){translate.log("提示：你很可能多次引入了 translate.js 所以造成了翻译本身的数据错乱，这只是个提示，它还是会给你正常翻译的，但是你最好不要重复引入太多次 translate.js ，正常情况下只需要引入一次 translate.js 就可以了。太多的话很可能会导致你页面卡顿");return}let W=new translate.renderTask;for(var j=0;j<v[w.from].length;j++){var R=w.from,I=w.text[j];if(I!=null){I.toLowerCase().indexOf(m[w.from][j].toLowerCase())>-1&&(I=m[w.from][j]);var L=v[w.from][j],K=translate.nodeQueue[n].list[R][L].cacheHash,S="";try{S=translate.nodeQueue[n].list[R][L].original}catch(Z){translate.log("uuid:"+n+", originalWord:"+S+", lang:"+R+", hash:"+L+", text:"+I+", queue:"+translate.nodeQueue[n]),translate.log(Z);continue}for(var Q=0;Q<translate.nodeQueue[n].list[R][L].nodes.length;Q++)W.add(translate.nodeQueue[n].list[R][L].nodes[Q].node,S,translate.nodeQueue[n].list[R][L].nodes[Q].beforeText+I+translate.nodeQueue[n].list[R][L].nodes[Q].afterText,translate.nodeQueue[n].list[R][L].nodes[Q].attribute);translate.storage.set("hash_"+w.to+"_"+K,I),translate.offline.fullExtract.isUse&&translate.offline.fullExtract.set(L,S,w.to,I)}}W.execute(),translate.translateRequest[n][R].result=1,translate.translateRequest[n][R].executeFinish=1,translate.translateRequest[n][R].stoptime=Math.floor(Date.now()/1e3),setTimeout(function(){translate.waitingExecute.isAllExecuteFinish(n,w.from,w.to,1,"")},5)},function(w){translate.translateRequest[n][w.data.from].executeFinish=1,translate.translateRequest[n][w.data.from].stoptime=Math.floor(Date.now()/1e3),translate.translateRequest[n][w.data.from].result=3;var b="";typeof w.status<"u"?w.status<1?b="Network connection failed. url: "+w.requestURL:b="HTTP response code : "+w.status+", url: "+w.requestURL:b="Network connection failed. url: "+w.requestURL,translate.waitingExecute.isAllExecuteFinish(n,w.data.from,translate.to,0,b)})}}translate.lifecycle.execute.finally_Trigger({uuid:n,to:translate.to,state:25,triggerNumber:a})},translateRequest:{},nodeHistory:null,node:{data:null,get:function(t){return translate.node.data.get(t)},find:function(t){return translate.node.get(t)!=null},set:function(t,a){translate.node.data.set(t,a)},setModified:function(t,a){if(typeof translate.node.data.get(t)>"u"||translate.node.data.get(t)===null){translate.log("translate.node.setModified exception: node not find in translate.node,  node:"),translate.log(t);return}typeof translate.node.data.get(t).modified>"u"&&(translate.node.data.get(t).modified=[]),translate.node.data.get(t).modified.push(a)},delete:function(t){translate.node.data.delete(t)},refresh:function(){const t=new Array;for(let n of translate.node.data.keys()){let r=!1;n.nodeType===Node.ELEMENT_NODE?r=n.isConnected:n.nodeType===Node.ATTRIBUTE_NODE?r=n.ownerElement&&n.ownerElement.isConnected:n.nodeType===Node.TEXT_NODE&&(r=n.isConnected),r||t.push(n)}for(var a=0;a<t.length;a++)translate.node.delete(t[a])}},element:{tagAttribute:{},nodeAnalyse:{get:function(t,a){return translate.element.nodeAnalyse.analyse(t,"","",a)},gets:function(t){var a=[],n=translate.element.getNodeName(t).toUpperCase();switch(n){case"META":var r=t.name.toLowerCase(),l=t.getAttribute("property"),s="";typeof l=="string"&&l.length>0&&(s=l.toLowerCase()),(r=="keywords"||r=="description"||r=="sharetitle"||s=="og:title"||s=="og:description"||s=="og:site_name"||s=="og:novel:latest_chapter_name")&&typeof t.content=="string"&&t.content.trim().length>0&&a.push({text:t.content,attribute:"content",node:t.getAttributeNode("content")});break;case"IMG":typeof t.alt=="string"&&t.alt.trim().length>0&&a.push({text:t.alt,attribute:"alt",node:t.getAttributeNode("alt")});break;case"INPUT":if(typeof t.attributes.type<"u"&&t.attributes.type!==null&&typeof t.attributes.type.nodeValue=="string"&&(t.attributes.type.nodeValue.toLowerCase()=="button"||t.attributes.type.nodeValue.toLowerCase()=="submit")){var i=t.attributes.value;typeof i<"u"&&i!==null&&typeof i.nodeValue=="string"&&i.nodeValue.trim().length>0&&a.push({text:i.nodeValue,attribute:"value",node:i})}typeof t.attributes.placeholder<"u"&&typeof t.attributes.placeholder.nodeValue=="string"&&t.attributes.placeholder.nodeValue.trim().length>0&&a.push({text:t.attributes.placeholder.nodeValue,attribute:"placeholder",node:t.attributes.placeholder});break;case"TEXTAREA":typeof t.attributes.placeholder<"u"&&typeof t.attributes.placeholder.nodeValue=="string"&&t.attributes.placeholder.nodeValue.trim().length>0&&a.push({text:t.attributes.placeholder.nodeValue,attribute:"placeholder",node:t.attributes.placeholder});break}var o=translate.element.tagAttribute[n.toLowerCase()];if(typeof o<"u")for(var u=0;u<t.attributes.length;u++){var f=translate.element.getNodeName(t.attributes[u]).toLowerCase();if(o.attribute.indexOf(f)>-1&&o.condition(t)){for(var g=!1,h=0;h<a.length;h++)a[h].node===t.attributes[u]&&(g=!0);g||a.push({text:t.attributes[u].nodeValue,attribute:f,node:t.attributes[u]})}}if(typeof t.title=="string"&&t.title.trim().length>0){var d=t.getAttributeNode("title");a.push({text:d.nodeValue,attribute:"title",node:d})}return typeof t.nodeValue=="string"&&t.nodeValue.trim().length>0&&a.push({text:t.nodeValue,attribute:"",node:t}),a},set:function(t,a,n,r,l){return translate.element.nodeAnalyse.analyse(t,a,n,r,l)},analyse:function(t,a,n,r,l){var s=new Array;s.node=t,s.text="";var i=translate.element.getNodeName(t);if(r!=null&&typeof r=="string"&&r.length>0){var o;if((i==="INPUT"||i==="TEXTAREA")&&r.toLowerCase()=="value"?o=t.value:o=t[r],s.text=o,typeof a<"u"&&a.length>0&&typeof o<"u"){var u=translate.util.textReplace(o,a,n,translate.to,l);translate.element.nodeAnalyse.analyseReplaceBefore_DateToTranslateNode(t,r,u),(i==="INPUT"||i==="TEXTAREA")&&r.toLowerCase()=="value"?t.value=u:t[r]=u,u.indexOf(n)>-1?s.resultText=u:s.resultText=""}return s}if(i=="INPUT"||i=="TEXTAREA"){if(t.attributes==null||typeof t.attributes>"u")return s.text="",s;if(i=="INPUT"&&typeof t.attributes.type<"u"&&typeof t.attributes.type.nodeValue!=null&&(t.attributes.type.nodeValue.toLowerCase()=="button"||t.attributes.type.nodeValue.toLowerCase()=="submit")){var f=t.attributes.value;if(f!=null&&typeof f<"u"&&typeof f.nodeValue<"u"&&f.nodeValue.length>0){if(typeof a<"u"&&a.length>0){var u=translate.util.textReplace(f.nodeValue,a,n,translate.to,l);translate.element.nodeAnalyse.analyseReplaceBefore_DateToTranslateNode(t,r,u),f.nodeValue=u,u.indexOf(n)>-1?s.resultText=u:s.resultText=""}return s.text=f.nodeValue,s.node=f,s}}if(typeof t.attributes.placeholder<"u"){if(typeof a<"u"&&a.length>0){var u=translate.util.textReplace(t.attributes.placeholder.nodeValue,a,n,translate.to,l);translate.element.nodeAnalyse.analyseReplaceBefore_DateToTranslateNode(t,r,u),t.attributes.placeholder.nodeValue=u,u.indexOf(n)>-1?s.resultText=u:s.resultText=""}return s.text=t.attributes.placeholder.nodeValue,s.node=t.attributes.placeholder,s}return s.text="",s}if(i=="META"){if(typeof t.name<"u"&&t.name!=null){var g=t.name.toLowerCase(),h=t.getAttribute("property"),d="";if(typeof h<"u"&&h!=null&&h.length>0&&(d=h.toLowerCase()),g=="keywords"||g=="description"||g=="sharetitle"||d=="og:title"||d=="og:description"||d=="og:site_name"||d=="og:novel:latest_chapter_name"){if(typeof a<"u"&&a!=null&&a.length>0){var u=translate.util.textReplace(t.content,a,n,translate.to,l);translate.element.nodeAnalyse.analyseReplaceBefore_DateToTranslateNode(t,r,u),t.content=u,u.indexOf(n)>-1?s.resultText=u:s.resultText=""}return s.text=t.content,s}}return s.text="",s}if(i=="IMG"){if(typeof t.alt>"u"||t.alt==null)return s.text="",s;if(typeof a<"u"&&a.length>0){var u=translate.util.textReplace(t.alt,a,n,translate.to,l);translate.element.nodeAnalyse.analyseReplaceBefore_DateToTranslateNode(t,r,u),t.alt=u,u.indexOf(n)>-1?s.resultText=u:s.resultText=""}return s.text=t.alt,s}if(t.nodeValue==null||typeof t.nodeValue>"u")s.text="";else if(t.nodeValue.trim().length==0)s.text="";else{if(typeof a<"u"&&a!=null&&a.length>0){var u=translate.util.textReplace(t.nodeValue,a,n,translate.to,l);translate.element.nodeAnalyse.analyseReplaceBefore_DateToTranslateNode(t,r,u),t.nodeValue=u,u.indexOf(n)>-1?s.resultText=u:s.resultText=""}s.text=t.nodeValue}return s},analyseReplaceBefore_DateToTranslateNode:function(t,a,n){var r=null;if(typeof a=="string"&&a.length>0){if(a!==null&&a==="value"){var l=translate.element.getNodeName(t).toLowerCase();(l==="input"||l==="textarea")&&(r=t)}r===null&&(r=t.getAttributeNode(a))}else r=t;translate.node.find(r)&&(typeof translate.node.get(r).translateResults>"u"&&(translate.node.get(r).translateResults={}),translate.node.get(r).translateResults[n]=1,translate.node.get(r).resultText=n)}},iframe:{isUse:!1,translateJsUrl:"",use:function(t){if(typeof window.location.protocol=="string"&&window.location.protocol.toLowerCase()==="file:"){console.log("ERROR: 您当前设置了 translate.element.iframe.use(...); 但是您当前的协议是file协议访问的，这个协议访问会存在跨域问题，所以您的设置没有生效。 您可以通过本地开一个访问服务，以 http、https 等正常请求的方式进行访问。");return}translate.element.iframe.isUse=!0,translate.element.iframe.translateJsUrl=t},iframeMap:new Map,isIframeSameOrigin:function(t){if(!t||!(t instanceof HTMLIFrameElement))return console.warn("传入的iframe不是有效的DOM对象"),!1;const a=window.location.origin;let n;try{n=t.contentDocument?.URL||t.contentWindow?.location.href}catch{n=t.src||"about:blank"}if(n==="about:blank")return!0;try{const r=new URL(n).origin;return a===r}catch{return!1}},iframeJsInjector:class{translateJsUrl="";iframe=null;constructor(t,a){this.translateJsUrl=a,this.iframe=t}isInjectJs=!1;importJsAndTranslateExecute=function(){if(this.isInjectJs===!0){console.log("已导入了，不在继续导入");return}if(translate.element.iframe.isIframeSameOrigin(this.iframe)){var t;try{t=this.iframe.contentWindow}catch(a){console.error("注入失败（大概率跨域）",a);return}this.isInjectJs=!0;try{const a=this.iframe.contentDocument||this.iframe.contentWindow.document,n=a.createElement("script");n.type="text/javascript",n.src=this.translateJsUrl,n.onload=function(){var r=parent.translate.config.get();t.translate.config.set(r),t.translate.to=t.translate.language.getCurrent(),setTimeout(function(){t.translate.execute()},10)},n.onerror=function(r){console.log("失败："),console.log(r)},a.documentElement.appendChild(n)}catch(a){console.error("注入失败（大概率跨域）",a)}}};injectJs=function(){typeof this.iframe=="object"?typeof this.iframe.contentDocument=="object"?typeof this.iframe.contentDocument.readyState=="string"?this.importJsAndTranslateExecute():console.log("iframe - "+this.translateJsUrl+" state is not string"):console.log("iframe - "+this.translateJsUrl+" state is not string"):console.log("iframe - "+this.translateJsUrl+" is not find (not object)")}},execute:function(t){if(translate.element.iframe.isUse!==!1&&((translate.element.iframe.iframeMap.get(t)===null||typeof translate.element.iframe.iframeMap.get(t)>"u")&&translate.element.iframe.iframeMap.set(t,{}),!!translate.element.iframe.isIframeSameOrigin(t)))if(typeof t.src=="string"&&t.src.trim().length>0)(typeof translate.element.iframe.iframeMap.get(t).addLoad!="boolean"||translate.element.iframe.iframeMap.get(t).addLoad!==!0)&&(translate.element.iframe.iframeMap.get(t).addLoad=!0,t.addEventListener("load",function(){console.log("----load url: "+t.src);var n=t.contentWindow;if(!(typeof n.translate=="object"&&typeof n.translate.version=="string")){translate.element.iframe.iframeMap.get(t).isTranslate=!0;var r=new translate.element.iframe.iframeJsInjector(t,translate.element.iframe.translateJsUrl);r.injectJs()}}));else{var a=new translate.element.iframe.iframeJsInjector(t,translate.element.iframe.translateJsUrl);a.injectJs()}}},getNodeName:function(t){return t==null||typeof t>"u"||t.nodeName==null||typeof t.nodeName>"u"?"":(t.nodeName,typeof t.nodeName=="string"?t.nodeName:typeof t.tagName=="string"&&t.tagName.length>0?t.tagName:(translate.log("warn : get nodeName is null, this node ignore translate. node : "),translate.log(t),""))},whileNodes:function(t,a){if(!(a==null||typeof a>"u")){(typeof translate.nodeQueue[t]>"u"||translate.nodeQueue[t]==null)&&(translate.nodeQueue[t]=new Array,translate.nodeQueue[t].expireTime=Date.now()+120*1e3,translate.nodeQueue[t].list=new Array),typeof a=="object"&&typeof a.title=="string"&&a.title.trim().length>0&&(translate.ignore.isIgnore(a)||translate.addNodeToQueue(t,a.getAttributeNode("title"),a.title,""));var n=translate.element.getNodeName(a).toLowerCase();if(typeof translate.element.tagAttribute[n]<"u"){for(var r in translate.element.tagAttribute[n].attribute)if(translate.element.tagAttribute[n].attribute.hasOwnProperty(r)&&!(typeof translate.element.tagAttribute[n].condition<"u"&&!translate.element.tagAttribute[n].condition(a))){var l=translate.element.tagAttribute[n].attribute[r],s=!1;if((n==="input"||n==="textarea")&&l.toLowerCase()=="value")i=a.value,s=!0;else{var i=a.getAttribute(l);if((typeof i>"u"||i==null)&&(i=a[l]),typeof i>"u"||i==null)continue}translate.ignore.isIgnore(a)||translate.addNodeToQueue(t,s?a:a.getAttributeNode(l),i,s?"value":"")}}var o=a.childNodes;if(!(o==null||typeof o>"u"))if(o.length>0)for(var u=0;u<o.length;u++)translate.element.whileNodes(t,o[u]);else translate.element.findNode(t,a)}},findNode:function(t,a){if(!(a==null||typeof a>"u")){if(a.nodeType===2){if(a.ownerElement==null)return}else if(a.parentNode==null)return;if(!translate.ignore.isIgnore(a))for(var n=translate.element.nodeAnalyse.gets(a),r=0;r<n.length;r++)translate.addNodeToQueue(t,n[r].node,n[r].text,"")}},nodeToElement:function(t){for(var a=new Array,n=0;n<t.length;n++){var r=t[n];if(!(typeof r>"u"||typeof r.parentNode>"u"))if(r.nodeType===2){var l=r.ownerElement;if(l==null)continue;a.push(l)}else if(r.nodeType===3){var l=r.parentNode;if(l==null)continue;a.push(l)}else r.nodeType===1?a.push(r):(translate.log("translate.element.nodeToElement 中，发现传入的node.nodeType 类型有异常，理论上不应该存在， node.nodeType:"+r.nodeType),translate.log(r))}return a}},addNodeToQueue:function(t,a,n,r){if(!(a==null||n==null||n.length==0)){var l=translate.element.getNodeName(a).toLowerCase();if(l!="#comment"){if(translate.util.hash(n),translate.util.findTag(n)){if(a.parentNode==null)return;var s=translate.element.getNodeName(a.parentNode);if(s=="SCRIPT"||s=="STYLE")return}var i,o="";if(typeof r=="string"&&r.length>0?(l==="input"||l==="textarea")&&r!==null&&r==="value"?(i=a,o="value"):(i=a.getAttributeNode(r),o=r):i=a,translate.node.get(i)==null&&translate.node.set(i,{}),translate.node.get(i).attribute=o,typeof translate.node.get(i).originalText!="string"){translate.node.get(i).originalText=n,typeof translate.node.get(i).translateTexts>"u"&&(translate.node.get(i).translateTexts={});var u=new Array;u.push(n);for(var f=[],g=0;g<translate.ignore.textRegex.length;g++)for(var h=translate.ignore.textRegex[g],d=0;d<u.length;d++){var n=u[d],c=n.match(h)||[];f=f.concat(c)}if(f.length==0)f=translate.ignore.text;else{f.concat(translate.ignore.text);for(var p=0;p<f.length;p++)translate.history.translateText.add(f[p],f[p])}for(var p=0;p<f.length;p++)f[p].trim().length!=0&&(u=translate.nomenclature.dispose(u,f[p],f[p],{node:i,attribute:o}).texts);if(typeof translate.temp_nomenclature>"u"&&(translate.temp_nomenclature=new Array),typeof translate.temp_nomenclature[translate.language.getLocal()]>"u"&&(m=new Array),typeof translate.nomenclature.data[translate.language.getLocal()]<"u"&&typeof translate.nomenclature.data[translate.language.getLocal()][translate.to]<"u"){var m;for(var v in translate.nomenclature.data[translate.language.getLocal()][translate.to])if(translate.nomenclature.data[translate.language.getLocal()][translate.to].hasOwnProperty(v)){var y=translate.nomenclature.data[translate.language.getLocal()][translate.to][v],x=translate.nomenclature.dispose(u,v,y,{node:i,attribute:o});u=x.texts,x.find,typeof m<"u"&&m.push(v)}typeof translate.temp_nomenclature[translate.language.getLocal()]>"u"&&(translate.temp_nomenclature[translate.language.getLocal()]=m)}if(u.length>0&&u[0]!=n){translate.node.get(i).whole=!1;for(var d=0;d<u.length;d++)translate.node.get(i).translateTexts[u[d]]=null}else translate.node.get(i).whole=!0;for(var T=[],d=0;d<u.length;d++)if(u[d].trim().length!=0){var q=translate.addNodeToQueueAnalysis(t,a,u[d],r);Array.prototype.push.apply(T,q)}T.length==0&&(translate.node.get(i).lastTranslateRenderTime=Date.now(),translate.node.get(i).translateTexts={},translate.node.get(i).resultText=translate.element.nodeAnalyse.get(a,r).text,translate.history.translateText.add(translate.node.get(i).originalText,translate.node.get(i).resultText))}}}},addNodeToQueueAnalysis:function(t,a,n,r){var l=translate.language.recognition(n),s=l.languageArray;typeof s[translate.to]<"u"&&delete s[translate.to];var i=translate.whole.isWhole(a),o=[];if(i){var u=translate.language.recognition_languageName_force(l),c=translate.addNodeQueueItem(t,a,n,r,u,"","");c!=null&&o.push(c)}else for(var u in s)if(s.hasOwnProperty(u)){for(var f=0;f<s[u].list.length;f++)if(!(typeof s[u].list[f]>"u"||typeof s[u].list[f].text>"u")){var g=s[u].list[f].text,h=s[u].list[f].beforeText,d=s[u].list[f].afterText,c=translate.addNodeQueueItem(t,a,g,r,u,h,d);c!=null&&o.push(c)}}return o},addNodeQueueItem:function(t,a,n,r,l,s,i){(translate.nodeQueue[t].list[l]==null||typeof translate.nodeQueue[t].list[l]>"u")&&(translate.nodeQueue[t].list[l]=new Array);var o=translate.util.hash(n);(translate.nodeQueue[t].list[l][o]==null||typeof translate.nodeQueue[t].list[l][o]>"u")&&(translate.nodeQueue[t].list[l][o]=new Array,translate.nodeQueue[t].list[l][o].nodes=new Array,translate.nodeQueue[t].list[l][o].original=n,translate.nodeQueue[t].list[l][o].translateText=n);var u=!1;if(typeof a.isSameNode<"u"){for(var f=0;f<translate.nodeQueue[t].list[l][o].nodes.length;f++)if(a.isSameNode(translate.nodeQueue[t].list[l][o].nodes[f].node)){r===translate.nodeQueue[t].list[l][o].nodes[f].attribute&&(u=!0);continue}}if(u)return null;var g=translate.nodeQueue[t].list[l][o].nodes.length;return translate.nodeQueue[t].list[l][o].nodes[g]=new Array,translate.nodeQueue[t].list[l][o].nodes[g].node=a,translate.nodeQueue[t].list[l][o].nodes[g].attribute=r,translate.nodeQueue[t].list[l][o].nodes[g].beforeText=s,translate.nodeQueue[t].list[l][o].nodes[g].afterText=i,translate.nodeQueue[t].list[l][o].nodes[g]},whole:{isEnableAll:!1,enableAll:function(){translate.whole.isEnableAll=!0},class:[],tag:[],id:[],executeTip:function(){translate.whole.class.length==0&&translate.whole.tag.length==0&&translate.whole.id.length==0||translate.log("您开启了 translate.whole 此次行为避开了浏览器端的文本语种自动识别，而是暴力的直接对某个元素的整个文本进行翻译，很可能会产生非常大的翻译量，请谨慎！有关每日翻译字符的说明，可参考： http://translate.zvo.cn/42557.html "),translate.whole.tag.indexOf("html")>-1&&translate.log("自检发现您设置了 translate.whole.tag 其中有 html ，这个是不生效的，最大只允许设置到 body ")},isWhole:function(t){if(translate.whole.isEnableAll)return!0;if(translate.whole.class.length==0&&translate.whole.tag.length==0&&translate.whole.id.length==0&&translate.whole.isEnableAll==!1||t==null||typeof t>"u")return!1;for(var a=t,n=100;n-- >0;){if(a==null||typeof a>"u")return!1;var r=translate.element.getNodeName(a).toLowerCase();if(r.length>0){if(r=="html"||r=="#document")return!1;if(translate.whole.tag.indexOf(r)>-1)return!0}if(a.className!==null&&typeof a.className=="string"){var l=a.className;if(l==null||typeof l!="string")continue;l=l.trim().split(" ");for(var s=0;s<l.length;s++)if(l[s]!=null&&l[s].trim().length>0&&translate.whole.class.indexOf(l[s])>-1)return!0}if(a.id!=null&&typeof a.id<"u"&&translate.whole.id.indexOf(a.id)>-1)return!0;a=a.parentElement}return!1}},language:{englishVarietys:["french","italian","deutsch","portuguese"],systems:{latin:{direction:"left-to-right",coreFeatures:"基础字母26个（A-Z），部分语言添加变音符号（如é、ñ、ü），从左到右书写",languages:["english","latin","french","spanish","deutsch","portuguese","italian","越南语","马来语","印尼语","土耳其语","波兰语","荷兰语","瑞典语","非洲诸语（多数）","美洲诸语（多数）","菲律宾语","哈萨克语（现代拉丁化）"]},chinese:{direction:"left-to-right",coreFeatures:"表意文字，单字独立，可组合成词，笔画复杂，现代多横向书写",languages:["chinese_simplified","chinese_traditional","japanese","korean"]},arabic:{direction:"right-to-left",coreFeatures:"表意文字，单字独立，可组合成词，笔画复杂，现代多横向书写",languages:["阿拉伯语","波斯语","乌尔都语","旁遮普语（巴基斯坦）","豪萨语（西非）","普什图语"]},cyrillic:{direction:"left-to-right",coreFeatures:"源于希腊字母，字母形态独特（如п、в、м），部分字母与拉丁字母形似但发音不同",languages:["俄语","乌克兰语","白俄罗斯语","保加利亚语","塞尔维亚语（官方）"]},thai:{direction:"left-to-right",coreFeatures:"元音附标文字，字母弯曲优美，含音调符号（影响词义）",languages:["thai"]}},generateLanguageNameObject:function(){var t=new Map;for(var a in translate.language.systems)if(translate.language.systems.hasOwnProperty(a))for(var n=0;n<translate.language.systems[a].languages.length;n++)t.set(translate.language.systems[a].languages[n],{system:a});return t},map_data:null,map:function(){return translate.language.map_data==null&&(translate.language.map_data=translate.language.generateLanguageNameObject()),translate.language.map_data},local:"",translateLocal:!1,translateLanguagesRange:[],setLocal:function(t){translate.useVersion="v2",translate.language.local=t},getLocal:function(){return(translate.language.local==null||translate.language.local.length<1)&&translate.language.autoRecognitionLocalLanguage(),translate.language.local},getCurrent:function(){var t=translate.storage.get("to");return t!=null&&typeof t<"u"&&t.length>0?t:translate.language.getLocal()},defaultTo:"",setDefaultTo:function(t){typeof t=="string"&&t.trim().length>0&&(translate.language.defaultTo=t);var a=translate.storage.get("to");a!=null&&typeof a<"u"&&a.length>0||(translate.storage.set("to",t),translate.to=t)},clearCacheLanguage:function(){typeof translate.language.setUrlParamControl_use<"u"&&translate.language.setUrlParamControl_use&&(translate.log("使用提示："),translate.log("translate.language.setUrlParamControl(...) 的作用是 可以通过URL传一个语种，来指定当前页面以什么语种显示。 参考文档： http://translate.zvo.cn/4075.html"),translate.log("translate.language.clearCacheLanguage() 是清除历史翻译语种缓存，也就是清除之前指定翻译为什么语种。 参考文档：http://translate.zvo.cn/4080.html"),translate.log("如果你执行了 translate.language.setUrlParamControl(...) 那么是要根据url传参来切换语种的，但是后面又出现了 translate.language.clearCacheLanguage() 它会阻止 translate.language.setUrlParamControl(...) 它的设置，即使有url传递翻译为什么语言，也会因为 translate.language.clearCacheLanguage() 给清除掉，使URL传参的语种不起任何作用。")),translate.to="",translate.storage.set("to","")},setUrlParamControl_use:!1,setUrlParamControl_name:"language",setUrlParamControl:function(t){translate.language.setUrlParamControl_use=!0,(typeof t>"u"||t.length<1)&&(t="language"),translate.language.setUrlParamControl_name=t;var a=translate.util.getUrlParam(t);typeof a>"u"||a==""||a=="null"||a=="undefined"||(translate.storage.set("to",a),translate.to=a)},getTranslateAreaText:function(){var t="",a=document.createElement("div");if(translate.documents!=null&&typeof translate.documents<"u"&&translate.documents.length>0)for(var n=0;n<translate.documents.length;n++){var r=translate.documents[n];typeof r<"u"&&r!=null&&typeof r.innerText<"u"&&r.innerText!=null&&r.innerText.length>0&&a.appendChild(r.cloneNode(!0))}else typeof document.head<"u"&&a.appendChild(document.head.cloneNode(!0)),typeof document.body<"u"&&a.appendChild(document.body.cloneNode(!0));for(var l=0;l<translate.ignore.tag.length;l++)for(var s=translate.ignore.tag[l],i=a.querySelectorAll(s),o=Array.prototype.slice.call(i),u=0;u<o.length;u++){var f=o[u];f.parentNode&&f.parentNode.removeChild(f)}return t=a.innerText,t==null||typeof t>"u"||t.length<1?(translate.language.local="chinese_simplified",""):(t=t.replace(/\s/g,""),t)},autoRecognitionLocalLanguage:function(){if(translate.language.local!=null&&translate.language.local.length>2)return translate.language.local;var t=translate.language.getTranslateAreaText();translate.language.local="chinese_simplified";var a=translate.language.recognition(t);return translate.language.local=a.languageName,translate.language.local},get:function(t){for(var a=new Array,n=new Array,r=[],l=[],s=0;s<t.length;s++){var i=t.charAt(s),o=translate.language.getCharLanguage(i);o==""&&(o="unidentification");var u=translate.language.analyse(o,n,r,l,i);n=u.langStrs,typeof r.language<"u"&&(l.language=r.language,l.charstr=r.charstr,l.storage_language=r.storage_language),r.language=u.storage_language,r.charstr=i,r.storage_language=u.storage_language,a.push(o)}return typeof n.unidentification<"u"&&delete n.unidentification,typeof n.specialCharacter<"u"&&delete n.specialCharacter,typeof n.number<"u"&&delete n.number,n},recognitionAlgorithm:function(t,a,n,r){if(typeof n.english<"u"&&typeof n.romance<"u"&&a.languageName=="english"&&n.romance/n.english>.008&&(typeof translate.language.local<"u"&&translate.language.local.length>1&&translate.language.englishVarietys.indexOf(translate.language.local)>-1&&(a.languageName=translate.language.local),a.languageName=="english")){var l=translate.language.romanceSentenceAnaly(t);l.length==0?translate.log("语种识别异常，应该是 法语、西班牙语、葡萄牙语、意大利语 中的一种才是，除非是除了这四种语种之外的别的 罗曼语族 中的语种，当前已将 "+t+"识别为英语。 你可以联系我们求助 https://translate.zvo.cn/4030.html"):a.languageName=l}if(typeof n.japanese<"u"&&a.languageName!="japanese"&&n.japanese/r>.08&&(a.languageName="japanese"),(typeof n.chinese_simplified<"u"||typeof n.chinese_traditional<"u")&&typeof n.english<"u"&&a.languageName=="english"){var s=0;typeof n.chinese_simplified<"u"&&(s=s+n.chinese_simplified),typeof n.chinese_traditional<"u"&&(s=s+n.chinese_traditional),s/n.english>.05&&(a.languageName="chinese_simplified")}return typeof n.chinese_simplified<"u"&&typeof n.chinese_traditional<"u"&&a.languageName=="chinese_simplified"&&n.chinese_traditional/n.chinese_simplified>.03&&(a.languageName="chinese_traditional"),a},recognition_languageName_force:function(t){if(!translate.language.translateLocal||translate.language.getLocal()==translate.language.getCurrent()&&translate.language.translateLocal===!1)return t.languageName;var a=translate.language.getCurrent();if(typeof translate.language.map().get(a)<"u"&&typeof translate.language.map().get(translate.language.getLocal())<"u"){var n={};for(var r in t.languageArray)t.languageArray.hasOwnProperty(r)&&typeof translate.language.map().get(r)<"u"&&(n[translate.language.map().get(r).system]=r);if(translate.language.map().get(a).system=="latin"){delete n.latin;var l=Object.keys(n);if(l.length>0)return n[l[0]]}}return t.languageName},recognition:function(t){var a=translate.language.get(t),n=[],r=[],l=0;for(var s in a)if(a.hasOwnProperty(s)&&typeof a[s]=="object"){for(var i=0,o=0;o<a[s].length;o++)i=i+a[s][o].text.length;l=l+i,n[s]=i,r[s]=i}var u="",f=0;for(var g in n)n.hasOwnProperty(g)&&n[g]>f&&(u=g,f=n[g]);var h={};for(var g in a)a.hasOwnProperty(g)&&(h[g]={},h[g].number=r[g],h[g].list=a[g]);var d={languageName:u,languageArray:h};return translate.language.recognitionAlgorithm(t,d,n,l)},getCharLanguage:function(t){if(t==null||typeof t>"u")return"";if(this.russian(t))return"russian";if(this.english(t))return"english";if(this.romance(t))return"romance";if(this.specialCharacter(t))return"specialCharacter";if(this.number(t))return"number";var a=this.chinese(t);return a=="simplified"?"chinese_simplified":a=="traditional"?"chinese_traditional":this.japanese(t)?"japanese":this.korean(t)?"korean":this.greek(t)?"greek":this.thai(t)?"thai":this.arabic(t)?"arabic":this.romanian(t)?"romanian":this.hebrew(t)?"hebrew":""},analyse:function(t,a,n,r,l){typeof a[t]>"u"&&(a[t]=new Array);var s=0;typeof n.storage_language>"u"||(translate.language.connector(l)&&(t=n.storage_language),n.storage_language==t?s=a[t].length-1:s=a[t].length),typeof a[t][s]>"u"&&(a[t][s]=new Array,a[t][s].beforeText="",a[t][s].afterText="",a[t][s].text=""),a[t][s].text=a[t][s].text+l,translate.language.wordBlankConnector(translate.language.getLocal())==!1&&translate.language.wordBlankConnector(translate.to)&&n.storage_language!=null&&typeof n.storage_language<"u"&&n.storage_language.length>0&&n.storage_language!="specialCharacter"&&(translate.language.wordBlankConnector(n.storage_language)==!1&&translate.language.wordBlankConnector(t)?a[n.storage_language][a[n.storage_language].length-1].afterText=" ":n.storage_language=="english"&&t!="english"&&(a[t][s].beforeText=" "));var i=new Array;return i.langStrs=a,i.storage_language=t,i},connector:function(t){return!!(/.*[\u0020\u00A0\u202F\u205F\u3000]+.*$/.test(t)||/.*[\u0030-\u0039]+.*$/.test(t)||/.*[\u0021\u0022\u0023\u0024\u0025\u0026\u0027\u002C\u002D\u002E\u003A\u003B\u003F\u0040]+.*$/.test(t)||/.*[\u3002\uFF1F\uFF01\uFF0C\u3001\uFF1B\uFF1A\u300C\u300D\u300E\u300F\u2018\u2019\u201C\u201D\uFF08\uFF09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uFF0E\u300A\u300B\u3008\u3009\u00b7]+.*$/.test(t))},wordBlankConnector:function(t){if(t==null||typeof t>"u")return!0;switch(t.trim().toLowerCase()){case"chinese_simplified":return!1;case"chinese_traditional":return!1;case"korean":return!1;case"japanese":return!1}return!0},chinese_traditional_dict:"皚藹礙愛翺襖奧壩罷擺敗頒辦絆幫綁鎊謗剝飽寶報鮑輩貝鋇狽備憊繃筆畢斃閉邊編貶變辯辮鼈癟瀕濱賓擯餅撥缽鉑駁蔔補參蠶殘慚慘燦蒼艙倉滄廁側冊測層詫攙摻蟬饞讒纏鏟産闡顫場嘗長償腸廠暢鈔車徹塵陳襯撐稱懲誠騁癡遲馳恥齒熾沖蟲寵疇躊籌綢醜櫥廚鋤雛礎儲觸處傳瘡闖創錘純綽辭詞賜聰蔥囪從叢湊竄錯達帶貸擔單鄲撣膽憚誕彈當擋黨蕩檔搗島禱導盜燈鄧敵滌遞締點墊電澱釣調諜疊釘頂錠訂東動棟凍鬥犢獨讀賭鍍鍛斷緞兌隊對噸頓鈍奪鵝額訛惡餓兒爾餌貳發罰閥琺礬釩煩範販飯訪紡飛廢費紛墳奮憤糞豐楓鋒風瘋馮縫諷鳳膚輻撫輔賦複負訃婦縛該鈣蓋幹趕稈贛岡剛鋼綱崗臯鎬擱鴿閣鉻個給龔宮鞏貢鈎溝構購夠蠱顧剮關觀館慣貫廣規矽歸龜閨軌詭櫃貴劊輥滾鍋國過駭韓漢閡鶴賀橫轟鴻紅後壺護滬戶嘩華畫劃話懷壞歡環還緩換喚瘓煥渙黃謊揮輝毀賄穢會燴彙諱誨繪葷渾夥獲貨禍擊機積饑譏雞績緝極輯級擠幾薊劑濟計記際繼紀夾莢頰賈鉀價駕殲監堅箋間艱緘繭檢堿鹼揀撿簡儉減薦檻鑒踐賤見鍵艦劍餞漸濺澗漿蔣槳獎講醬膠澆驕嬌攪鉸矯僥腳餃繳絞轎較稭階節莖驚經頸靜鏡徑痙競淨糾廄舊駒舉據鋸懼劇鵑絹傑潔結誡屆緊錦僅謹進晉燼盡勁荊覺決訣絕鈞軍駿開凱顆殼課墾懇摳庫褲誇塊儈寬礦曠況虧巋窺饋潰擴闊蠟臘萊來賴藍欄攔籃闌蘭瀾讕攬覽懶纜爛濫撈勞澇樂鐳壘類淚籬離裏鯉禮麗厲勵礫曆瀝隸倆聯蓮連鐮憐漣簾斂臉鏈戀煉練糧涼兩輛諒療遼鐐獵臨鄰鱗凜賃齡鈴淩靈嶺領餾劉龍聾嚨籠壟攏隴樓婁摟簍蘆盧顱廬爐擄鹵虜魯賂祿錄陸驢呂鋁侶屢縷慮濾綠巒攣孿灤亂掄輪倫侖淪綸論蘿羅邏鑼籮騾駱絡媽瑪碼螞馬罵嗎買麥賣邁脈瞞饅蠻滿謾貓錨鉚貿麽黴沒鎂門悶們錳夢謎彌覓綿緬廟滅憫閩鳴銘謬謀畝鈉納難撓腦惱鬧餒膩攆撚釀鳥聶齧鑷鎳檸獰甯擰濘鈕紐膿濃農瘧諾歐鷗毆嘔漚盤龐國愛賠噴鵬騙飄頻貧蘋憑評潑頗撲鋪樸譜臍齊騎豈啓氣棄訖牽扡釺鉛遷簽謙錢鉗潛淺譴塹槍嗆牆薔強搶鍬橋喬僑翹竅竊欽親輕氫傾頃請慶瓊窮趨區軀驅齲顴權勸卻鵲讓饒擾繞熱韌認紉榮絨軟銳閏潤灑薩鰓賽傘喪騷掃澀殺紗篩曬閃陝贍繕傷賞燒紹賒攝懾設紳審嬸腎滲聲繩勝聖師獅濕詩屍時蝕實識駛勢釋飾視試壽獸樞輸書贖屬術樹豎數帥雙誰稅順說碩爍絲飼聳慫頌訟誦擻蘇訴肅雖綏歲孫損筍縮瑣鎖獺撻擡攤貪癱灘壇譚談歎湯燙濤縧騰謄銻題體屜條貼鐵廳聽烴銅統頭圖塗團頹蛻脫鴕馱駝橢窪襪彎灣頑萬網韋違圍爲濰維葦偉僞緯謂衛溫聞紋穩問甕撾蝸渦窩嗚鎢烏誣無蕪吳塢霧務誤錫犧襲習銑戲細蝦轄峽俠狹廈鍁鮮纖鹹賢銜閑顯險現獻縣餡羨憲線廂鑲鄉詳響項蕭銷曉嘯蠍協挾攜脅諧寫瀉謝鋅釁興洶鏽繡虛噓須許緒續軒懸選癬絢學勳詢尋馴訓訊遜壓鴉鴨啞亞訝閹煙鹽嚴顔閻豔厭硯彥諺驗鴦楊揚瘍陽癢養樣瑤搖堯遙窯謠藥爺頁業葉醫銥頤遺儀彜蟻藝億憶義詣議誼譯異繹蔭陰銀飲櫻嬰鷹應纓瑩螢營熒蠅穎喲擁傭癰踴詠湧優憂郵鈾猶遊誘輿魚漁娛與嶼語籲禦獄譽預馭鴛淵轅園員圓緣遠願約躍鑰嶽粵悅閱雲鄖勻隕運蘊醞暈韻雜災載攢暫贊贓髒鑿棗竈責擇則澤賊贈紮劄軋鍘閘詐齋債氈盞斬輾嶄棧戰綻張漲帳賬脹趙蟄轍鍺這貞針偵診鎮陣掙睜猙幀鄭證織職執紙摯擲幟質鍾終種腫衆謅軸皺晝驟豬諸誅燭矚囑貯鑄築駐專磚轉賺樁莊裝妝壯狀錐贅墜綴諄濁茲資漬蹤綜總縱鄒詛組鑽緻鐘麼為隻兇準啟闆裡靂餘鍊",chinese:function(t){return/.*[\u4e00-\u9fa5]+.*$/.test(t)?this.chinese_traditional_dict.indexOf(t)>-1?"traditional":"simplified":""},japanese:function(t){return!!/.*[\u3040-\u309F\u30A0-\u30FF]+.*$/.test(t)},korean:function(t){return!!/.*[\uAC00-\uD7AF]+.*$/.test(t)},russian:function(t){return!!/^[\u0410-\u044F\u0401\u0451]$/.test(t)},thai:function(t){return!!/^[\u0E01-\u0E59]$/.test(t)},arabic:function(t){return/^[\u0600-\u06FF\u0750-\u077F]$/.test(t)},romanian:function(t){return/^[\u00C0-\u00FF\u0100-\u017F\u0218-\u021B]$/.test(t)},greek:function(t){return!!/^[\u0391-\u03A9\u03B1-\u03C9]$/.test(t)},hebrew:function(t){return/^[\u0590-\u05FF]$/.test(t)},number:function(t){return!!/.*[\u0030-\u0039]+.*$/.test(t)},english:function(t){return/.*[\u0041-\u005a]+.*$/.test(t)?!0:!!/.*[\u0061-\u007a]+.*$/.test(t)},romance_dict:["é","è","ê","à","ç","œ","ñ","á","ó","ò","ì","ã","õ"],romance:function(t){return this.romance_dict.indexOf(t)>-1},romanceSentenceAnaly:function(t){const a={french:{score:0,chars:["é","è","ê","à","ç","œ"]},spanish:{score:0,chars:["ñ","á","ó"],pairs:["ll"]},italian:{score:0,chars:["ò","ì"],pairs:["cc","ss"]},portuguese:{score:0,chars:["ã","õ"]}};for(let l=0;l<t.length;l++){const s=t[l].toLowerCase();if(Object.keys(a).forEach(i=>{a[i].chars.includes(s)&&(a[i].score+=1)}),l<t.length-1){const i=t.slice(l,l+2).toLowerCase();Object.keys(a).forEach(o=>{const u=a[o].pairs;u&&u.includes(i)&&(a[o].score+=2)})}}let n="",r=-1;return Object.keys(a).forEach(l=>{a[l].score>r&&(r=a[l].score,n=l)}),n||""},specialCharacter:function(t){return!!(/.*[\u2460-\u24E9]+.*$/.test(t)||/.*[\u2500-\u25FF]+.*$/.test(t)||/.*[\u3200-\u33FF]+.*$/.test(t)||/.*[\uFF00-\uFF5E]+.*$/.test(t)||/.*[\u2000-\u22FF]+.*$/.test(t)||/.*[\u3001-\u3036]+.*$/.test(t)||/.*[\u0020-\u002F]+.*$/.test(t)||/.*[\u003B\u003B\u003C\u003D\u003E\u003F\u005B\u005C\u005D\u005E\u005F\u0060\u007B\u007C\u007D\u007E]+.*$/.test(t)||/.*[\u0009\u000a\u0020\u00A0\u1680\u180E\u202F\u205F\u3000\uFEFF]+.*$/.test(t)||/.*[\u2000-\u200B]+.*$/.test(t)||/.*[\u2C60-\u2C77]+.*$/.test(t))},textTranslateReplace:function(t,a,n,r){return translate.util.textReplace(t,a,n,r)}},executeByLocalLanguage:function(){var t=translate.util.browserDefaultLanguage();if(typeof t<"u"&&t.length>0){translate.changeLanguage(t);return}typeof translate.request.api.ip!="string"||translate.request.api.ip==null||translate.request.api.ip.length<1||translate.request.post(translate.request.api.ip,{},function(a,n){a.result!=1?(translate.log("==== ERROR 获取当前用户所在区域异常 ===="),translate.log(data.info),translate.log("==== ERROR END ====")):(translate.storage.set("to",a.language),translate.to=a.language,translate.execute())},null)},util:{text_full_half_width_generate:function(t,a){if(typeof t>"u")return[t];if(t.trim().length==0)return[t];var n=translate.language.wordBlankConnector(a),r=["，","：","。"],l=[",",":","."],s=t,i=s.charAt(0),o=s.charAt(s.length-1),u=[];if(u.push(t),n){if(r.indexOf(i)>-1){var f=l[r.indexOf(i)]+" "+s.substring(1,s.length);u.push(f),r.indexOf(o)>-1&&(u.push(f.substring(0,f.length-1)+l[r.indexOf(o)]+" "),u.push(f.substring(0,f.length-1)+l[r.indexOf(o)]))}r.indexOf(o)>-1&&(u.push(s.substring(0,s.length-1)+l[r.indexOf(o)]+" "),u.push(s.substring(0,s.length-1)+l[r.indexOf(o)]))}else{if(l.indexOf(i)>-1){var g=r[l.indexOf(i)]+s.substring(1,s.length);u.push(g),g.charAt(1)===" "&&u.push(g.substring(0,1)+g.substring(2,s.length)),l.indexOf(o)>-1&&(u.push(g.substring(0,g.length-1)+r[l.indexOf(o)]),g.charAt(1)===" "&&u.push(g.substring(0,1)+g.substring(2,g.length-1)+r[l.indexOf(o)]))}l.indexOf(o)>-1&&u.push(s.substring(0,s.length-1)+r[l.indexOf(o)])}return u},textReplace:function(t,a,n,r,l){if(t==a)return n;if(typeof l=="object")for(var s=l.length;s>=0;s--){var i=translate.util.text_full_half_width_generate(l[s],r);i.length>1&&(i.shift(),l=l.concat(i))}for(var o=translate.util.text_full_half_width_generate(a,r),u=0;u<o.length;u++)t.indexOf(o[u])>-1&&(t=translate.util.textReplace_service(t,o[u],n,r,l));return t},textReplace_service:function(t,a,n,r,l){if(t==a)return n;for(var s=translate.util.findParticiple(t,a,l),i=s.length-1;i>-1;i--){let u=s[i],f=""+n,g=""+a;if(translate.language.wordBlankConnector(r)){let d=s[i];var o=s[i]+a.length;if(o<t.length){let c=t.charAt(o);/。/.test(c)?(f=f+". ",g=a+"。"):/，/.test(c)?(f=f+", ",g=a+"，"):/：/.test(c)?(f=f+": ",g=a+"："):[" ",`
`,"	","]","|","_","-","/"].indexOf(c)!==-1||f.length>0&&f.charAt(f.length-1)==" "||(f=f+" ")}if(d>0){let c=t.charAt(d-1);/。/.test(c)?(u--,f=". "+f,g="。"+g):/，/.test(c)?(u--,f=", "+f,g="，"+g):/：/.test(c)?(u--,f=": "+f,g="："+g):[" ",`
`,"	","[","|","_","-","/"].indexOf(c)!==-1||f.length>0&&f.charAt(0)==" "||(f=" "+f)}}let h=translate.util.replaceFromIndex(t,u,g,f);h.replaceEndIndex<1?translate.log("translate.util.findParticiple 中已经发现了，但是实际没有替换，出现异常了！理论上这是不应该出现的。 text:"+t+" , index:"+s[i]+",  translateOriginal:"+a):t=h.text}return t},findParticiple:function(t,a,n){var r=[];(typeof n>"u"||n==null)&&(n=[]);for(var l=[],s=0;s<n.length;s++)n[s].indexOf(a)!=-1&&n[s].length>a.length&&l.push(n[s]);var i=0;let o=translate.util.participleIndexFind(t,l);for(var u=300;t.indexOf(a,i)>-1&&u-- >0;){var f=t.indexOf(a,i),g=!1;if(l.length>0&&o.length>0)for(var h=0;h<o.length;h++){let d=o[h];if(f>=d.start&&f<=d.end){g=!0;break}}g||r.push(f),i=f+a.length}return r},participleIndexFind:function(t,a){let n=[];for(let r=a.length-1;r>=0;r--){let l=a[r],s=0;for(;t.indexOf(l,s)>-1;){let i=t.indexOf(l,s),o=i+l.length-1,u={start:i,end:o};n.push(u),s=i+l.length-1}}return n},replaceFromIndex:function(t,a,n,r){const l=t.slice(0,a),s=t.slice(a),i=s.indexOf(n);if(i>-1){const o=s.replace(n,r);return{text:l+o,replaceEndIndex:a+i+r.length}}else return{text:l,replaceEndIndex:0}},uuid:function(){var t=new Date().getTime();window.performance&&typeof window.performance.now=="function"&&(t+=performance.now());var a="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?r:r&3|8).toString(16)});return a},findTag:function(t){var a=/<[^>]+>/g;return a.test(t)},arrayFindMaxNumber:function(t){for(var a={},n=[],r=0,l=0,s=t.length;l<s;l++)a[t[l]]?a[t[l]]++:a[t[l]]=1,a[t[l]]>r&&(r=a[t[l]]);for(var i in a)a.hasOwnProperty(i)&&a[i]===r&&n.push(i);return n},hash:function(t){if(t==null||typeof t>"u")return t;var a=0,n,r;if(t.length===0)return a;for(n=0;n<t.length;n++)r=t.charCodeAt(n),a=(a<<5)-a+r,a|=0;return a+""},charReplace:function(t){return t==null?"":(t=t.trim(),t=t.replace(/\t|\n|\v|\r|\f/g,""),t)},regExp:{pattern:function(t){return t=t.replace(/\\/g,"\\\\"),t=t.replace(/\"/g,'\\"'),t=t.replace(/\?/g,"\\?"),t=t.replace(/\$/g,"\\$"),t=t.replace(/\(/g,"\\("),t=t.replace(/\)/g,"\\)"),t=t.replace(/\|/g,"\\|"),t=t.replace(/\+/g,"\\+"),t=t.replace(/\*/g,"\\*"),t=t.replace(/\[/g,"\\["),t=t.replace(/\]/g,"\\]"),t=t.replace(/\^/g,"\\^"),t=t.replace(/\{/g,"\\{"),t=t.replace(/\}/g,"\\}"),t},resultText:function(t){return t}},getUrlParam:function(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(a);return n!=null?unescape(n[2]):""},synchronizesLoadJs:function(t){var a=null;if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch{a=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(a=new XMLHttpRequest);if(a.open("GET",t,!1),a.send(null),a.readyState==4)if(a.status>=200&&a.status<300||a.status==0||a.status==304){var n=document.getElementsByTagName("HTML")[0],r=document.createElement("script");r.language="javascript",r.type="text/javascript";try{r.appendChild(document.createTextNode(a.responseText))}catch{r.text=a.responseText}return n.appendChild(r),!0}else return!1;else return!1},loadMsgJs:function(){typeof msg<"u"||translate.util.synchronizesLoadJs("https://res.zvo.cn/msg/msg.js")},objSort:function(t){var a=Array.from(Object.keys(t));a.sort(function(l,s){return s.length-l.length});var n=new Array;for(var r of a)n[r]=t[r];return n},versionStringToInt:function(t){var a=t.split("."),n=0;return n=parseInt(a[0])*1e3*1e3+n,n=parseInt(a[1])*1e3+n,n=parseInt(a[2])+n,n},split:function(t,a,n){let r=a,l=[];if(JSON.stringify(t).length<=a)l.push(t);else{let s=JSON.stringify(t).trim().substring(1,JSON.stringify(t).length-1);if(JSON.stringify(t).length-a<=2){a=a-4;let i=s.substring(0,s.lastIndexOf('","')+1),o=s.substring(s.lastIndexOf('","')+2);l.push(JSON.parse("["+i+"]")),l.push(JSON.parse("["+o+"]"))}else{a=a-2;let i=0;for(;i-s.length<0;){let o="";i+a-s.length>=0?o=s.substring(i):o=s.substring(i,i+a);let u=o.length,f=1;o.endsWith('"')?o.endsWith('","')?u-=2:o.startsWith('"')||(u=o.lastIndexOf('","')+1):o.endsWith('",')?u-=1:(u=o.lastIndexOf('","')+1,u<=0&&(o.startsWith('"')?u=o.length-1:u=o.length-2,o.endsWith('"')||(f=0)));let g="";u-o.length>0||u-0==0?(g=o,u=u+g.length):g=o.substring(0,u),!g.startsWith('"')&&!g.startsWith(',"')&&(g='"'+g),g.endsWith('"')||(g=g+'"'),i+=u+f,g="["+g+"]";try{l.push(JSON.parse(g))}catch{i=i-(u+f)+1}}}}return n&&n>0&&(l=translate.util._splitMaxSize(l,r,n)),l},_splitMaxSize:function(t,a,n){let r=[],l=[];if(t.forEach(function(s,i){if(s=l.concat(s),s.length>n){let u=s.slice(0,n),f=s.slice(n),g=1;for(;JSON.stringify(u).length>a&&(u=s.slice(0,n-g),f=s.slice(n-g),g++,!(g>=s.length+1)););r.push(u),l.length=0,l=f}else{let u=s,f=[],g=1;for(;JSON.stringify(u).length>a&&(u=s.slice(0,n-g),f=s.slice(n-g),g++,!(g>=s.length+1)););r.push(u),l.length=0,l=f}}),l.length>0){let s=[];s.push(l);let i=translate.util._splitMaxSize(s,a,n);r=r.concat(i)}return r},browserLanguage:{zh:"chinese_simplified","zh-CN":"chinese_simplified","zh-TW":"chinese_traditional","zh-HK":"chinese_traditional",co:"corsican",gn:"guarani",rw:"kinyarwanda",ha:"hausa",no:"norwegian",nl:"dutch",yo:"yoruba",en:"english","en-US":"english",kok:"gongen",la:"latin",ne:"nepali",fr:"french",cs:"czech",haw:"hawaiian",ka:"georgian",ru:"russian",fa:"persian",bho:"bhojpuri",hi:"hindi",be:"belarusian",sw:"swahili",is:"icelandic",yi:"yiddish",tw:"twi",ga:"irish",gu:"gujarati",km:"khmer",sk:"slovak",he:"hebrew",kn:"kannada",hu:"hungarian",ta:"tamil",ar:"arabic",bn:"bengali",az:"azerbaijani",sm:"samoan",af:"afrikaans",id:"indonesian",da:"danish",sn:"shona",bm:"bambara",lt:"lithuanian",vi:"vietnamese",mt:"maltese",tk:"turkmen",as:"assamese",ca:"catalan",si:"singapore",ceb:"cebuano",gd:"scottish-gaelic",sa:"sanskrit",pl:"polish",gl:"galician",lv:"latvian",uk:"ukrainian",tt:"tatar",cy:"welsh",ja:"japanese",fil:"filipino",ay:"aymara",lo:"lao",te:"telugu",ro:"romanian",ht:"haitian_creole",doi:"dogrid",sv:"swedish",mai:"maithili",th:"thai",hy:"armenian",my:"burmese",ps:"pashto",hmn:"hmong",dv:"dhivehi",lb:"luxembourgish",sd:"sindhi",ku:"kurdish",tr:"turkish",mk:"macedonian",bg:"bulgarian",ms:"malay",lg:"luganda",mr:"marathi",et:"estonian",ml:"malayalam",de:"deutsch",sl:"slovene",ur:"urdu",pt:"portuguese",ig:"igbo",ckb:"kurdish_sorani",om:"oromo",el:"greek",es:"spanish",fy:"frisian",so:"somali",am:"amharic",ny:"nyanja",pa:"punjabi",eu:"basque",it:"italian",sq:"albanian",ko:"korean",tg:"tajik",fi:"finnish",ky:"kyrgyz",ee:"ewe",hr:"croatian",kri:"creole",qu:"quechua",bs:"bosnian",mi:"maori"},browserDefaultLanguage:function(){var t=navigator.language||navigator.userLanguage;if(typeof t=="string"&&t.length>0){var a=translate.util.browserLanguage[t];if(typeof a>"u")translate.log("browser default language : "+t+", translate.js current translate channel not support this language ");else return a}return""},urlSplitByText:function(t){const a=/(https?:\/\/[\w\-._~:\/?#[\]@!$&'()*+;=%]+(?=[\s\u4e00-\u9fa5，。；,!?]|$))/gi,n=t.split(a);let r={};for(let l=0;l<n.length;l++)l%2===0?n[l]!==""&&(r[n[l]]="0"):r[n[l]]="1";return r},getElementPosition:function(t){const a=t.getBoundingClientRect(),n=window.scrollX||document.documentElement.scrollLeft,r=window.scrollY||document.documentElement.scrollTop,l=a.left+n,s=a.top+r,i=a.right-a.left,o=a.bottom-a.top,u=l+i,f=s+o;return{startX:l,startY:s,endX:u,endY:f,width:i,height:o}},compareStringsIgnoringNumbers:function(t,a){let n=0,r=0;const l=t.length,s=a.length;for(;n<l||r<s;){for(;n<l&&t.charCodeAt(n)>=48&&t.charCodeAt(n)<=57;)n++;for(;r<s&&a.charCodeAt(r)>=48&&a.charCodeAt(r)<=57;)r++;if(n<l!=r<s)return!1;if(n>=l&&r>=s)return!0;if(t[n]!==a[r])return!1;n++,r++}return!0}},service:{name:"translate.service",use:function(t){if(typeof translate.enterprise<"u"&&translate.enterprise.isUse==!0){translate.log("您已启用了企业级翻译通道 translate.enterprise.use(); (文档：https://translate.zvo.cn/4087.html) , 所以您设置的 translate.service.use('"+t+"'); (文档：https://translate.zvo.cn/4081.html) 将失效不起作用，有企业级翻译通道全部接管。");return}if(typeof t=="string"&&(translate.service.name=t,t!="translate.service")){if(translate.whole.enableAll(),t.toLowerCase()=="giteeai"){translate.request.api.host=["https://giteeai.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn:1000/","https://api.translate.zvo.cn:1000/","https://america.api.translate.zvo.cn:1000/"];return}if(t.toLowerCase()=="siliconflow"){translate.request.api.host=["https://siliconflow.zvo.cn/","https://america.api.translate.zvo.cn:1414/","https://deutsch.enterprise.api.translate.zvo.cn:1414/"];return}}},edge:{api:{translate:"https://edge.microsoft.com/translate/translatetext?from={from}&to={to}&isEnterpriseClient=false"},language:{json:[{id:"ukrainian",name:"Україна",serviceId:"uk"},{id:"norwegian",name:"Norge",serviceId:"no"},{id:"welsh",name:"Iaith Weleg",serviceId:"cy"},{id:"dutch",name:"nederlands",serviceId:"nl"},{id:"japanese",name:"日本語",serviceId:"ja"},{id:"filipino",name:"Pilipino",serviceId:"fil"},{id:"english",name:"English",serviceId:"en"},{id:"lao",name:"ກະຣຸນາ",serviceId:"lo"},{id:"telugu",name:"తెలుగుName",serviceId:"te"},{id:"romanian",name:"Română",serviceId:"ro"},{id:"nepali",name:"नेपालीName",serviceId:"ne"},{id:"french",name:"Français",serviceId:"fr"},{id:"haitian_creole",name:"Kreyòl ayisyen",serviceId:"ht"},{id:"czech",name:"český",serviceId:"cs"},{id:"swedish",name:"Svenska",serviceId:"sv"},{id:"russian",name:"Русский язык",serviceId:"ru"},{id:"malagasy",name:"Malagasy",serviceId:"mg"},{id:"burmese",name:"ဗာရမ်",serviceId:"my"},{id:"pashto",name:"پښتوName",serviceId:"ps"},{id:"thai",name:"คนไทย",serviceId:"th"},{id:"armenian",name:"Արմենյան",serviceId:"hy"},{id:"chinese_simplified",name:"简体中文",serviceId:"zh-CHS"},{id:"persian",name:"Persian",serviceId:"fa"},{id:"chinese_traditional",name:"繁體中文",serviceId:"zh-CHT"},{id:"kurdish",name:"Kurdî",serviceId:"ku"},{id:"turkish",name:"Türkçe",serviceId:"tr"},{id:"hindi",name:"हिन्दी",serviceId:"hi"},{id:"bulgarian",name:"български",serviceId:"bg"},{id:"malay",name:"Malay",serviceId:"ms"},{id:"swahili",name:"Kiswahili",serviceId:"sw"},{id:"oriya",name:"ଓଡିଆ",serviceId:"or"},{id:"icelandic",name:"ÍslandName",serviceId:"is"},{id:"irish",name:"Íris",serviceId:"ga"},{id:"khmer",name:"ភាសា​ខ្មែរName",serviceId:"km"},{id:"gujarati",name:"ગુજરાતી",serviceId:"gu"},{id:"slovak",name:"Slovenská",serviceId:"sk"},{id:"kannada",name:"ಕನ್ನಡ್Name",serviceId:"kn"},{id:"hebrew",name:"היברית",serviceId:"he"},{id:"hungarian",name:"magyar",serviceId:"hu"},{id:"marathi",name:"मराठीName",serviceId:"mr"},{id:"tamil",name:"தாமில்",serviceId:"ta"},{id:"estonian",name:"eesti keel",serviceId:"et"},{id:"malayalam",name:"മലമാലം",serviceId:"ml"},{id:"inuktitut",name:"ᐃᓄᒃᑎᑐᑦ",serviceId:"iu"},{id:"arabic",name:"بالعربية",serviceId:"ar"},{id:"deutsch",name:"Deutsch",serviceId:"de"},{id:"slovene",name:"slovenščina",serviceId:"sl"},{id:"bengali",name:"বেঙ্গালী",serviceId:"bn"},{id:"urdu",name:"اوردو",serviceId:"ur"},{id:"azerbaijani",name:"azerbaijani",serviceId:"az"},{id:"portuguese",name:"português",serviceId:"pt"},{id:"samoan",name:"lifiava",serviceId:"sm"},{id:"afrikaans",name:"afrikaans",serviceId:"af"},{id:"tongan",name:"汤加语",serviceId:"to"},{id:"greek",name:"ελληνικά",serviceId:"el"},{id:"indonesian",name:"IndonesiaName",serviceId:"id"},{id:"spanish",name:"Español",serviceId:"es"},{id:"danish",name:"dansk",serviceId:"da"},{id:"amharic",name:"amharic",serviceId:"am"},{id:"punjabi",name:"ਪੰਜਾਬੀName",serviceId:"pa"},{id:"albanian",name:"albanian",serviceId:"sq"},{id:"lithuanian",name:"Lietuva",serviceId:"lt"},{id:"italian",name:"italiano",serviceId:"it"},{id:"vietnamese",name:"Tiếng Việt",serviceId:"vi"},{id:"korean",name:"한국어",serviceId:"ko"},{id:"maltese",name:"Malti",serviceId:"mt"},{id:"finnish",name:"suomi",serviceId:"fi"},{id:"catalan",name:"català",serviceId:"ca"},{id:"croatian",name:"hrvatski",serviceId:"hr"},{id:"bosnian",name:"bosnian",serviceId:"bs-Latn"},{id:"polish",name:"Polski",serviceId:"pl"},{id:"latvian",name:"latviešu",serviceId:"lv"},{id:"maori",name:"Maori",serviceId:"mi"}],getMap:function(){if(typeof translate.service.edge.language.map>"u"){translate.service.edge.language.map=new Array;for(var t=0;t<translate.service.edge.language.json.length;t++){var a=translate.service.edge.language.json[t];translate.service.edge.language.map[a.id]=a.serviceId}}return translate.service.edge.language.map}},translate:function(t,a,n,r){var l=JSON.parse(decodeURIComponent(a.text));let s=translate.util.split(l,4e4,900);var i={from:a.from+"",to:a.to,text:a.text},o=a.from;o!="auto"&&(o=="romance"?o="fr":o=translate.service.edge.language.getMap()[a.from]);for(var u=translate.service.edge.language.getMap()[a.to],f=translate.service.edge.api.translate.replace("{from}",o).replace("{to}",u),g=0;g<s.length;g++)translate.request.send(f,JSON.stringify(s[g]),i,function(h){var d={};d.info="SUCCESS",d.result=1,d.from=a.from,d.to=a.to,d.text=[];for(var c=0;c<h.length;c++)d.text.push(h[c].translations[0].text);if(s.length>1){for(var p=-1,m=0;m<s.length;m++)if(s[m].length-d.text.length==0){p=m;break}p<0&&(translate.log("------ERROR--------"),translate.log("翻译内容过多，进行拆分，但拆分判断出现异常，currentIndex：-1 请联系 http://translate.zvo.cn/43006.html 说明"));for(var v=0;v<p;v++)for(var y=s[v].length,x=0;x<y;x++)d.text.unshift(null);for(var T=s.length-1;T>p;T--)for(var q=s[T].length,x=0;x<q;x++)d.text.push(null)}n(d)},"post",!0,{"Content-Type":"application/json"},r,!0)}}},request:{data:{},api:{host:["https://api.translate.zvo.cn/","https://america.api.translate.zvo.cn/"],language:"language.json",translate:"translate.json",ip:"ip.json",connectTest:"connectTest.json",init:"init.json"},setHost:function(t){translate.service.use("translate.service"),typeof translate.request.api.host=="string"?translate.request.api.host=[t]:translate.request.api.host=t,translate.request.speedDetectionControl.state=0,translate.storage.set("speedDetectionControl_hostQueue",""),translate.request.speedDetectionControl.hostQueue=[],translate.request.speedDetectionControl.checkHostQueue=new Array,translate.request.speedDetectionControl.checkResponseSpeed(),translate.temp_request_init=void 0,setTimeout(function(){translate.request.initRequest()},3e3)},initRequest:function(){if(typeof translate.request.api.init=="string"&&translate.request.api.init!=null&&translate.request.api.init.length>0){if(typeof translate.temp_request_init>"u")translate.temp_request_init=1;else return;try{translate.request.send(translate.request.api.init,{},{},function(t){if(t.result==0){translate.log("translate.js init 初始化异常："+t.info);return}else if(t.result==1){var a=translate.util.versionStringToInt(t.version),n=translate.util.versionStringToInt(translate.version.replace("v",""));a>n&&translate.log("Tip : translate.js find new version : "+t.version)}},"post",!0,null,function(t){},!1)}catch{}}},appendParams:{},appendHeaders:{},response:function(t){},speedDetectionControl:{state:0,hostMasterNodeCutTime:2e3,hostQueue:[],hostQueueIndex:-1,disableTime:1e6,setCurrentHost:function(t){translate.storage.set("speedDetectionControl_hostQueue",""),translate.request.api.host=t,translate.request.speedDetectionControl.checkHostQueue=new Array,translate.request.speedDetectionControl.checkResponseSpeed_Storage(t,0)},getHostQueue:function(){if(translate.request.speedDetectionControl.hostQueue.length==0){var t=translate.storage.get("speedDetectionControl_hostQueue");if(t==null||typeof t>"u"||t==""){typeof translate.request.api.host=="string"&&(translate.request.api.host=[""+translate.request.api.host]),translate.request.speedDetectionControl.hostQueue=[];for(var a=0;a<translate.request.api.host.length;a++){var n=translate.request.api.host[a];translate.request.speedDetectionControl.hostQueue[a]={host:n,time:0}}}else translate.request.speedDetectionControl.hostQueue=JSON.parse(t);var r=translate.storage.get("speedDetectionControl_lasttime");(r==null||typeof r>"u")&&(r=0);var l=6e4;new Date().getTime()-r>l&&translate.request.speedDetectionControl.checkResponseSpeed()}return translate.request.speedDetectionControl.hostQueue},checkResponseSpeed_Storage:function(t,a){translate.request.speedDetectionControl.checkHostQueue.push({host:t,time:a}),translate.request.speedDetectionControl.checkHostQueue.sort((n,r)=>n.time-r.time),translate.storage.set("speedDetectionControl_hostQueue",JSON.stringify(translate.request.speedDetectionControl.checkHostQueue)),translate.storage.set("speedDetectionControl_lasttime",new Date().getTime()),translate.request.speedDetectionControl.hostQueue=translate.request.speedDetectionControl.checkHostQueue},checkResponseSpeed:function(){translate.request.speedDetectionControl.state=1;var t={"content-type":"application/x-www-form-urlencoded"};if(!(typeof translate.request.api.connectTest!="string"||translate.request.api.connectTest==null||translate.request.api.connectTest.length<1)){translate.request.speedDetectionControl.checkHostQueue=[],translate.request.speedDetectionControl.checkHostQueueMap=[],typeof translate.request.api.host=="string"&&(translate.request.api.host=[""+translate.request.api.host]);for(var a=0;a<translate.request.api.host.length;a++){var n=translate.request.api.host[a];translate.request.speedDetectionControl.checkHostQueueMap[n]={start:new Date().getTime()};try{translate.request.send(n+translate.request.api.connectTest,{host:n},{host:n},function(r){translate.request.speedDetectionControl.state=2;var l=r.info,s=translate.request.speedDetectionControl.checkHostQueueMap[l],i=new Date().getTime()-s.start;translate.request.api.host[0]==l&&(i=i-translate.request.speedDetectionControl.hostMasterNodeCutTime,i<0&&(i=0)),translate.request.speedDetectionControl.checkResponseSpeed_Storage(l,i)},"post",!0,t,function(r){translate.request.speedDetectionControl.state=2;var l=r.requestURL.replace(translate.request.api.connectTest,"");translate.request.speedDetectionControl.checkResponseSpeed_Storage(l,translate.request.speedDetectionControl.disableTime)},!1)}catch(r){translate.log(r)}}}},getHostQueueIndex:function(){if(translate.request.speedDetectionControl.hostQueueIndex<0){var t=translate.storage.get("speedDetectionControl_hostQueueIndex");typeof t>"u"||t==null?(translate.request.speedDetectionControl.hostQueueIndex=0,translate.storage.set("speedDetectionControl_hostQueueIndex",0)):translate.request.speedDetectionControl.hostQueueIndex=t}return translate.request.speedDetectionControl.hostQueueIndex},getHost:function(){var t=translate.request.speedDetectionControl.getHostQueue(),a=translate.request.speedDetectionControl.getHostQueueIndex();return t.length>a||(translate.log("异常，下标越界了！index："+a),a=t.length-1),t[a].host}},getUrl:function(t){var a=translate.request.speedDetectionControl.getHost(),n=a+t+"?v="+translate.version;return n},post:function(t,a,n,r){var l={"content-type":"application/x-www-form-urlencoded"};if(!(typeof a>"u")){if(typeof translate.enterprise<"u"&&translate.enterprise.automaticAdaptationService(),translate.request.getUrl(t),translate.service.name=="client.edge"){if(t==translate.request.api.translate){translate.service.edge.translate(t,a,n,r);return}if(t==translate.request.api.language){var s={};s.info="SUCCESS",s.result=1,s.list=translate.service.edge.language.json,n(s);return}}this.send(t,a,a,n,"post",!0,l,r,!0)}},send:function(t,a,n,r,l,s,i,o,u){var f="";if((a==null||typeof a>"u")&&(a={}),typeof a=="string")f=a;else{a.browserDefaultLanguage=translate.util.browserDefaultLanguage();for(var g in translate.request.appendParams)translate.request.appendParams.hasOwnProperty(g)&&(a[g]=translate.request.appendParams[g]);typeof translate.enterprise<"u"&&typeof translate.enterprise.key<"u"&&typeof translate.enterprise.key=="string"&&translate.enterprise.key.length>0&&(a.key=translate.enterprise.key);for(var h in a)a.hasOwnProperty(h)&&(f.length>0&&(f=f+"&"),f=f+h+"="+a[h])}t.indexOf("https://")==0||t.indexOf("http://")==0||(t=translate.request.getUrl(t));var d=null;try{d=new XMLHttpRequest}catch{d=new ActiveXObject("Microsoft.XMLHTTP")}if(d.data=n,d.open(l,t,s),i!=null)for(var h in i)i.hasOwnProperty(h)&&d.setRequestHeader(h,i[h]);for(var c in translate.request.appendHeaders)translate.request.appendHeaders.hasOwnProperty(c)&&d.setRequestHeader(c,translate.request.appendHeaders[c]);return translate.service.name!="client.edge"&&d.setRequestHeader("currentpage",window.location.href+""),d.send(f),d.onreadystatechange=function(){if(d.readyState==4)if(translate.request.response(d),d.status==200){var p=null;if(!(typeof d.responseText>"u"||d.responseText==null)){if(d.responseText.indexOf("{")>-1&&d.responseText.indexOf("}")>-1)try{p=JSON.parse(d.responseText)}catch(m){translate.log(m)}}p===null?r(d.responseText):r(p,d.data)}else u&&(t.indexOf(translate.request.api.connectTest)>-1||(translate.service.name=="translate.service"&&translate.log(`----- translate.js 提示 -----
翻译服务响应异常，解决这种情况可以有两种方案：
【方案一】：使用采用最新版本 3.16.0及更高版本，js引用文件为 https://cdn.staticfile.net/translate.js/3.16.0/translate.js 并且使用 client.edge 模式 （增加一行设置代码就好，可参考 https://translate.zvo.cn/4081.html ），这样就不会再出现这种情况了，而且这个方案也是完全免费的。 
【方案二】：采用企业级稳定翻译通道 ,但是这个相比于 方案一 来说，是有一定的收费的，大概一年600，这个就是专门为了高速及高稳定准备的，而相比于这个方案二，方案一则是全免费的。 因为方案二我们是部署了两个集群，而每个集群又下分了数个网络节点，包含中国大陆、香港、美国、欧洲、 等多个州，充分保障稳定、高效，同样也产生了不少成本，所以才需要付费。更多信息说明可以参考： http://translate.zvo.cn/4087.html 
【方案三】：私有部署你自己的翻译通道，并且启用内存级翻译缓存，毫秒级响应，但是需要依赖一台1核2G服务器，是最推荐的方式。具体参考：https://translate.zvo.cn/391129.html
-------------`),translate.log("------- translate.js service api response error --------"),translate.log("    http code : "+d.status),translate.log("    response : "+d.response),translate.log("    request url : "+t),translate.log("    request data : "+JSON.stringify(a)),translate.log("    request method : "+l),translate.log("---------------------- end ----------------------"))),d.requestURL=t,o?.(d)},d},translateText:function(t,a,n){var r=new Array,l=translate.language.getLocal(),s=translate.language.getCurrent();if(typeof t=="string")r[0]=t;else{var i=Object.prototype.toString.call(t);if(i=="[object Array]")r=t;else if(i=="[object Object]")typeof t.texts>"u"&&translate.log("translate.request.translateText 传入的值类型异常，因为你没有传入 obj.texts 要翻译的具体文本！ 请查阅文档： https://translate.zvo.cn/4077.html"),typeof t.texts=="string"?r=[t.texts]:r=t.texts,typeof t.from=="string"&&t.from.length>0&&(l=t.from),typeof t.to=="string"&&t.to.length>0&&(s=t.to);else{translate.log("translate.request.translateText 传入的值类型错误，请查阅文档： https://translate.zvo.cn/4077.html");return}}for(var o=new Array,u=[],f={},g=0;g<r.length;g++){var h=translate.util.hash(r[g]),d=translate.storage.get("hash_"+s+"_"+h);d!=null&&d.length>0?o[g]=d:(o[g]="",u.push(r[g]),f[h]=g)}if(u.length==0){var p={from:l,to:s,text:o,result:1};a(p);return}if(!(typeof translate.request.api.translate!="string"||translate.request.api.translate==null||translate.request.api.translate.length<1)){var c=translate.request.api.translate,p={from:l,to:s,text:encodeURIComponent(JSON.stringify(u))};translate.request.post(c,p,function(m,v){m.result!=1&&(translate.log("=======ERROR START======="),translate.log("from : "+v.from),translate.log("to : "+v.to),translate.log("translate text array : "+r),translate.log("response error info: "+m.info),translate.log("=======ERROR END  ======="));for(var y=0;y<m.text.length;y++){var x=translate.util.hash(u[y]);translate.storage.set("hash_"+s+"_"+x,m.text[y]),translate.offline.fullExtract.isUse&&translate.offline.fullExtract.set(x,u[y],p.to,m.text[y]),o[f[x]]=m.text[y]}m.text=o,a(m)},(function(m){n&&typeof n=="function"&&n(m)}))}},listener:{isStart:!1,use:!1,minIntervalTime:800,lasttime:0,executetime:0,delayExecuteTime:200,addExecute:function(){var t=Date.now();translate.request.listener.lasttime==0?(translate.request.listener.executetime=t,translate.request.listener.lasttime=1):translate.request.listener.executetime>1||(t<translate.request.listener.lasttime+translate.request.listener.minIntervalTime?translate.request.listener.executetime=translate.request.listener.lasttime+translate.request.listener.minIntervalTime:translate.request.listener.executetime=t)},trigger:function(t){return!0},start:function(){translate.request.listener.use=!0},addListener:function(){if(translate.request.listener.use==!1||typeof translate.request.listener.isStart<"u"&&translate.request.listener.isStart==!0)return;if(translate.request.listener.isStart=!0,setInterval(function(){var l=Date.now();if(translate.request.listener.executetime>1&&l>translate.request.listener.executetime+translate.request.listener.delayExecuteTime&&(translate.request.listener.executetime=0,translate.request.listener.lasttime=l,translate.executeTriggerNumber>0))try{translate.execute()}catch(s){translate.log(s)}},100),typeof PerformanceObserver>"u"){translate.log("因浏览器版本较低， translate.request.listener.start() 中 PerformanceObserver 对象不存在，浏览器不支持，所以 translate.request.listener.start() 未生效。");return}const t=new PerformanceObserver(l=>{for(var s=!1,i=0;i<l.getEntries().length;i++){var o=l.getEntries()[i];if(o.initiatorType==="fetch"||o.initiatorType==="xmlhttprequest"){var u=o.name;typeof translate.request.api.host=="string"&&(translate.request.api.host=[translate.request.api.host]);for(var f=!1,g=0;g<translate.request.api.host.length;g++)if(u.indexOf(translate.request.api.host[g])>-1){f=!0;break}if(typeof translate.service.edge<"u"&&u.indexOf("edge.microsoft.com/translate/translatetext")>-1&&(f=!0),f||!translate.request.listener.trigger())continue;s=!0;break}}s&&translate.request.listener.addExecute()});var a=PerformanceObserver.supportedEntryTypes;if(a){for(var n=!1,r=0;r<a.length;r++)if(a[r]==="resource"){n=!0;break}if(n)try{t.observe({entryTypes:["resource"]});return}catch{translate.log("PerformanceObserver entryTypes 失败，尝试 type 参数")}}try{t.observe({type:"resource",buffered:!0}),translate.log("使用 PerformanceObserver type")}catch{translate.log("当前浏览器不支持 PerformanceObserver 的任何参数, translate.request.listener.start() 未启动")}}}},storage:{IndexedDB:{db:null,initDB:function(){const t=this;return new Promise((a,n)=>{const r="translate.js",l="kvStore",i=indexedDB.open(r,1);i.onupgradeneeded=function(o){const u=o.target.result;u.objectStoreNames.contains(l)||u.createObjectStore(l,{keyPath:"key"})},i.onsuccess=function(o){t.db=o.target.result,a()},i.onerror=function(o){n("IndexedDB 打开失败")}})},set:async function(t,a){return this.db||await this.initDB(),new Promise((n,r)=>{const s=this.db.transaction("kvStore","readwrite").objectStore("kvStore"),i={key:t,value:a},o=s.put(i);o.onsuccess=()=>n(),o.onerror=()=>r("写入失败")})},get:async function(t){return this.db||await this.initDB(),new Promise((a,n)=>{const s=this.db.transaction("kvStore","readonly").objectStore("kvStore").get(t);s.onsuccess=()=>{const i=s.result;a(i?i.value:void 0)},s.onerror=()=>n("读取失败")})},list:async function(t=""){return this.db||await this.initDB(),new Promise((a,n)=>{const s=this.db.transaction("kvStore","readonly").objectStore("kvStore").openCursor(),i=[],o="^"+t.replace(/\*/g,".*")+"$",u=new RegExp(o);s.onsuccess=f=>{const g=f.target.result;g?(u.test(g.key)&&i.push({key:g.key,value:g.value.value}),g.continue()):a(i)},s.onerror=()=>n("游标读取失败")})}},set:function(t,a){localStorage.setItem(t,a)},get:function(t){return localStorage.getItem(t)}},images:{queues:[],add:function(t){for(var a in t)t.hasOwnProperty(a)&&(translate.images.queues[a]=t[a])},execute:function(){if(!(Object.keys(translate.images.queues).length<1)){for(var t=document.getElementsByTagName("img"),a=0;a<t.length;a++){var n=t[a];if(!(typeof n.src>"u"||n.src==null||n.src.length==0)){var r=n.getAttribute("src");for(var l in translate.images.queues){var s=l,i=translate.images.queues[l];s==r&&(i=i.replace(new RegExp("{language}","g"),translate.to),n.src=i)}}}for(var o=document.getElementsByTagName("*"),a=0;a<o.length;a++){var u=o[a],f=window.getComputedStyle(u,null),g=f.backgroundImage;if(g!="none"){var h=translate.images.gainCssBackgroundUrl(g);if(typeof translate.images.queues[h]<"u"){var i=translate.images.queues[h];i=i.replace(new RegExp("{language}","g"),translate.to),u.style.backgroundImage='url("'+i+'")'}}}}},gainCssBackgroundUrl:function(t){var a=t.indexOf('"'),n=t.lastIndexOf('"');if(a!=-1&&n!=-1){var r=t.substring(a+1,n);return r}return t}},reset:function(t){typeof t>"u"&&(t={}),typeof t.selectLanguageRefreshRender>"u"&&(t.selectLanguageRefreshRender=!0),typeof t.notTranslateTip>"u"&&(t.notTranslateTip=!0),translate.listener.reset(),translate.init_first_trigger_execute=void 0;for(let r of translate.node.data.keys())if(!translate.node.get(r)!=null&&typeof translate.node.get(r).originalText=="string"){var a=!1;if(typeof translate.node.get(r).attribute=="string"&&translate.node.get(r).attribute==="value"){var n=translate.element.getNodeName(r).toLowerCase();(n==="input"||n==="textarea")&&(r.value=translate.node.get(r).originalText,a=!0)}a||(r.nodeValue=translate.node.get(r).originalText)}translate.node.data!=null&&translate.node.data.clear(),translate.nodeQueue={},typeof translate.time.execute.data<"u"&&(translate.time.execute.data={}),translate.storage.set("to",""),translate.to=null,translate.history.translateText.originalMap!==null&&translate.history.translateText.originalMap.clear(),translate.history.translateText.resultMap!==null&&translate.history.translateText.resultMap.clear(),t.selectLanguageRefreshRender&&translate.selectLanguageTag.refreshRender(),translate.state=0},selectionTranslate:{use:!1,selectionX:0,selectionY:0,callTranslate:function(t){let a=window.getSelection();if(a.anchorOffset==a.focusOffset)return;let n=window.getSelection().toString();if(typeof translate.request.api.translate!="string"||translate.request.api.translate==null||translate.request.api.translate.length<1){translate.log("已设置了不使用 translate 翻译接口，翻译请求被阻止");return}var r=translate.request.api.translate,l={from:translate.language.getLocal(),to:translate.to,text:encodeURIComponent(JSON.stringify([n]))};translate.request.post(r,l,function(s,i){if(s.result!=1){translate.log("translate.selectionTranslate network response error : "+s.info);return}let o=document.querySelector("#translateTooltip");o.innerText=s.text[0],o.style.top=selectionY+20+"px",o.style.left=selectionX+50+"px",o.style.display=""},null)},start:function(){translate.selectionTranslate.use=!0;let t=document.createElement("span");t.innerText="",t.setAttribute("id","translateTooltip"),t.setAttribute("style","background-color:black;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:999;top:150%;left:50%; "),document.body.appendChild(t),document.addEventListener("mousedown",a=>{selectionX=a.pageX,selectionY=a.pageY},!1),document.addEventListener("mouseup",translate.selectionTranslate.callTranslate,!1),document.addEventListener("click",a=>{document.querySelector("#translateTooltip").style.display="none"},!1)}},enterprise:{isUse:!1,use:function(){if(translate.enterprise.isUse=!0,translate.request.speedDetectionControl.hostMasterNodeCutTime=300,translate.request.api.host=["https://america-enterprise-api-translate.zvo.cn/","https://beijing.enterprise.api.translate.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn/","https://america.api.translate.zvo.cn:666/","https://api.translate.zvo.cn:666/","https://api.translate.zvo.cn:888/"],translate.service.name=="client.edge"){translate.service.name="translate.service",translate.log("您已启用了企业级翻译通道 translate.enterprise.use(); (文档：https://translate.zvo.cn/4087.html) , 所以您设置的 translate.service.use('client.edge'); (文档：https://translate.zvo.cn/4081.html) 将失效不起作用，有企业级翻译通道全部接管。");return}},automaticAdaptationService:function(){if(translate.enterprise.isUse){var t=translate.request.speedDetectionControl.getHostQueue();t.length>0&&t[0].time+1>translate.request.speedDetectionControl.disableTime&&(translate.service.name="client.edge")}},key:""},progress:{style:`
            /* CSS部分 */
            /* 灰色水平加载动画 */
            .translate_api_in_progress {
              position: relative;
              overflow: hidden; /* 隐藏超出部分的动画 */
            }

            /* 蒙版层 */
            .translate_api_in_progress::after {
              content: '';
              position: absolute;
              top: 0;
              left: 0%;
              width: 100%;
              height: 100%;
              background: rgba(255, 255, 255, 1); /* 半透明白色遮罩 */
              z-index: 2;
            }

            /* 水平加载条动画 */
            .translate_api_in_progress::before {
              content: '';
              position: absolute;
              top: 50%;
              left: 0%;
              width: 100%;
              height:100%; /* 细线高度 */
              background: linear-gradient(
                90deg,
                transparent 0%,
                #e8e8e8 25%,  /* 浅灰色 */
                #d0d0d0 50%,  /* 中灰色 */
                #e8e8e8 75%,  /* 浅灰色 */
                transparent 100%
              );
              background-size: 200% 100%;
              animation: translate_api_in_progress_horizontal-loader 3.5s linear infinite;
              z-index: 3;
              transform: translateY(-50%);
            }

            @keyframes translate_api_in_progress_horizontal-loader {
              0% {
                background-position: 200% 0;
              }
              100% {
                background-position: -200% 0;
              }
            }
        `,api:{isTip:!0,use:!1,setUITip:function(t){translate.progress.api.isTip=t},removeChildClass:function(t,a){var n=t.childNodes;if(!(n==null||typeof n>"u")){if(n.length>0)for(var r=0;r<n.length;r++)translate.progress.api.removeChildClass(n[r],a+1)}a!=1&&(typeof t>"u"||typeof t.className=="string"&&(t.className.indexOf("translate_api_in_progress")<-1||(t.className=t.className.replace(/translate_api_in_progress/g,""))))},startUITip:function(t){translate.progress.api.use=!0,typeof t>"u"&&(t={}),typeof t.maskLayerMinWidth!="number"&&(t.maskLayerMinWidth=10);var a=document.getElementById("translatejs-text-element-hidden");if(typeof a>"u"||a==null){const r=document.createElement("style");r.textContent=' .translatejs-text-element-hidden, .translatejs-text-element-hidden[type="text"]::placeholder{color: transparent !important; -webkit-text-fill-color: transparent !important; text-shadow: none !important;} ',r.id="translatejs-text-element-hidden",document.head.appendChild(r)}var n=document.getElementById("translatejs-mask-layer-animation");if(typeof n>"u"||n==null){const r=document.createElement("style");r.textContent=translate.progress.style,r.id="translatejs-mask-layer-animation",document.head.appendChild(r)}translate.progress.api.isTip&&(translate.lifecycle.execute.translateNetworkBefore.push(function(r){new Date().getTime();for(var l=translate.element.nodeToElement(r.nodes),s=0;s<l.length;s++)l[s].className=l[s].className+" translatejs-text-element-hidden";var i=translate.visual.getRects(l),o=translate.visual.rectsToOneArray(i),u=translate.visual.coordinateSort(o);const f=[];for(let p=0;p<u.length;p++)u[p].width<t.maskLayerMinWidth&&f.push(p);for(var g=f.length-1;g>-1;g--)u.splice(f[g],1);for(var h=translate.visual.rectsSpaceEliminateOverlap(u),d=h.rects,s=0;s<d.length;s++){var c=d[s].node.parentNode;typeof c<"u"&&typeof c.className=="string"&&c.className.indexOf("translate_api_in_progress")>-1||typeof d[s].node.className=="string"&&d[s].node.className.indexOf("translate_api_in_progress")>-1||(d[s].node.className=d[s].node.className+" translate_api_in_progress")}}),translate.lifecycle.execute.translateNetworkAfter.push(function(r){for(var l=translate.element.nodeToElement(r.nodes),s=0;s<l.length;s++)typeof l[s].className=="string"&&(l[s].className.indexOf("translatejs-text-element-hidden")>-1&&(l[s].className=l[s].className.replace(/translatejs-text-element-hidden/g,"")),l[s].className.indexOf("translate_api_in_progress")>-1&&(l[s].className=l[s].className.replace(/translate_api_in_progress/g,"")))}))}}},js:{transString:function(jsString,targetLanguage,successFunction,failureFunction){let jsObject;try{jsObject=JSON.parse(jsString)}catch(e){try{jsObject=eval("("+jsString+")")}catch(t){translate.log(t),failureFunction(t);return}}translate.js.transObject(jsObject,targetLanguage,successFunction,failureFunction)},transObject:function(t,a,n,r){let l=translate.js.find(t),s=l.stringResult;var i=new Array;for(const y in s)i.push(y);var o=new Array,u={from:"auto",to:a,texts:i};if(translate.ignore.text.length>0){for(var f=new Array,g="",h=0;h<translate.ignore.text.length;h++)if(translate.ignore.text[h].trim().length!=0){var d=translate.ignore.text[h];d.indexOf(".")>-1&&(d=d.replaceAll(/\./g,"\\.")),d.indexOf("$")>-1&&(d=d.replaceAll(/\$/g,"\\$")),g!=""&&(g=g+"|"),g=g+d}for(var c=new RegExp(g,"g"),p=0;p<i.length;p++){var m=i[p].split(c);if(m.length>1)for(var v=0;v<m.length;v++)m[v].length>0&&(f.push(m[v]),o[f.length-1]={index:p,original:m[v],isSplit:!0});else f.push(i[p]),o[f.length-1]={index:p,original:i[p],isSplit:!1}}u.texts=f}translate.request.translateText(u,function(y){if(typeof y.result>"u"||y.result==0){r("network connect failure");return}if(y.result==0){r(y.info);return}var x;if(translate.ignore.text.length>0){x=new Array;for(var T=0;T<y.text.length;T++){var q=o[T].index;x.length<q+1&&x.push(i[q]),x[q]=translate.util.textReplace(x[q],o[T].original,y.text[T],y.to)}}else x=y.text;if(x&&x.length===i.length?i.forEach((E,O)=>{const N=x[O],C=s[E];C&&C.length>0&&C.forEach(P=>{translate.js.setValueByPath(t,P,N)})}):console.error("翻译结果长度不匹配或为空"),Object.keys(l.functionResult).length>0)for(var k in l.functionResult)l.functionResult.hasOwnProperty(k)&&translate.js.setValueByPath(t,k,l.functionResult[k]);n(t)})},setValueByPath:function(t,a,n){const r=a.replace(/\[(\d+)\]/g,".$1").split(".");let l=t;for(let s=0;s<r.length-1;s++)l=l[r[s]];l[r[r.length-1]]=n},find:function(t,a=""){let n={},r={};if(typeof t=="object"&&t!==null)if(Array.isArray(t))t.forEach((s,i)=>{const o=a?`${a}[${i}]`:`[${i}]`,u=translate.js.find(s,o),f=u.stringResult;for(const[d,c]of Object.entries(f))n[d]||(n[d]=[]),n[d]=n[d].concat(c);const g=u.functionResult;for(var h in g)g.hasOwnProperty(h)&&(r[h]=g[h])});else for(const s in t){const i=a?`${a}.${s}`:s;if(typeof t[s]=="object"&&t[s]!==null){const o=translate.js.find(t[s],i),u=o.stringResult;for(const[g,h]of Object.entries(u))n[g]||(n[g]=[]),n[g]=n[g].concat(h);const f=o.functionResult;for(var l in f)f.hasOwnProperty(l)&&(r[l]=f[l])}else typeof t[s]=="string"?(typeof n[t[s]]>"u"&&(n[t[s]]=[]),n[t[s]].push(i)):typeof t[s]=="function"&&(r[i]=t[s])}else typeof t=="string"&&(typeof n[t]>"u"&&(n[t]=[]),n[t].push(a));return{stringResult:n,functionResult:r}},objToString:function(t,a){if(typeof t=="object"){if(typeof t.jsObject!="object"){var n={jsObject:t};t=n}}else t={};typeof a=="number"&&(t.formatSupplementaryCharLength=a),typeof t.formatSupplementaryCharLength!="number"&&(t.formatSupplementaryCharLength=4);let r=JSON.stringify(t.jsObject,(u,f)=>{if(typeof f=="function"){var g=f.toString();return typeof g=="string"&&g.length>0&&(g=g.replace(/\n/g,"___TRANSLATEJS_LINE_BREAK___")),g}else return f},t.formatSupplementaryCharLength);if(r.indexOf("___TRANSLATEJS_LINE_BREAK___")>-1){const u=r.split(`
`);for(var l=0;l<u.length;l++)if(u[l].includes("___TRANSLATEJS_LINE_BREAK___")){u[l]=u[l].replace(/___TRANSLATEJS_LINE_BREAK___/g,`
`);const f=u[l].match(/"[^"]+":\s*"([^"]+)"/);if(f&&f[1]){let g=f[1].replace(/___TRANSLATEJS_LINE_BREAK___/g,`
`);try{const h=g.match(/function\s*([^\(]*)\(([^)]*)\)\s*\{([\s\S]*)\}/);if(h){var[,s,i,o]=h;typeof t.functionBodyHandle=="function"&&(o=t.functionBodyHandle(o)),u[l]=u[l].replace(`"${f[1]}"`,`function${s}(${i}){${o}}`)}}catch(h){console.error("转换函数时出错:",h)}}}r=u.join(`
`)}return r}},network:{isUse:!1,originalOpen:XMLHttpRequest.prototype.open,originalSend:XMLHttpRequest.prototype.send,setRequestHeaderOriginal:XMLHttpRequest.prototype.setRequestHeader,rules:[{url:/https:\/\/www\.guanleiming\.com\/a\/b\/.html/,methods:["GET","POST"],params:["a","b1"]}],getRuleMatch:function(t,a){for(let n=0;n<translate.network.rules.length;n++){const r=translate.network.rules[n];if(typeof r.url>"u"&&r.url==""){translate.log("WARINNG : translate.network.rule find url is null:"),translate.log(r);continue}if(!(!r.url.test(t)||!r.methods.includes(a.toUpperCase())))return r}return null},use:function(){translate.network.isUse=!0,XMLHttpRequest.prototype.open=function(...t){return translate.network.hookOpen.apply(this,t)},XMLHttpRequest.prototype.send=function(...t){return translate.network.hookSend.apply(this,t)},XMLHttpRequest.prototype.setRequestHeader=function(...t){return translate.network.setRequestHeader.apply(this,t)},translate.network.fetch.use()},_translateText(t){return translate.language.getLocal()==translate.language.getCurrent()||typeof t=="string"&&t.length>0&&translate.language.recognition(t).languageName==translate.language.getLocal()?new Promise((a,n)=>{const r={from:"auto",to:translate.language.getLocal(),text:[t]};a(r)}):new Promise((a,n)=>{const r={from:"auto",to:translate.language.getLocal(),texts:[t]};translate.request.translateText(r,function(l){l.result===1?a(l):n(l)})})},setRequestHeader:function(t,a){return this._requestContext&&(this._requestContext.headers=this._requestContext.headers||{},this._requestContext.headers[t]=a),translate.network.setRequestHeaderOriginal.call(this,t,a)},RequestHandler:{async handleGet(t,a){typeof a.params>"u"&&typeof a.params.length>"u"&&a.params.length<1&&(translate.log("WARINNG: rule not find params , rule : "),translate.log(a),a.params=[]);try{const l=new URL(t,window.location.origin),s=l.searchParams;for(var n=0;n<a.params.length;n++){var r=a.params[n];if(s.has(r)){const i=s.get(r),o=await translate.network._translateText(i);typeof o>"u"?translate.log("WARINNG: translateResultData is undefined"):typeof o.result>"u"?translate.log("WARINNG: translateResultData.result is undefined"):o.result!=1?translate.log("WARINNG: translateResultData.result failure : "+o.info):s.set(r,decodeURIComponent(o.text[0]))}}return l.toString()}catch(l){return console.warn("GET处理失败:",l),t}},async handleForm(t,a){try{const n=new URLSearchParams(t),r={...n};for(const l of a.params)if(n.has(l)){const s=n.get(l),i=await translate.network._translateText(s);r[l]=i}return new URLSearchParams(r).toString()}catch(n){return console.warn("表单处理失败:",n),t}},async handleJson(t,a){try{const r={...JSON.parse(t)};for(const l of a.params)if(r.hasOwnProperty(l)){const s=r[l];r[l]=await translate.network._translateText(s)}return JSON.stringify(r)}catch(n){return console.warn("JSON处理失败:",n),t}}},_requestContext:null,hookOpen(t,a,n,r,l){return this._requestContext={method:t.toUpperCase(),originalUrl:a,async:n,user:r,password:l,matchedRule:translate.network.getRuleMatch(a,t)},translate.network.originalOpen.call(this,t,a,n,r,l)},hookSend(t){const a=this._requestContext;if(!a||!a.matchedRule)return translate.network.originalSend.call(this,t);const n=async()=>{let r=t;const l=a.method;try{const i=await translate.network.RequestHandler.handleGet(a.originalUrl,a.matchedRule);if(translate.network.originalOpen.call(this,l,i,a.async,a.user,a.password),a.headers)for(const o in a.headers)translate.network.setRequestHeaderOriginal.call(this,o,a.headers[o]);if(l==="POST"&&typeof t<"u"&&t!=null&&t.length<2e3){var s=!1;if(t.trim().indexOf("[")==0||t.trim().indexOf("{")==0)try{r=await translate.network.RequestHandler.handleJson(t,a.matchedRule),s=!0}catch{s=!1}if(!s)try{r=await translate.network.RequestHandler.handleForm(t,a.matchedRule)}catch{}}}catch(i){console.warn("请求处理异常:",i)}translate.network.originalSend.call(this,r)};a.async!==!1?n.call(this):(console.warn("同步请求不支持翻译拦截"),translate.network.originalSend.call(this,t))},fetch:{originalFetch:window.fetch,use:function(){const t=this;window.fetch=function(...a){return t.hookFetch.apply(t,a)}},hookFetch:async function(t,a){const n=new Request(t,a),r=n.url,l=n.method,s=translate.network.getRuleMatch(r,l);if(!s)return this.originalFetch.call(window,n);const i={method:l,url:r,headers:{},rule:s,isModified:!1};n.headers.forEach((u,f)=>{i.headers[f]=u}),this._requestContext=i;try{const u=await translate.network.RequestHandler.handleGet(r,s);if(l==="GET"){const f=new Request(u,{method:l,headers:new Headers(i.headers),mode:n.mode,credentials:n.credentials,cache:n.cache,redirect:n.redirect,referrer:n.referrer,referrerPolicy:n.referrerPolicy});return this.originalFetch.call(window,f)}if(l==="POST"){let f=null;n.body&&(f=await n.clone().text());const g=n.headers.get("Content-Type");let h=f;if(typeof f<"u"&&f!=null&&f.length<2e3){var o=!1;if(f.trim().indexOf("[")==0||f.trim().indexOf("{")==0)try{h=await translate.network.RequestHandler.handleJson(f,s),o=!0}catch{o=!1}if(!o)try{h=await translate.network.RequestHandler.handleForm(f,s)}catch{}}const d=new Request(u,{method:l,headers:new Headers(i.headers),body:h,mode:n.mode,credentials:n.credentials,cache:n.cache,redirect:n.redirect,referrer:n.referrer,referrerPolicy:n.referrerPolicy});return this.originalFetch.call(window,d)}return this.originalFetch.call(window,n)}catch(u){return console.warn("fetch 请求处理异常:",u),this.originalFetch.call(window,n)}},_requestContext:null}},visual:{getRects:function(t){return t.map(a=>{if(!a)return[];let n=[];if(a.nodeType===Node.TEXT_NODE){const r=document.createRange();r.selectNodeContents(a);const l=r.getClientRects();n=Array.from(l).map(s=>({node:a,left:s.left,top:s.top,right:s.right,bottom:s.bottom,width:s.width,height:s.height,lineIndex:Array.from(l).indexOf(s)}))}else if(a.nodeType===Node.ELEMENT_NODE){const r=a.getBoundingClientRect();n=r?[{node:a,left:r.left,top:r.top,right:r.right,bottom:r.bottom,width:r.width,height:r.height}]:[]}return n})},rectsToOneArray:function(t){for(var a=new Array,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)a.push(t[n][r]);return a},filterRectsByLineInterval:function(t,a){if(!Array.isArray(t)||typeof a!="number"||a<1)return console.error("输入参数无效，请确保rects是数组且line是大于0的数字"),[];const n=t.map(i=>!i||i.top===void 0?null:{...i,rowBase:Math.round(i.top)}).filter(Boolean),r=new Map;n.forEach(i=>{const o=i.rowBase;r.has(o)||r.set(o,[]),r.get(o).push(i)});const l=Array.from(r.entries()).sort((i,o)=>i[0]-o[0]).map(i=>i[1]),s=[];return l.forEach((i,o)=>{o%a===0&&i.length>0&&s.push(i[0])}),s},rectsSpaceEliminateOverlap:function(t){if(!Array.isArray(t)||t.length===0)return{rects:[],removes:[]};const a=2,n=1e-6,r=c=>Math.max(0,c.right-c.left)*Math.max(0,c.bottom-c.top),l=(c,p)=>({w:Math.min(c.right,p.right)-Math.max(c.left,p.left),h:Math.min(c.bottom,p.bottom)-Math.max(c.top,p.top)}),s=t.map((c,p)=>{let{left:m,top:v,right:y,bottom:x}=c;return y<m&&([m,y]=[y,m]),x<v&&([v,x]=[x,v]),{r:{left:m,top:v,right:y,bottom:x},idx:p}});s.sort((c,p)=>Math.abs(c.r.left-p.r.left)>n?c.r.left-p.r.left:Math.abs(c.r.top-p.r.top)>n?c.r.top-p.r.top:Math.abs(c.r.right-p.r.right)>n?c.r.right-p.r.right:c.r.bottom-p.r.bottom);const i=s.length,o=new Array(i).fill(!1),u=s.map(c=>r(c.r));for(let c=0;c<i;c++){if(o[c])continue;const p=s[c].r,m=u[c];for(let v=c+1;v<i;v++){if(o[v])continue;const y=s[v].r,x=p.left<=y.left+a&&p.top<=y.top+a&&p.right>=y.right-a&&p.bottom>=y.bottom-a,T=y.left<=p.left+a&&y.top<=p.top+a&&y.right>=p.right-a&&y.bottom>=p.bottom-a;if(x||T){if(x&&!T){o[v]=!0;continue}if(T&&!x){o[c]=!0;break}const O=u[v];if(m>=O)o[v]=!0;else{o[c]=!0;break}}if(y.left>=p.right-n)break;const{w:q,h:k}=l(p,y);if(q<=a||k<=a)continue;const E=u[v];if(m>E)o[v]=!0;else if(E>m){o[c]=!0;break}else o[v]=!0}}const f=[],g=[],h=s.map(c=>c.idx),d=new Map;for(let c=0;c<i;c++)d.set(h[c],c);for(let c=0;c<t.length;c++){const p=d.get(c);p===void 0||!o[p]?f.push(t[c]):g.push(t[c])}return{rects:f,removes:g}},coordinateSort:function(t){return t.filter(n=>n!==null).sort((n,r)=>Math.abs(n.top-r.top)<5?n.left-r.left:n.top-r.top)},afterAdjacent:function(t){var a=translate.visual.coordinateSort(t);const n=[];return translate.visual.groupRectsByLine(a).forEach(l=>{for(let s=0;s<l.length;s++)for(let i=s+1;i<l.length;i++){const o=l[s],u=l[i];if(!translate.visual.areHorizontallyAdjacent(o,u))break;n.push({before:o,after:u})}}),n},groupRectsByLine:function(t){const a=[];let n=[];return t.forEach(r=>{if(n.length===0)n.push(r);else{const l=n[n.length-1];Math.abs(r.top-l.top)<5?n.push(r):(a.push(n),n=[r])}}),n.length>0&&a.push(n),a},areHorizontallyAdjacent:function(t,a){const n=Math.min(t.bottom,a.bottom)-Math.max(t.top,a.top),r=a.left-t.right;return n>0&&Math.abs(r)<1},afterAddSpace:function(t){const a=[];return t.forEach(n=>{const{before:r,after:l}=n,s=r.node,i=l.node,o=window.getComputedStyle(s.nodeType===Node.TEXT_NODE?s.parentElement:s),u=window.getComputedStyle(i.nodeType===Node.TEXT_NODE?i.parentElement:i),f=parseFloat(o.marginRight)>0||parseFloat(o.paddingRight)>0,g=parseFloat(u.marginLeft)>0||parseFloat(u.paddingLeft)>0;!f&&!g&&typeof s.textContent=="string"&&typeof i.textContent=="string"&&(/\s$/.test(s.textContent)||/^\s/.test(i.textContent)||a.push(s))}),a},adjustTranslationSpaces:function(t){if(!translate.language.wordBlankConnector(translate.to))return;const a=translate.visual.getRects(t);var n=translate.visual.rectsToOneArray(a);const r=translate.visual.afterAdjacent(n);translate.visual.afterAddSpace(r).forEach(s=>{if(s.nodeType===Node.TEXT_NODE)(s.textContent.length===0||s.textContent.substring(s.textContent.length-1,s.textContent.length)!==" ")&&(translate.node.get(s)!==null&&(typeof translate.node.get(s).resultText!="string"&&(translate.node.get(s).resultText=translate.node.get(s).originalText),translate.node.get(s).resultText=translate.node.get(s).resultText+" ",typeof translate.node.get(s).translateResults>"u"&&(translate.node.get(s).translateResults={}),translate.node.get(s).translateResults[translate.node.get(s).resultText]=1,translate.node.get(s).lastTranslateRenderTime=Date.now()),s.textContent=s.textContent+" ");else if(s.nodeType===Node.ELEMENT_NODE){const i=s.lastChild;i&&i.nodeType===Node.TEXT_NODE&&(i.textContent.length===0||i.textContent.substring(i.textContent.length-1,i.textContent.length)!==" ")&&(translate.node.get(i)!==null&&typeof translate.node.get(i).resultText=="string"&&(translate.node.get(i).resultText=translate.node.get(i).resultText+" ",translate.node.get(i).translateResults[translate.node.get(s).resultText]=1,translate.node.get(i).lastTranslateRenderTime=Date.now()),i.textContent=i.textContent+" ")}})},adjustTranslationSpacesByNodequeueUuid:function(t){var a=[];for(var n in translate.nodeQueue[t].list)if(translate.nodeQueue[t].list.hasOwnProperty(n)&&!(typeof translate.nodeQueue[t].list[n]>"u")){for(var r in translate.nodeQueue[t].list[n])if(translate.nodeQueue[t].list[n].hasOwnProperty(r)){for(var l in translate.nodeQueue[t].list[n][r].nodes)if(translate.nodeQueue[t].list[n][r].nodes.hasOwnProperty(l)){var s=translate.nodeQueue[t].list[n][r].nodes[l].node;a.push(s)}}}translate.visual.adjustTranslationSpaces(a)},adjustTranslationSpacesByLastNodequeueUuid:function(a){var a="";for(var n in translate.nodeQueue){a=n;break}typeof a=="string"&&a.length>1&&translate.visual.adjustTranslationSpacesByNodequeueUuid(a)},hideText:{style:`
                /* 文本隐藏核心样式 - 仅隐藏文本内容 */

                html.translatejs-text-hidden p, html.translatejs-text-hidden div, html.translatejs-text-hidden small,
                html.translatejs-text-hidden h1, html.translatejs-text-hidden h2, html.translatejs-text-hidden h3,
                html.translatejs-text-hidden h4, html.translatejs-text-hidden h5, html.translatejs-text-hidden h6,
                html.translatejs-text-hidden span, html.translatejs-text-hidden a, html.translatejs-text-hidden b,
                html.translatejs-text-hidden strong, html.translatejs-text-hidden i, html.translatejs-text-hidden em,
                html.translatejs-text-hidden mark,
                html.translatejs-text-hidden blockquote, html.translatejs-text-hidden ul, html.translatejs-text-hidden ol,
                html.translatejs-text-hidden li, html.translatejs-text-hidden table, html.translatejs-text-hidden th,
                html.translatejs-text-hidden td, html.translatejs-text-hidden label, html.translatejs-text-hidden button,
                html.translatejs-text-hidden input, html.translatejs-text-hidden select, html.translatejs-text-hidden textarea {
                    color: transparent !important;
                    text-shadow: none !important;
                    transition: none !important;
                }

                /* 隐藏占位符文字 */
                html.translatejs-text-hidden ::placeholder {
                    color: transparent !important;
                }

                /* 确保媒体元素不受影响 */
                img, video, iframe, canvas, svg,
                object, embed, picture, source {
                    color: initial !important;
                }

                /* 忽略隐藏的元素保持可见 */
                .ignore-hidden {
                    color: inherit !important;
                }
            `,hide:function(t){const a=document.createElement("style");typeof t>"u"||t==null||t.length==0?(t="translatejs-text-hidden",a.textContent=translate.visual.hideText.style):(t="translatejs-text-hidden-"+t,a.textContent=translate.visual.hideText.style.replace(/translatejs-text-hidden/g,t).replace(/\/\*(.*)\*\//g," ").replace(/\n/g," ")),a.id=t,document.head.appendChild(a),document.documentElement.classList.add(t)},show:function(t){typeof t>"u"||t==null||t.length==0?t="translatejs-text-hidden":t="translatejs-text-hidden-"+t,document.documentElement.classList.remove(t);var a=document.getElementById(t);typeof a!=null&&a!=null&&a.remove()}},webPageLoadTranslateBeforeHiddenText_use:!1,webPageLoadTranslateBeforeHiddenText:function(t){typeof t>"u"&&(t={}),typeof t.inHeadTip>"u"&&(t.inHeadTip=!0),translate.visual.webPageLoadTranslateBeforeHiddenText_use=!0,typeof document.body>"u"||document.body==null||t.inHeadTip&&translate.log("警告： translate.visual.webPageLoadTranslateBeforeHiddenText() 要在 head 标签中触发才能达到最好的效果！"),translate.language.local==""&&translate.log("提醒：在使用 translate.visual.webPageLoadTranslateBeforeHiddenText() 之前，请先手动设置你的本地语种，参考： http://translate.zvo.cn/4066.html  如果你不设置本地语种，则不管你是否有切换语言，网页打开后都会先短暂的不显示文字"),(translate.language.local==""||translate.language.translateLocal==!0||translate.language.local!=translate.language.getCurrent())&&(translate.visual.hideText.hide(),translate.lifecycle.execute.translateNetworkBefore.push(function(a){typeof translate.visual.hideText.first_translate_request_uuid>"u"&&(translate.visual.hideText.first_translate_request_uuid=a.uuid),translate.visual.hideText.first_translate_request_uuid==a.uuid&&(typeof translate.visual.hideText.first_translate_request_number>"u"&&(translate.visual.hideText.first_translate_request_number=0),translate.visual.hideText.first_translate_request_number++)}),translate.lifecycle.execute.renderFinish.push(function(a,n){if(!(typeof translate.visual.hideText.first_translate_request_uuid>"u")){if(translate.visual.hideText.first_translate_request_uuid!=a)return}translate.visual.hideText.show()})),translate.lifecycle.execute.finally.push(function(a){a.triggerNumber<3&&translate.visual.hideText.show()})}},history:{translateText:{resultMap:null,originalMap:null,add:function(t,a){translate.history.translateText.resultMap.set(a,t),translate.history.translateText.originalMap.set(t,a)}}},time:{execute:{isUse:!1,data:{},start:function(){translate.time.execute.isUse&&translate.log("translate.time.execute.start() 已经启动过了，不需要再启动了"),translate.time.execute.data.isUse=!0,translate.lifecycle.execute.start.push(function(t,a){typeof translate.time.execute.data[t]>"u"&&(translate.time.execute.data[t]={}),translate.time.execute.data[t].startTime=new Date().getTime()}),translate.lifecycle.execute.translateNetworkBefore.push(function(t){translate.time.execute.data[t.uuid].translateNetworkBeforeTime=new Date().getTime()}),translate.lifecycle.execute.renderFinish.push(function(t,a){translate.time.execute.data[t].finishTime=new Date().getTime(),translate.time.execute.data[t].allTime=translate.time.execute.data[t].finishTime-translate.time.execute.data[t].startTime;var n=new Array,r=new Array;translate.nodeQueue[t];for(var l in translate.nodeQueue[t].list)if(translate.nodeQueue[t].list.hasOwnProperty(l)&&!(typeof l!="string"||l.length<1)){r.push(l);for(var s in translate.nodeQueue[t].list[l])translate.nodeQueue[t].list[l].hasOwnProperty(s)&&n.push(translate.nodeQueue[t].list[l][s].original)}translate.time.execute.data[t].translateLanguages=r,translate.time.execute.data[t].translateTexts=n,translate.log("[time][translate.execute()] "+translate.time.execute.data[t].allTime+"ms "+(typeof translate.time.execute.data[t].translateNetworkBeforeTime<"u"?"(search&cache "+(translate.time.execute.data[t].translateNetworkBeforeTime-translate.time.execute.data[t].startTime)+"ms)":"")+(n.length>0?" , ["+r+"] : ("+n.length+")["+n.slice(0,3)+(n.length>3?", ...":"")+"]":""))})}},use:!1,printTime:0,log:function(t){if(translate.time.use!=!1){var a=new Date().getTime(),n=0;if(typeof translate.time.temp_lasttime<"u"&&(n=a-translate.time.temp_lasttime),translate.time.temp_lasttime=a,!(n<translate.time.printTime)){var r="";try{var l=new Error,s=l.stack.split(`
`),i=s[2]||s[3],o=i.match(/at (\S+)/);o&&o[1]&&(r=o[1])}catch(u){translate.log(u)}r=r.replace("Object.","translate."),translate.log(r+"() "+n+" -> "+t)}}}},faultTolerance:{documentCreateTextNode:{originalCreateTextNode:null,node:null,use:function(){translate.faultTolerance.documentCreateTextNode.node==null&&(translate.faultTolerance.documentCreateTextNode.node=new Map),translate.lifecycle.changeLanguage.push(function(t){translate.isTranslate(t)?translate.faultTolerance.documentCreateTextNode.enable():translate.faultTolerance.documentCreateTextNode.disable()}),translate.lifecycle.execute.start.push(function(t){translate.executeNumber===0&&translate.isTranslate(t.to)&&translate.faultTolerance.documentCreateTextNode.enable()})},enable:function(){translate.faultTolerance.documentCreateTextNode.originalCreateTextNode==null&&(translate.faultTolerance.documentCreateTextNode.originalCreateTextNode=document.createTextNode,document.createTextNode=function(t){var a=!1,n=null;if(translate.executeTriggerNumber>0&&typeof t=="string"&&t.length>0){var r=translate.history.translateText.originalMap.get(t);typeof r=="string"&&r.length>0&&(n=t,t=r,a=!0)}const l=translate.faultTolerance.documentCreateTextNode.originalCreateTextNode.call(this,t);return a&&(translate.faultTolerance.documentCreateTextNode.node.set(l,{originalText:n,resultText:t}),translate.node.set(l,{attribute:"",originalText:n,resultText:t,translateTexts:{},whole:!0,translateResults:{[n]:1},lastTranslateRenderTime:Date.now()})),l})},disable:function(){translate.faultTolerance.documentCreateTextNode.originalCreateTextNode!=null&&(document.createTextNode=translate.faultTolerance.documentCreateTextNode.originalCreateTextNode,translate.faultTolerance.documentCreateTextNode.originalCreateTextNode=null)}}},quickUse:function(){translate.visual.webPageLoadTranslateBeforeHiddenText(),translate.progress.api.startUITip(),translate.listener.start(),translate.request.listener.start(),translate.language.setUrlParamControl(),translate.language.translateLocal=!0,translate.whole.enableAll(),document.addEventListener("DOMContentLoaded",function(){translate.execute(),setTimeout(function(){translate.execute()},500),setTimeout(function(){translate.execute()},2e3)})},recycle:function(){var t=new Date().getTime(),a=[];for(var n in translate.nodeQueue)if(translate.nodeQueue.hasOwnProperty(n)){var r=translate.nodeQueue[n].expireTime;r+120<t&&a.push(n)}for(var l=0;l<a.length;l++)delete translate.nodeQueue[a[l]];translate.node.refresh();var s=[];for(var n in translate.time.execute.data)if(translate.time.execute.data.hasOwnProperty(n)&&!(typeof translate.time.execute.data[n].finishTime>"u")){var i=translate.time.execute.data[n].finishTime;i+120<t&&s.push(n)}for(var o=0;o<s.length;o++)delete translate.time.execute.data[s[o]]},init:function(){typeof translate.init_execute<"u"||(translate.init_execute="已进行",translate.node.data==null&&(translate.node.data=new Map),translate.history.translateText.resultMap==null&&(translate.history.translateText.resultMap=new Map),translate.history.translateText.originalMap==null&&(translate.history.translateText.originalMap=new Map),translate.language.name==null&&translate.language.generateLanguageNameObject(),translate.lifecycle.execute.start.push(function(t,a){if(!(typeof translate.init_first_trigger_execute<"u")){translate.init_first_trigger_execute=1;for(var n in translate.nomenclature.data)if(translate.nomenclature.data.hasOwnProperty(n)){for(var r in translate.nomenclature.data[n])if(translate.nomenclature.data[n].hasOwnProperty(r))for(var l in translate.nomenclature.data[n][r])translate.nomenclature.data[n][r].hasOwnProperty(l)&&translate.history.translateText.add(l,translate.nomenclature.data[n][r][l])}for(var s=0;s<translate.ignore.text.length;s++)translate.history.translateText.add(translate.ignore.text[s],translate.ignore.text[s]);document.readyState=="loading"&&(translate.log("WARNING : The dom triggered translate.exece() before it was fully loaded, which does not comply with usage standards. The execution of translate.exece() should be done after the DOM is loaded"),translate.log("警告：DOM 在完全加载之前触发了 translate.execute() ，这不符合使用规范，容易出现异常。你应该检查一下你的代码，translate.execute() 的执行应该在DOM加载完成后")),translate.listener.use==!0&&translate.listener.isStart==!1&&typeof translate.listener.start<"u"&&translate.listener.addListener(),translate.request.listener.use==!0&&translate.request.listener.isStart==!1&&translate.request.listener.addListener()}}),typeof translate.recycle<"u"&&setInterval(translate.recycle,60*1e3))}};setTimeout(function(){translate.log(`------ translate.js ------
Two lines of js html automatic translation, page without change, no language configuration file, no API Key, SEO friendly! Open warehouse : https://github.com/xnx3/translate 
两行js实现html全自动翻译。 无需改动页面、无语言配置文件、无API Key、对SEO友好！完全开源，代码仓库：https://gitee.com/mail_osc/translate`)},3e3);try{translate.init()}catch(t){}(function(t,a){typeof define=="function"&&define.amd?define([],()=>a()):typeof module=="object"&&module.exports?module.exports=a():typeof t<"u"&&(t.translate=a())})(void 0,function(){return translate});typeof window<"u"&&(window.translate=translate);export{translate as default};
