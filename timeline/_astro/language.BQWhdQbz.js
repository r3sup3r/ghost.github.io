import{_ as d}from"./preload-helper.BlTxHScW.js";import{S as s,l as i}from"./language.QW22jyx0.js";import{s as t}from"./config.BFBf_zv3.js";const l="selected-language";function L(e){typeof localStorage<"u"&&localStorage.setItem(l,e)}function u(){return typeof localStorage<"u"?localStorage.getItem(l):null}function c(){const e=t.lang;return typeof document<"u"&&document.getElementById("config-carrier")?.dataset.lang||e}function w(e){return i[e]||"chinese_simplified"}function m(){const e=c();return s.includes(e)?e:f()}function f(e="en"){if(typeof window>"u"||typeof navigator>"u")return e;const a=navigator.languages||[navigator.language];for(const o of a){const r=o.toLowerCase().split("-")[0];if(s.includes(r))return r}return e}function p(e){const a=u();if(a)return a;const o=e||c();if(s.includes(o))return i[o];const r=f();return i[r]}function S(){if(typeof window>"u"||!t.translate?.enable)return;const e=window.translate;if(!e||window.translateInitialized)return;t.translate.service&&e.service.use(t.translate.service);const a=m(),o=w(a);e.language.setLocal(o);const r=p(a);r&&r!==o&&(e.to=r),t.translate.autoDiscriminate&&e.setAutoDiscriminateLocalLanguage(),t.translate.ignoreClasses&&t.translate.ignoreClasses.forEach(n=>{e.ignore.class.push(n)}),t.translate.ignoreTags&&t.translate.ignoreTags.forEach(n=>{e.ignore.tag.push(n)}),t.translate.showSelectTag===!1&&(e.selectLanguageTag.show=!1),e.storage.set=function(n,g){n==="to"?L(g):localStorage.setItem(n,g)},e.storage.get=function(n){return n==="to"?u():localStorage.getItem(n)},e.listener.start(),window.translateInitialized=!0,e.to&&e.to!==e.language.getLocal()?setTimeout(()=>{e.execute()},10):e.to===e.language.getLocal()&&e.reset()}async function E(){if(!(typeof window>"u"||!t.translate?.enable))try{window.translate||(await d(()=>import("./translate.n8H0Gmvb.js"),[]),window.translateScriptLoaded=!0),S()}catch(e){console.error("Failed to load or init translate.js:",e)}}export{c as a,p as b,m as c,w as g,E as l,L as s};
