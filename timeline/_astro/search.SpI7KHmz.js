import{o as me,a as pe,r as K,b as N,s as U}from"./attributes.DLxOR_zz.js";import{k as ue,s as h,p as fe,m as Y,f as W,j as q,h as p,t as G,l as P,g as t,a as R,b as he,c as ve,d as s,e as v,u as J,r as b}from"./utils.Dr1TczrG.js";import{s as be}from"./render.C1oLM3jD.js";import{e as ge,i as we}from"./each.CrFLtRbP.js";import{I as E,h as ke}from"./Icon.Bnp6IXE7.js";import{b as Q}from"./input.VY5q94Ck.js";import{u as X}from"./url.PttuBUox.js";import{L as d}from"./config.BFBf_zv3.js";import{i as a}from"./translation.BtQLKSD3.js";import{I as i}from"./zh.CkPLEEwR.js";import"./language.QW22jyx0.js";import{o as ye}from"./widget.BaHW3_Oe.js";import{D as xe}from"./DropdownPanel.DSS4r2cb.js";/* empty css                        */import"./if.Dp9oOE7t.js";import"./branches.BQRjPrVD.js";import"./props.C1U51sjP.js";import"./language.BQWhdQbz.js";import"./preload-helper.BlTxHScW.js";import"./snippet.BrUli7D3.js";import"./this.D2D0wqrb.js";d.Home+"",a(i.home),d.Archive+"",a(i.archive),d.Projects+"",a(i.projects),a(i.projectsSubtitle),d.Skills+"",a(i.skills),a(i.skillsSubtitle),d.Certifications+"",a(i.certifications),a(i.certificationsSubtitle),d.Timeline+"",a(i.timeline),a(i.timelineSubtitle),d.Books+"",a(i.books),a(i.booksSubtitle),d.Diary+"",a(i.diary),a(i.diarySubtitle),d.Albums+"",a(i.albums),a(i.albumsSubtitle),d.Anime+"",a(i.anime),d.Friends+"",a(i.friends),d.About+"",a(i.about),a(i.about);function Z(r,y){typeof window>"u"||(window.location.href=r)}function _e(r,y){if(!r||typeof r!="string"){console.warn("navigateToPage: Invalid URL provided");return}if(r.startsWith("http://")||r.startsWith("https://")||r.startsWith("//")){window.open(r,"_blank");return}if(r.startsWith("#")){if(typeof document<"u"){const c=document.getElementById(r.slice(1));c&&c.scrollIntoView({behavior:"smooth"})}return}if(typeof window<"u"&&window.swup)try{y?.replace||window.swup.navigate(r)}catch(c){console.error("Swup navigation failed:",c),Z(r)}else Z(r)}var Se=W(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),Ie=W(`<div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-acx8g7"/></div> <!>`,1),Le=W('<div id="search-bar" role="button" tabindex="0" aria-label="Search"><!> <input id="search-input-desktop"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <!>',1);function Ge(r,y){ve(y,!0);let c=h(""),x=h(""),m=h(fe([])),j=h(!1),T=!1,_=h(!1),o=h(!1),B;const Pe=[{url:X("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:X("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],ee=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},z=()=>{s(o,!t(o)),t(o)&&setTimeout(()=>{document.getElementById("search-input-desktop")?.focus()},0)},te=()=>{t(c)||s(o,!1)},ae=()=>{setTimeout(()=>{s(o,!1),g(!1,!0)},200)},g=(e,n)=>{const l=document.getElementById("search-panel");!l||!n||(e?l.classList.remove("float-panel-closed"):l.classList.add("float-panel-closed"))},ie=()=>{const e=document.getElementById("search-panel");e&&e.classList.add("float-panel-closed"),s(c,""),s(x,""),s(m,[],!0)},ne=(e,n)=>{e.preventDefault(),ie(),_e(n)},A=async(e,n)=>{if(!e){g(!1,n),s(m,[],!0);return}if(t(_)){s(j,!0);try{let l=[];if(T&&window.pagefind){const w=await window.pagefind.search(e);l=await Promise.all(w.results.map(I=>I.data()))}else l=[],console.error("Pagefind is not available in production environment.");s(m,l,!0),g(t(m).length>0,n)}catch(l){console.error("Search error:",l),s(m,[],!0),g(!1,n)}finally{s(j,!1)}}},C=e=>{const n=document.getElementById("search-panel");!n||n.classList.contains("float-panel-closed")||ye(e,"search-panel",["search-switch","search-bar"],()=>{document.getElementById("search-panel")?.classList.add("float-panel-closed"),s(o,!1)})};me(()=>{document.addEventListener("click",C);const e=()=>{s(_,!0),T=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",T)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),e()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),e()}),setTimeout(()=>{t(_)||(console.log("Fallback: Initializing search after timeout."),e())},2e3)}),Y(()=>{if(t(_)){const e=t(c)||t(x),n=!!t(c)||t(o);clearTimeout(B),e?B=setTimeout(()=>{A(e,n)},300):(s(m,[],!0),g(!1,n))}}),Y(()=>{if(typeof document<"u"){const e=document.getElementById("navbar");t(o)?e?.classList.add("is-searching"):e?.classList.remove("is-searching")}}),pe(()=>{typeof document<"u"&&(document.removeEventListener("click",C),document.getElementById("navbar")?.classList.remove("is-searching")),clearTimeout(B)});var F=Le(),u=q(F),M=v(u);{let e=J(()=>t(o)?"ml-3":"left-1/2 -translate-x-1/2"),n=J(()=>t(o)?"text-black/30 dark:text-white/30":"");E(M,{icon:"material-symbols:search",get class(){return`absolute text-[1.25rem] pointer-events-none ${t(e)??""} transition my-auto ${t(n)??""}`}})}var f=p(M,2);K(f),b(u);var S=p(u,2);S.__click=ee;var se=v(S);E(se,{icon:"material-symbols:search",class:"text-[1.25rem]"}),b(S);var re=p(S,2);xe(re,{id:"search-panel",class:"float-panel-closed absolute md:w-[30rem] top-20 left-4 md:left-[unset] right-4 z-50 search-panel",children:(e,n)=>{var l=Ie(),w=q(l),I=v(w);E(I,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var O=p(I,2);K(O),b(w);var oe=p(w,2);ge(oe,17,()=>t(m),we,($,L)=>{var k=Se();k.__click=de=>ne(de,t(L).url);var D=v(k),V=v(D,!0),le=p(V);E(le,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),b(D);var H=p(D,2),ce=v(H);ke(ce,()=>t(L).excerpt),b(H),b(k),G(()=>{U(k,"href",t(L).url),be(V,t(L).meta.title)}),R($,k)}),Q(O,()=>t(x),$=>s(x,$)),R(e,l)},$$slots:{default:!0}}),G(e=>{N(u,1,`hidden lg:flex transition-all items-center h-11 rounded-lg
        ${t(o)?"bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06] dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10":"btn-plain scale-animation active:scale-90"}
        ${t(o)?"w-48":"w-11"}`),U(f,"placeholder",e),N(f,1,`transition-all pl-10 text-sm bg-transparent outline-0
            h-full ${t(o)?"w-36":"w-0"} text-black/50 dark:text-white/50`,"svelte-acx8g7")},[()=>a(i.search)]),P("mouseenter",u,()=>{t(o)||z()}),P("mouseleave",u,te),P("focus",f,()=>{t(o)||z(),A(t(c),!0)}),P("blur",f,ae),Q(f,()=>t(c),e=>s(c,e)),R(r,F),he()}ue(["click"]);export{Ge as default};
