import{o as V,a as X,b as Y}from"./attributes.DLxOR_zz.js";import{k as Z,i as aa,j as _,a as l,b as ta,c as ea,d as s,g as a,s as h,f as p,e as c,r as o,h as m,t as T,u as ra,l as D}from"./utils.Dr1TczrG.js";import{s as I}from"./render.C1oLM3jD.js";import{i as O}from"./if.Dp9oOE7t.js";import{e as sa,i as na}from"./each.CrFLtRbP.js";import{I as oa}from"./Icon.Bnp6IXE7.js";import{B as ia}from"./breakpoints.CrTEsvGH.js";import{g as la,a as ca,b as da,s as ma}from"./language.BQWhdQbz.js";import{o as pa}from"./widget.BaHW3_Oe.js";import{s as ua}from"./config.BFBf_zv3.js";import{g as fa}from"./language.QW22jyx0.js";import{D as va}from"./DropdownItem.CiwLnubF.js";import{D as ga}from"./DropdownPanel.DSS4r2cb.js";/* empty css                        */import"./branches.BQRjPrVD.js";import"./props.C1U51sjP.js";import"./preload-helper.BlTxHScW.js";import"./snippet.BrUli7D3.js";import"./this.D2D0wqrb.js";var wa=p('<span class="ml-auto text-[var(--primary)]">✓</span>'),_a=p('<span class="text-lg transition"> </span> <span class="text-sm transition flex-grow text-left"> </span> <!>',1),ha=p('<div class="text-sm font-medium text-[var(--primary)] mb-3 px-1">选择语言 / Select Language</div> <div class="grid grid-cols-1 gap-2 max-h-64 overflow-y-auto svelte-oywurh"></div>',1),xa=p('<div class="relative z-50"><button aria-label="Language Translation" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="translate-switch"><!></button> <div id="translate-panel-wrapper"><!></div></div>');function Na(E,j){ea(j,!0);let r=h(!1),x=h(void 0),d=h("");const z=fa();la(ca());function A(){s(r,!a(r))}function L(){s(r,!0)}function B(){s(r,!1)}async function F(t){try{if(!window.translateScriptLoaded&&typeof window.loadTranslateScript=="function"&&await window.loadTranslateScript(),!window.translate){console.warn("translate.js is not loaded");return}const e=window.translate,n=e.language.getLocal();e.changeLanguage(t),t===n&&e.reset(),ma(t),s(d,t,!0)}catch(e){console.error("Failed to execute translation:",e)}s(r,!1)}function b(t){a(r)&&pa(t,"translate-panel","translate-switch",()=>{s(r,!1)})}V(()=>{document.addEventListener("click",b),s(d,da(),!0)}),X(()=>{typeof document<"u"&&document.removeEventListener("click",b)});var y=aa(),C=_(y);{var G=t=>{var e=xa(),n=c(e);n.__click=()=>{window.innerWidth<ia?L():A()};var K=c(n);oa(K,{icon:"material-symbols:translate",class:"text-[1.25rem] transition"}),o(n);var u=m(n,2);let k;var M=c(u);ga(M,{id:"translate-panel",class:"p-4 w-full",get element(){return a(x)},set element(f){s(x,f,!0)},children:(f,La)=>{var $=ha(),P=m(_($),2);sa(P,21,()=>z,na,(N,i)=>{{let R=ra(()=>a(d)===a(i).code);va(N,{get isActive(){return a(R)},onclick:()=>F(a(i).code),class:"gap-3 !p-2 !h-auto",isLast:!1,children:(W,ba)=>{var S=_a(),v=_(S),q=c(v,!0);o(v);var g=m(v,2),H=c(g,!0);o(g);var J=m(g,2);{var Q=w=>{var U=wa();l(w,U)};O(J,w=>{a(d)===a(i).code&&w(Q)})}T(()=>{I(q,a(i).icon),I(H,a(i).name)}),l(W,S)},$$slots:{default:!0}})}}),o(P),l(f,$)},$$slots:{default:!0}}),o(u),o(e),T(()=>k=Y(u,1,"fixed top-[3.625rem] pt-5 right-4 w-[calc(100vw-2rem)] max-w-64 md:absolute md:top-11 md:right-0 md:w-64 md:pt-5 transition-all z-50",null,k,{"float-panel-closed":!a(r)})),D("mouseleave",e,B),D("mouseenter",n,L),l(t,e)};O(C,t=>{ua.translate?.enable&&t(G)})}l(E,y),ta()}Z(["click"]);export{Na as default};
