import{W as t,b as c,a as r,B as v,M as h}from"./constants.Cd1PiS3e.js";import{s as o}from"./config.BFBf_zv3.js";function A(e){return e===r?o.wallpaper.fullscreen?.navbar?.transparentMode||"semi":e===t?o.wallpaper.banner?.navbar?.transparentMode||"semifull":"semi"}const i=()=>typeof document>"u"?{navbar:null,bannerWrapper:null,banner:null,fullscreenContainer:null,mainContent:null}:{navbar:document.getElementById("navbar"),bannerWrapper:document.getElementById("banner-wrapper"),banner:document.getElementById("banner"),fullscreenContainer:document.querySelector("[data-fullscreen-wallpaper]"),mainContent:document.querySelector(".absolute.w-full.z-30")};function d(e,n,a=600){setTimeout(()=>{typeof document<"u"&&document.documentElement.getAttribute("data-wallpaper-mode")===e&&n()},a)}function p(e){const{mainContent:n}=i();if(n)switch(n.classList.remove("no-banner-layout"),e){case t:case"banner":n.style.top=`calc(${v}vh - ${h}rem)`;break;case r:case"fullscreen":case c:case"none":n.classList.add("no-banner-layout"),n.style.top="5.5rem";break;default:n.style.top="5.5rem";break}}function f(e){const{navbar:n}=i();if(!n)return;const a=A(e);n.setAttribute("data-transparent-mode",a),a==="semifull"&&typeof window.initSemifullScrollDetection=="function"&&("requestIdleCallback"in window?requestIdleCallback(()=>window.initSemifullScrollDetection()):setTimeout(()=>window.initSemifullScrollDetection(),0))}function L(e){if(!e)return;e.classList.remove("opacity-0"),e.classList.add("opacity-100");const n=document.querySelector('.block.md\\:hidden[alt="Mobile banner"]');n&&(n.classList.remove("opacity-0"),n.classList.add("opacity-100"))}function w(){const{bannerWrapper:e,fullscreenContainer:n,banner:a}=i();if(n&&(n.style.opacity="0",d(t,()=>{n.classList.add("hidden")})),!e){requestAnimationFrame(w);return}!(typeof document<"u"&&!e.classList.contains("hidden")&&!document.documentElement.classList.contains("banner-hiding"))&&typeof document<"u"&&(document.documentElement.classList.remove("banner-hiding"),document.documentElement.classList.add("banner-transitioning"),e.classList.remove("hidden"),e.offsetHeight,document.documentElement.classList.remove("banner-transitioning"),document.documentElement.classList.add("show-banner-animation"),setTimeout(()=>{document.documentElement.classList.remove("show-banner-animation")},1200)),e.classList.remove("opacity-0"),e.classList.add("opacity-100"),typeof window.initBannerCarousel=="function"?window.initBannerCarousel():setTimeout(()=>{L(a)},100)}function g(){const{bannerWrapper:e,fullscreenContainer:n}=i();if(!n){requestAnimationFrame(g);return}n.classList.remove("hidden"),n.offsetHeight,n.style.opacity=o.wallpaper.fullscreen?.opacity?.toString()||"0.8",e&&(typeof document<"u"&&document.documentElement.classList.contains("banner-hiding")?d(r,()=>{e.classList.add("hidden")}):e.classList.add("hidden"))}function C(){const{bannerWrapper:e,fullscreenContainer:n}=i();e&&e.classList.add("hidden"),n&&(n.style.opacity="0",d(c,()=>{n.classList.add("hidden")}))}function T(e){e===t&&setTimeout(()=>{L(i().banner)},100)}function E(e,n=!1){if(typeof document>"u")return;const a=document.documentElement.getAttribute("data-wallpaper-mode");if(!n&&a===e)return;if(document.documentElement.setAttribute("data-wallpaper-mode",e),a===t&&e!==t){document.documentElement.classList.add("banner-hiding"),p(e),f(e),setTimeout(()=>{document.documentElement.classList.remove("banner-hiding"),l()},600);return}const u=()=>{l()};function l(){const s=document.body;if(!s){requestAnimationFrame(l);return}switch(document.documentElement.classList.add("is-wallpaper-transitioning"),e===t||e===r?s.classList.add("wallpaper-transparent"):setTimeout(()=>{const M=document.documentElement.classList.contains("is-wallpaper-transitioning"),m=document.documentElement.getAttribute("data-wallpaper-mode");(!M||!(m===t||m===r))&&s.classList.remove("wallpaper-transparent")},300),e!==t?s.classList.remove("enable-banner"):s.classList.add("enable-banner"),e){case t:w();break;case r:g(),b(!0);break;case c:C(),b(!1);break}p(e),f(e),T(e),setTimeout(()=>{document.documentElement.classList.remove("is-wallpaper-transitioning")},600)}requestAnimationFrame(u)}function b(e){const{mainContent:n}=i();n&&(e?n.classList.add("wallpaper-transparent"):n.classList.remove("wallpaper-transparent"))}function q(e){typeof localStorage<"u"&&localStorage.setItem("wallpaperMode",e),E(e)}function y(){const e=o.wallpaper.mode;return typeof document<"u"&&document.getElementById("config-carrier")?.dataset.wallpaperMode||e}function S(){return typeof localStorage<"u"&&localStorage.getItem("wallpaperMode")||y()}function k(){const e=S();E(e,!0)}export{S as g,k as i,q as s};
